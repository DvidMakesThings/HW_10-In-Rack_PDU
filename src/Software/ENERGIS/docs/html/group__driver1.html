<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ENERGIS - 8 Channel Managed PDU for 10 Inch Racks: 1. Button Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ENERGIS - 8 Channel Managed PDU for 10 Inch Racks
   </div>
   <div id="projectbrief">A comprehensive power distribution unit for efficient energy management.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__driver1.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title"><ol type="1">
<li>Button Driver </li>
</ol>
<div class="ingroups"><a class="el" href="group__drivers.html">Drivers</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Handles button inputs and actions for the Energis PDU.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for 1. Button Driver:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1.png" border="0" usemap="#agroup____driver1" loading="lazy" alt=""/></div>
<map name="agroup____driver1" id="agroup____driver1">
<area shape="rect" title="Handles button inputs and actions for the Energis PDU." alt="" coords="117,5,230,32"/>
<area shape="rect" href="group__drivers.html" title="All hardware drivers for the Energis PDU." alt="" coords="5,5,69,32"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4e1e35610f25024b1bcd1d1868fc9199" id="r_ga4e1e35610f25024b1bcd1d1868fc9199"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4e1e35610f25024b1bcd1d1868fc9199">_now_ms</a> (void)</td></tr>
<tr class="memdesc:ga4e1e35610f25024b1bcd1d1868fc9199"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current time (ms) since boot.  <br /></td></tr>
<tr class="memitem:gafe4a02607f51e32cc4fa90e8e2478c66" id="r_gafe4a02607f51e32cc4fa90e8e2478c66"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafe4a02607f51e32cc4fa90e8e2478c66">_since</a> (uint32_t now, uint32_t then, uint32_t win)</td></tr>
<tr class="memdesc:gafe4a02607f51e32cc4fa90e8e2478c66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if <code class="param">now</code> - <code class="param">then</code> &gt;= <code class="param">win</code> (ms).  <br /></td></tr>
<tr class="memitem:ga2dc72c9906c44cd43871b5ce0ad6845d" id="r_ga2dc72c9906c44cd43871b5ce0ad6845d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2dc72c9906c44cd43871b5ce0ad6845d">_select_up</a> (void)</td></tr>
<tr class="memdesc:ga2dc72c9906c44cd43871b5ce0ad6845d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move selection up (wrap 7→0) and refresh display if present.  <br /></td></tr>
<tr class="memitem:ga534563cee21f5728b958d0177c0b2fe3" id="r_ga534563cee21f5728b958d0177c0b2fe3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga534563cee21f5728b958d0177c0b2fe3">_select_down</a> (void)</td></tr>
<tr class="memdesc:ga534563cee21f5728b958d0177c0b2fe3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move selection down (wrap 0→7) and refresh display if present.  <br /></td></tr>
<tr class="memitem:ga81a3ea6eb9a8a16aa49da9543e4f3bd4" id="r_ga81a3ea6eb9a8a16aa49da9543e4f3bd4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga81a3ea6eb9a8a16aa49da9543e4f3bd4">_set_short_action</a> (void)</td></tr>
<tr class="memdesc:ga81a3ea6eb9a8a16aa49da9543e4f3bd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute SET short-press action: toggle the selected relay.  <br /></td></tr>
<tr class="memitem:ga6d0167c68ada9e8d950bd5e4968b401b" id="r_ga6d0167c68ada9e8d950bd5e4968b401b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6d0167c68ada9e8d950bd5e4968b401b">_set_long_action</a> (void)</td></tr>
<tr class="memdesc:ga6d0167c68ada9e8d950bd5e4968b401b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute SET long-press action: clear the error LED.  <br /></td></tr>
<tr class="memitem:gace7ec6486dde17b22e09394684f5684d" id="r_gace7ec6486dde17b22e09394684f5684d"><td class="memItemLeft" align="right" valign="top">static int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gace7ec6486dde17b22e09394684f5684d">_set_long_alarm_cb</a> (alarm_id_t id, void *user_data)</td></tr>
<tr class="memdesc:gace7ec6486dde17b22e09394684f5684d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alarm callback to fire the SET long-press action at LONGPRESS_DT.  <br /></td></tr>
<tr class="memitem:ga60c16d2b5323dc486ad6208a244ed7ae" id="r_ga60c16d2b5323dc486ad6208a244ed7ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga60c16d2b5323dc486ad6208a244ed7ae">button_isr</a> (uint gpio, uint32_t events)</td></tr>
<tr class="memdesc:ga60c16d2b5323dc486ad6208a244ed7ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons.  <br /></td></tr>
<tr class="memitem:ga71b68eb02e1df1dada387c9fbb7bbb37" id="r_ga71b68eb02e1df1dada387c9fbb7bbb37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga71b68eb02e1df1dada387c9fbb7bbb37">button_driver_init</a> (void)</td></tr>
<tr class="memdesc:ga71b68eb02e1df1dada387c9fbb7bbb37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize button GPIO interrupts and synchronize UI selection.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga96f1c70b6ce8d319ac9b28ecb447c3c0" id="r_ga96f1c70b6ce8d319ac9b28ecb447c3c0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structbtn__edge__t.html">btn_edge_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga96f1c70b6ce8d319ac9b28ecb447c3c0">s_plus</a> = {0}</td></tr>
<tr class="memdesc:ga96f1c70b6ce8d319ac9b28ecb447c3c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">PLUS timing state (fall-only action).  <br /></td></tr>
<tr class="memitem:ga47af9f4bebafcd4a466989321f4f0ac7" id="r_ga47af9f4bebafcd4a466989321f4f0ac7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structbtn__edge__t.html">btn_edge_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga47af9f4bebafcd4a466989321f4f0ac7">s_minus</a> = {0}</td></tr>
<tr class="memdesc:ga47af9f4bebafcd4a466989321f4f0ac7"><td class="mdescLeft">&#160;</td><td class="mdescRight">MINUS timing state (fall-only action).  <br /></td></tr>
<tr class="memitem:gaea879d6b9e3fa7c47da8007c011988b3" id="r_gaea879d6b9e3fa7c47da8007c011988b3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structbtn__set__t.html">btn_set_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaea879d6b9e3fa7c47da8007c011988b3">s_set</a> = {.long_alarm_id = -1}</td></tr>
<tr class="memdesc:gaea879d6b9e3fa7c47da8007c011988b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">SET press/release + long-press timing state.  <br /></td></tr>
<tr class="memitem:ga7d8fcb712bc5d9f4a723a2671f5eb9c9" id="r_ga7d8fcb712bc5d9f4a723a2671f5eb9c9"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7d8fcb712bc5d9f4a723a2671f5eb9c9">selected_row</a> = 0</td></tr>
<tr class="memdesc:ga7d8fcb712bc5d9f4a723a2671f5eb9c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently selected row (0–7) mapping to relay channels 1–8.  <br /></td></tr>
<tr class="memitem:ga42edf6d6c7a2844cfdcca26ee15f6812" id="r_ga42edf6d6c7a2844cfdcca26ee15f6812"><td class="memItemLeft" align="right" valign="top">volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga42edf6d6c7a2844cfdcca26ee15f6812">last_press_time</a> = 0</td></tr>
<tr class="memdesc:ga42edf6d6c7a2844cfdcca26ee15f6812"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timestamp (ms) of the last <em>press</em> (FALL) observed for any button.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Handles button inputs and actions for the Energis PDU. </p>
<dl class="section version"><dt>Version</dt><dd>1.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-08-27</dd></dl>
<p>This module manages the hardware button interactions for the ENERGIS PDU. It implements a robust per-button edge-state debouncer to avoid double triggers on short presses. PLUS/MINUS act on a debounced falling edge. SET distinguishes short vs. long press by duration.</p>
<p>@project ENERGIS - The Managed PDU Project for 10-Inch Rack @github <a href="https://github.com/DvidMakesThings/HW_10-In-Rack_PDU">https://github.com/DvidMakesThings/HW_10-In-Rack_PDU</a> </p>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga4e1e35610f25024b1bcd1d1868fc9199" name="ga4e1e35610f25024b1bcd1d1868fc9199"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4e1e35610f25024b1bcd1d1868fc9199">&#9670;&#160;</a></span>_now_ms()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t _now_ms </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get current time (ms) since boot. </p>
<dl class="section return"><dt>Returns</dt><dd>Milliseconds since boot as uint32_t. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga4e1e35610f25024b1bcd1d1868fc9199_icgraph.png" border="0" usemap="#agroup__driver1_ga4e1e35610f25024b1bcd1d1868fc9199_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga4e1e35610f25024b1bcd1d1868fc9199_icgraph" id="agroup__driver1_ga4e1e35610f25024b1bcd1d1868fc9199_icgraph">
<area shape="rect" title="Get current time (ms) since boot." alt="" coords="570,5,647,32"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="443,5,522,32"/>
<area shape="poly" title=" " alt="" coords="554,21,522,21,522,16,554,16"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="275,5,395,32"/>
<area shape="poly" title=" " alt="" coords="428,21,396,21,396,16,428,16"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="150,5,227,32"/>
<area shape="poly" title=" " alt="" coords="259,21,228,21,228,16,259,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga534563cee21f5728b958d0177c0b2fe3" name="ga534563cee21f5728b958d0177c0b2fe3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga534563cee21f5728b958d0177c0b2fe3">&#9670;&#160;</a></span>_select_down()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void _select_down </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move selection down (wrap 0→7) and refresh display if present. </p>
<p>"Down" decreases the row number: 7→6→…→0→7. Does not toggle any relays. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga534563cee21f5728b958d0177c0b2fe3_cgraph.png" border="0" usemap="#agroup__driver1_ga534563cee21f5728b958d0177c0b2fe3_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga534563cee21f5728b958d0177c0b2fe3_cgraph" id="agroup__driver1_ga534563cee21f5728b958d0177c0b2fe3_cgraph">
<area shape="rect" title="Move selection down (wrap 0→7) and refresh display if present." alt="" coords="5,5,107,32"/>
<area shape="rect" href="_p_d_u__display_8h.html#a6eb2efc8fb8f9a2cc5b505b9baf334a1" title="Updates the selection indicator (*) in the menu." alt="" coords="155,5,359,32"/>
<area shape="poly" title=" " alt="" coords="107,16,139,16,139,21,107,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga534563cee21f5728b958d0177c0b2fe3_icgraph.png" border="0" usemap="#agroup__driver1_ga534563cee21f5728b958d0177c0b2fe3_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga534563cee21f5728b958d0177c0b2fe3_icgraph" id="agroup__driver1_ga534563cee21f5728b958d0177c0b2fe3_icgraph">
<area shape="rect" title="Move selection down (wrap 0→7) and refresh display if present." alt="" coords="570,5,671,32"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="443,5,522,32"/>
<area shape="poly" title=" " alt="" coords="554,21,522,21,522,16,554,16"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="275,5,395,32"/>
<area shape="poly" title=" " alt="" coords="428,21,396,21,396,16,428,16"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="150,5,227,32"/>
<area shape="poly" title=" " alt="" coords="259,21,228,21,228,16,259,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga2dc72c9906c44cd43871b5ce0ad6845d" name="ga2dc72c9906c44cd43871b5ce0ad6845d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2dc72c9906c44cd43871b5ce0ad6845d">&#9670;&#160;</a></span>_select_up()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void _select_up </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move selection up (wrap 7→0) and refresh display if present. </p>
<p>"Up" increases the row number: 0→1→…→7→0. Does not toggle any relays. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga2dc72c9906c44cd43871b5ce0ad6845d_cgraph.png" border="0" usemap="#agroup__driver1_ga2dc72c9906c44cd43871b5ce0ad6845d_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga2dc72c9906c44cd43871b5ce0ad6845d_cgraph" id="agroup__driver1_ga2dc72c9906c44cd43871b5ce0ad6845d_cgraph">
<area shape="rect" title="Move selection up (wrap 7→0) and refresh display if present." alt="" coords="5,5,90,32"/>
<area shape="rect" href="_p_d_u__display_8h.html#a6eb2efc8fb8f9a2cc5b505b9baf334a1" title="Updates the selection indicator (*) in the menu." alt="" coords="138,5,342,32"/>
<area shape="poly" title=" " alt="" coords="90,16,122,16,122,21,90,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga2dc72c9906c44cd43871b5ce0ad6845d_icgraph.png" border="0" usemap="#agroup__driver1_ga2dc72c9906c44cd43871b5ce0ad6845d_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga2dc72c9906c44cd43871b5ce0ad6845d_icgraph" id="agroup__driver1_ga2dc72c9906c44cd43871b5ce0ad6845d_icgraph">
<area shape="rect" title="Move selection up (wrap 7→0) and refresh display if present." alt="" coords="570,5,654,32"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="443,5,522,32"/>
<area shape="poly" title=" " alt="" coords="554,21,522,21,522,16,554,16"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="275,5,395,32"/>
<area shape="poly" title=" " alt="" coords="428,21,396,21,396,16,428,16"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="150,5,227,32"/>
<area shape="poly" title=" " alt="" coords="259,21,228,21,228,16,259,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga6d0167c68ada9e8d950bd5e4968b401b" name="ga6d0167c68ada9e8d950bd5e4968b401b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d0167c68ada9e8d950bd5e4968b401b">&#9670;&#160;</a></span>_set_long_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void _set_long_action </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Execute SET long-press action: clear the error LED. </p>
<p>Resets FAULT_LED using <a class="el" href="group__driver5.html#ga1f2aea8f1cb5fb271e2b68ab119fa503" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole-port writes under a mutex to a...">mcp_display_write_pin()</a> and logs the action. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga6d0167c68ada9e8d950bd5e4968b401b_cgraph.png" border="0" usemap="#agroup__driver1_ga6d0167c68ada9e8d950bd5e4968b401b_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga6d0167c68ada9e8d950bd5e4968b401b_cgraph" id="agroup__driver1_ga6d0167c68ada9e8d950bd5e4968b401b_cgraph">
<area shape="rect" title="Execute SET long&#45;press action: clear the error LED." alt="" coords="5,132,125,159"/>
<area shape="rect" href="group__util2.html#gae73b9c33649b5f5f7388f1b4fe42d32d" title="Sets the error state on the display." alt="" coords="173,132,240,159"/>
<area shape="poly" title=" " alt="" coords="125,143,157,143,157,148,125,148"/>
<area shape="rect" href="group__driver5.html#ga1f2aea8f1cb5fb271e2b68ab119fa503" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="288,132,441,159"/>
<area shape="poly" title=" " alt="" coords="240,143,273,143,273,148,240,148"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="489,107,608,133"/>
<area shape="poly" title=" " alt="" coords="441,132,473,128,474,133,442,137"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="699,157,776,184"/>
<area shape="poly" title=" " alt="" coords="442,148,683,164,683,170,442,153"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="692,208,783,235"/>
<area shape="poly" title=" " alt="" coords="434,157,677,207,676,212,433,162"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="656,5,819,32"/>
<area shape="poly" title=" " alt="" coords="397,129,488,92,671,34,673,39,490,97,399,134"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="709,107,766,133"/>
<area shape="poly" title=" " alt="" coords="608,117,694,117,694,123,608,123"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="867,31,926,57"/>
<area shape="poly" title=" " alt="" coords="606,103,655,92,852,50,853,55,656,97,607,109"/>
<area shape="poly" title=" " alt="" coords="602,131,685,154,683,159,600,137"/>
<area shape="poly" title=" " alt="" coords="567,132,607,163,657,194,678,203,676,208,654,198,604,167,564,136"/>
<area shape="poly" title=" " alt="" coords="567,104,606,77,654,48,681,36,684,41,657,53,609,81,570,108"/>
<area shape="poly" title=" " alt="" coords="820,29,852,34,851,40,819,34"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga6d0167c68ada9e8d950bd5e4968b401b_icgraph.png" border="0" usemap="#agroup__driver1_ga6d0167c68ada9e8d950bd5e4968b401b_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga6d0167c68ada9e8d950bd5e4968b401b_icgraph" id="agroup__driver1_ga6d0167c68ada9e8d950bd5e4968b401b_icgraph">
<area shape="rect" title="Execute SET long&#45;press action: clear the error LED." alt="" coords="755,5,874,32"/>
<area shape="rect" href="group__driver1.html#gace7ec6486dde17b22e09394684f5684d" title="Alarm callback to fire the SET long&#45;press action at LONGPRESS_DT." alt="" coords="570,5,707,32"/>
<area shape="poly" title=" " alt="" coords="739,21,707,21,707,16,739,16"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="443,5,522,32"/>
<area shape="poly" title=" " alt="" coords="554,21,522,21,522,16,554,16"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="275,5,395,32"/>
<area shape="poly" title=" " alt="" coords="428,21,396,21,396,16,428,16"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="150,5,227,32"/>
<area shape="poly" title=" " alt="" coords="259,21,228,21,228,16,259,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="gace7ec6486dde17b22e09394684f5684d" name="gace7ec6486dde17b22e09394684f5684d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gace7ec6486dde17b22e09394684f5684d">&#9670;&#160;</a></span>_set_long_alarm_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t _set_long_alarm_cb </td>
          <td>(</td>
          <td class="paramtype">alarm_id_t</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>user_data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Alarm callback to fire the SET long-press action at LONGPRESS_DT. </p>
<ul>
<li>Runs exactly LONGPRESS_DT after a debounced FALL of SET.</li>
<li>If SET is still held and long not yet fired, performs long action and marks s_set.long_fired = true.</li>
<li>Always disarms itself (one-shot).</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Alarm id. </td></tr>
    <tr><td class="paramname">user_data</td><td>Unused. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 to prevent rescheduling. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_gace7ec6486dde17b22e09394684f5684d_cgraph.png" border="0" usemap="#agroup__driver1_gace7ec6486dde17b22e09394684f5684d_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_gace7ec6486dde17b22e09394684f5684d_cgraph" id="agroup__driver1_gace7ec6486dde17b22e09394684f5684d_cgraph">
<area shape="rect" title="Alarm callback to fire the SET long&#45;press action at LONGPRESS_DT." alt="" coords="5,132,143,159"/>
<area shape="rect" href="group__driver1.html#ga6d0167c68ada9e8d950bd5e4968b401b" title="Execute SET long&#45;press action: clear the error LED." alt="" coords="191,132,310,159"/>
<area shape="poly" title=" " alt="" coords="143,143,175,143,175,148,143,148"/>
<area shape="rect" href="group__util2.html#gae73b9c33649b5f5f7388f1b4fe42d32d" title="Sets the error state on the display." alt="" coords="358,132,425,159"/>
<area shape="poly" title=" " alt="" coords="310,143,343,143,343,148,310,148"/>
<area shape="rect" href="group__driver5.html#ga1f2aea8f1cb5fb271e2b68ab119fa503" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="473,132,627,159"/>
<area shape="poly" title=" " alt="" coords="426,143,458,143,458,148,426,148"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="675,107,793,133"/>
<area shape="poly" title=" " alt="" coords="627,132,659,128,659,133,627,137"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="884,157,961,184"/>
<area shape="poly" title=" " alt="" coords="627,148,869,164,868,170,627,153"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="877,208,968,235"/>
<area shape="poly" title=" " alt="" coords="620,157,862,207,861,212,619,162"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="841,5,1004,32"/>
<area shape="poly" title=" " alt="" coords="582,129,674,92,856,34,858,39,676,97,584,134"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="894,107,951,133"/>
<area shape="poly" title=" " alt="" coords="794,117,879,117,879,123,794,123"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="1052,31,1112,57"/>
<area shape="poly" title=" " alt="" coords="792,103,840,92,1037,50,1038,55,842,97,793,109"/>
<area shape="poly" title=" " alt="" coords="787,131,870,154,868,159,786,137"/>
<area shape="poly" title=" " alt="" coords="753,132,792,163,842,194,864,203,861,208,840,198,789,167,749,136"/>
<area shape="poly" title=" " alt="" coords="752,104,792,77,840,48,867,36,869,41,842,53,795,81,755,108"/>
<area shape="poly" title=" " alt="" coords="1005,29,1037,34,1036,40,1004,34"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_gace7ec6486dde17b22e09394684f5684d_icgraph.png" border="0" usemap="#agroup__driver1_gace7ec6486dde17b22e09394684f5684d_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_gace7ec6486dde17b22e09394684f5684d_icgraph" id="agroup__driver1_gace7ec6486dde17b22e09394684f5684d_icgraph">
<area shape="rect" title="Alarm callback to fire the SET long&#45;press action at LONGPRESS_DT." alt="" coords="570,5,707,32"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="443,5,522,32"/>
<area shape="poly" title=" " alt="" coords="554,21,522,21,522,16,554,16"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="275,5,395,32"/>
<area shape="poly" title=" " alt="" coords="428,21,396,21,396,16,428,16"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="150,5,227,32"/>
<area shape="poly" title=" " alt="" coords="259,21,228,21,228,16,259,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga81a3ea6eb9a8a16aa49da9543e4f3bd4" name="ga81a3ea6eb9a8a16aa49da9543e4f3bd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81a3ea6eb9a8a16aa49da9543e4f3bd4">&#9670;&#160;</a></span>_set_short_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void _set_short_action </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Execute SET short-press action: toggle the selected relay. </p>
<p>Reads current relay state, toggles via <a class="el" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging.">set_relay_state_with_tag()</a>, logs changes, and warns if dual asymmetry is detected/persisting. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga81a3ea6eb9a8a16aa49da9543e4f3bd4_cgraph.png" border="0" usemap="#agroup__driver1_ga81a3ea6eb9a8a16aa49da9543e4f3bd4_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga81a3ea6eb9a8a16aa49da9543e4f3bd4_cgraph" id="agroup__driver1_ga81a3ea6eb9a8a16aa49da9543e4f3bd4_cgraph">
<area shape="rect" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="5,404,130,431"/>
<area shape="rect" href="group__driver6.html#ga65d23685098ebf6b4f8bca89409a90ab" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="392,404,580,431"/>
<area shape="poly" title=" " alt="" coords="130,415,376,415,376,420,130,420"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="636,455,774,481"/>
<area shape="poly" title=" " alt="" coords="130,420,621,459,621,464,130,425"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="178,328,344,355"/>
<area shape="poly" title=" " alt="" coords="103,401,210,358,212,363,105,406"/>
<area shape="rect" href="group__driver5.html#gab5dab0ee57bf9b5391fbf6b96be35677" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="630,215,780,241"/>
<area shape="poly" title=" " alt="" coords="504,401,579,339,676,250,680,254,582,343,507,405"/>
<area shape="poly" title=" " alt="" coords="548,429,630,448,629,453,547,434"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="1050,233,1106,260"/>
<area shape="poly" title=" " alt="" coords="781,233,830,237,1034,244,1034,249,830,243,780,239"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="830,107,948,133"/>
<area shape="poly" title=" " alt="" coords="728,212,850,139,853,144,731,216"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="1039,157,1116,184"/>
<area shape="poly" title=" " alt="" coords="780,214,1024,176,1024,181,781,219"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="1032,56,1123,83"/>
<area shape="poly" title=" " alt="" coords="717,213,828,92,876,75,925,65,973,61,1016,61,1016,67,974,66,926,70,877,80,831,97,721,216"/>
<area shape="poly" title=" " alt="" coords="910,132,997,194,1042,223,1039,227,995,198,907,136"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="1207,56,1267,83"/>
<area shape="poly" title=" " alt="" coords="948,116,1047,109,1159,92,1192,83,1193,88,1160,97,1048,114,949,121"/>
<area shape="poly" title=" " alt="" coords="942,131,1025,154,1023,159,941,137"/>
<area shape="poly" title=" " alt="" coords="941,103,1016,83,1018,88,942,109"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="996,5,1159,32"/>
<area shape="poly" title=" " alt="" coords="904,104,944,73,995,42,1009,35,1011,40,997,46,947,77,908,108"/>
<area shape="poly" title=" " alt="" coords="1124,30,1160,41,1193,52,1191,57,1159,47,1123,35"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="1050,588,1106,615"/>
<area shape="poly" title=" " alt="" coords="722,480,768,519,798,539,831,556,884,574,939,586,1034,597,1034,603,938,592,882,579,829,561,796,544,765,523,719,484"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="1039,411,1116,437"/>
<area shape="poly" title=" " alt="" coords="774,455,829,447,1023,426,1024,431,830,452,774,460"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="836,461,942,488"/>
<area shape="poly" title=" " alt="" coords="774,468,820,470,820,475,774,473"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="1032,512,1123,539"/>
<area shape="poly" title=" " alt="" coords="724,480,770,513,799,529,830,541,878,550,927,551,975,546,1016,539,1017,544,975,551,928,556,878,555,829,547,797,534,767,517,721,484"/>
<area shape="poly" title=" " alt="" coords="910,486,997,548,1042,577,1039,582,995,553,907,491"/>
<area shape="poly" title=" " alt="" coords="941,458,1023,436,1025,441,942,463"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="1207,411,1267,437"/>
<area shape="poly" title=" " alt="" coords="942,471,1043,464,1159,447,1192,438,1193,443,1160,452,1043,469,942,476"/>
<area shape="poly" title=" " alt="" coords="942,486,1018,507,1016,512,941,491"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="996,360,1159,387"/>
<area shape="poly" title=" " alt="" coords="904,459,944,428,995,396,1009,390,1011,395,997,401,947,432,908,463"/>
<area shape="poly" title=" " alt="" coords="1124,385,1160,396,1193,407,1191,412,1159,401,1123,390"/>
<area shape="poly" title=" " alt="" coords="292,325,391,288,507,259,614,239,615,244,508,265,393,293,294,330"/>
<area shape="poly" title=" " alt="" coords="345,343,459,357,521,371,581,390,633,415,676,443,673,448,630,419,579,394,520,376,458,363,344,348"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="418,303,554,329"/>
<area shape="poly" title=" " alt="" coords="344,329,402,323,403,328,345,335"/>
<area shape="rect" href="group__driver5.html#ga1f2aea8f1cb5fb271e2b68ab119fa503" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="628,107,782,133"/>
<area shape="poly" title=" " alt="" coords="501,300,676,141,680,145,504,304"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="635,360,775,387"/>
<area shape="poly" title=" " alt="" coords="541,327,637,353,636,358,539,332"/>
<area shape="poly" title=" " alt="" coords="782,117,814,117,814,123,782,123"/>
<area shape="poly" title=" " alt="" coords="769,131,830,143,933,156,1024,164,1023,169,932,161,829,148,768,137"/>
<area shape="poly" title=" " alt="" coords="722,104,769,74,798,59,829,48,878,40,928,40,975,44,1017,51,1016,57,974,49,927,45,878,45,830,53,800,64,771,78,725,108"/>
<area shape="poly" title=" " alt="" coords="717,104,763,63,794,42,829,26,866,15,905,9,981,7,981,12,906,14,868,20,831,30,797,46,766,67,721,108"/>
<area shape="poly" title=" " alt="" coords="776,380,1024,414,1023,419,775,385"/>
<area shape="poly" title=" " alt="" coords="732,385,851,451,848,456,730,390"/>
<area shape="poly" title=" " alt="" coords="724,385,784,441,797,458,805,473,815,486,831,498,877,516,926,526,973,529,1016,529,1017,534,973,535,925,531,875,521,828,502,811,490,801,476,792,461,780,444,721,389"/>
<area shape="poly" title=" " alt="" coords="775,358,829,352,889,349,948,352,980,355,980,360,948,357,889,354,830,357,776,364"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga81a3ea6eb9a8a16aa49da9543e4f3bd4_icgraph.png" border="0" usemap="#agroup__driver1_ga81a3ea6eb9a8a16aa49da9543e4f3bd4_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga81a3ea6eb9a8a16aa49da9543e4f3bd4_icgraph" id="agroup__driver1_ga81a3ea6eb9a8a16aa49da9543e4f3bd4_icgraph">
<area shape="rect" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="570,5,694,32"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="443,5,522,32"/>
<area shape="poly" title=" " alt="" coords="554,21,522,21,522,16,554,16"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="275,5,395,32"/>
<area shape="poly" title=" " alt="" coords="428,21,396,21,396,16,428,16"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="150,5,227,32"/>
<area shape="poly" title=" " alt="" coords="259,21,228,21,228,16,259,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="gafe4a02607f51e32cc4fa90e8e2478c66" name="gafe4a02607f51e32cc4fa90e8e2478c66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe4a02607f51e32cc4fa90e8e2478c66">&#9670;&#160;</a></span>_since()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool _since </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>now</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>then</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>win</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if <code class="param">now</code> - <code class="param">then</code> &gt;= <code class="param">win</code> (ms). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">now</td><td>Current timestamp in ms. </td></tr>
    <tr><td class="paramname">then</td><td>Earlier timestamp in ms. </td></tr>
    <tr><td class="paramname">win</td><td>Required elapsed window in ms. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if elapsed &gt;= win, else false. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_gafe4a02607f51e32cc4fa90e8e2478c66_icgraph.png" border="0" usemap="#agroup__driver1_gafe4a02607f51e32cc4fa90e8e2478c66_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_gafe4a02607f51e32cc4fa90e8e2478c66_icgraph" id="agroup__driver1_gafe4a02607f51e32cc4fa90e8e2478c66_icgraph">
<area shape="rect" title="Check if now &#45; then &gt;= win (ms)." alt="" coords="570,5,629,32"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="443,5,522,32"/>
<area shape="poly" title=" " alt="" coords="554,21,522,21,522,16,554,16"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="275,5,395,32"/>
<area shape="poly" title=" " alt="" coords="428,21,396,21,396,16,428,16"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="150,5,227,32"/>
<area shape="poly" title=" " alt="" coords="259,21,228,21,228,16,259,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga71b68eb02e1df1dada387c9fbb7bbb37" name="ga71b68eb02e1df1dada387c9fbb7bbb37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga71b68eb02e1df1dada387c9fbb7bbb37">&#9670;&#160;</a></span>button_driver_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void button_driver_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize button GPIO interrupts and synchronize UI selection. </p>
<ul>
<li>Registers a single shared ISR (button_isr) for PLUS, MINUS, and SET.</li>
<li>Enables both edges for all buttons (we act on FALL for +/-; SET uses both).</li>
<li>Normalizes selected_row to [0,7] and updates the display if present.</li>
<li>Ensures SET long-press alarm is disarmed at startup. </li>
</ul>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga71b68eb02e1df1dada387c9fbb7bbb37_cgraph.png" border="0" usemap="#agroup__driver1_ga71b68eb02e1df1dada387c9fbb7bbb37_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga71b68eb02e1df1dada387c9fbb7bbb37_cgraph" id="agroup__driver1_ga71b68eb02e1df1dada387c9fbb7bbb37_cgraph">
<area shape="rect" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="5,284,126,311"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="174,335,252,361"/>
<area shape="poly" title=" " alt="" coords="108,309,160,327,158,332,106,314"/>
<area shape="rect" href="_p_d_u__display_8h.html#a6eb2efc8fb8f9a2cc5b505b9baf334a1" title="Updates the selection indicator (*) in the menu." alt="" coords="485,284,690,311"/>
<area shape="poly" title=" " alt="" coords="126,285,268,270,353,266,438,269,504,278,504,283,437,275,353,272,268,275,126,290"/>
<area shape="rect" href="group__driver1.html#ga4e1e35610f25024b1bcd1d1868fc9199" title="Get current time (ms) since boot." alt="" coords="330,385,407,412"/>
<area shape="poly" title=" " alt="" coords="253,358,316,379,314,384,252,363"/>
<area shape="rect" href="group__driver1.html#ga534563cee21f5728b958d0177c0b2fe3" title="Move selection down (wrap 0→7) and refresh display if present." alt="" coords="318,284,419,311"/>
<area shape="poly" title=" " alt="" coords="252,333,310,313,312,319,253,338"/>
<area shape="rect" href="group__driver1.html#ga2dc72c9906c44cd43871b5ce0ad6845d" title="Move selection up (wrap 7→0) and refresh display if present." alt="" coords="326,436,411,463"/>
<area shape="poly" title=" " alt="" coords="228,360,260,390,301,422,314,428,311,433,299,426,256,394,224,363"/>
<area shape="rect" href="group__driver1.html#gace7ec6486dde17b22e09394684f5684d" title="Alarm callback to fire the SET long&#45;press action at LONGPRESS_DT." alt="" coords="300,487,437,513"/>
<area shape="poly" title=" " alt="" coords="222,361,252,415,274,446,302,473,307,476,304,481,298,477,270,449,247,418,218,363"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="306,183,431,209"/>
<area shape="poly" title=" " alt="" coords="226,333,341,219,345,222,230,336"/>
<area shape="rect" href="group__driver1.html#gafe4a02607f51e32cc4fa90e8e2478c66" title="Check if now &#45; then &gt;= win (ms)." alt="" coords="339,335,398,361"/>
<area shape="poly" title=" " alt="" coords="252,345,324,345,324,351,252,351"/>
<area shape="poly" title=" " alt="" coords="420,295,470,295,470,300,420,300"/>
<area shape="poly" title=" " alt="" coords="410,434,436,422,472,398,506,371,561,320,564,324,510,375,475,402,439,426,412,439"/>
<area shape="rect" href="group__driver1.html#ga6d0167c68ada9e8d950bd5e4968b401b" title="Execute SET long&#45;press action: clear the error LED." alt="" coords="528,487,647,513"/>
<area shape="poly" title=" " alt="" coords="438,497,512,497,512,503,438,503"/>
<area shape="rect" href="group__util2.html#gae73b9c33649b5f5f7388f1b4fe42d32d" title="Sets the error state on the display." alt="" coords="798,487,866,513"/>
<area shape="poly" title=" " alt="" coords="647,497,783,497,783,503,647,503"/>
<area shape="rect" href="group__driver5.html#ga1f2aea8f1cb5fb271e2b68ab119fa503" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="974,487,1127,513"/>
<area shape="poly" title=" " alt="" coords="866,497,958,497,958,503,866,503"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="1175,487,1294,513"/>
<area shape="poly" title=" " alt="" coords="1128,497,1160,497,1160,503,1128,503"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="1385,537,1462,564"/>
<area shape="poly" title=" " alt="" coords="1071,512,1117,542,1146,556,1176,567,1226,575,1278,575,1327,570,1369,562,1370,567,1327,575,1278,580,1226,580,1175,572,1144,561,1114,546,1068,516"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="1378,436,1469,463"/>
<area shape="poly" title=" " alt="" coords="1113,483,1175,472,1362,451,1363,456,1176,477,1114,489"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="1342,588,1505,615"/>
<area shape="poly" title=" " alt="" coords="1068,512,1114,548,1144,567,1176,581,1213,592,1252,598,1326,603,1326,609,1251,604,1212,597,1174,587,1142,572,1111,553,1065,516"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="1395,360,1452,387"/>
<area shape="poly" title=" " alt="" coords="1253,484,1340,422,1385,393,1388,397,1343,426,1256,488"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="1553,537,1612,564"/>
<area shape="poly" title=" " alt="" coords="1294,499,1394,506,1506,523,1539,532,1537,537,1504,528,1393,511,1294,504"/>
<area shape="poly" title=" " alt="" coords="1288,511,1371,534,1369,539,1286,517"/>
<area shape="poly" title=" " alt="" coords="1286,483,1362,463,1363,468,1288,489"/>
<area shape="poly" title=" " alt="" coords="1253,512,1293,543,1343,574,1356,580,1354,585,1340,578,1290,547,1250,516"/>
<area shape="poly" title=" " alt="" coords="1469,585,1504,573,1537,563,1539,568,1506,579,1470,590"/>
<area shape="rect" href="group__driver6.html#ga65d23685098ebf6b4f8bca89409a90ab" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="738,183,926,209"/>
<area shape="poly" title=" " alt="" coords="431,193,722,193,722,199,431,199"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="982,132,1119,159"/>
<area shape="poly" title=" " alt="" coords="431,182,485,175,748,154,966,145,966,150,748,159,486,180,432,187"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="504,233,671,260"/>
<area shape="poly" title=" " alt="" coords="430,207,513,227,512,232,429,213"/>
<area shape="rect" href="group__driver5.html#gab5dab0ee57bf9b5391fbf6b96be35677" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="976,373,1126,400"/>
<area shape="poly" title=" " alt="" coords="853,208,928,270,1026,361,1023,364,924,274,849,212"/>
<area shape="poly" title=" " alt="" coords="892,179,975,160,976,165,893,185"/>
<area shape="poly" title=" " alt="" coords="1076,398,1200,476,1197,480,1073,403"/>
<area shape="poly" title=" " alt="" coords="1126,380,1175,377,1379,371,1379,377,1175,383,1126,385"/>
<area shape="poly" title=" " alt="" coords="1066,399,1130,473,1177,523,1225,541,1276,551,1325,554,1369,553,1369,559,1325,559,1275,556,1223,546,1174,528,1126,476,1062,402"/>
<area shape="poly" title=" " alt="" coords="1127,397,1363,437,1362,442,1126,402"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="1395,5,1452,32"/>
<area shape="poly" title=" " alt="" coords="1064,129,1110,89,1141,68,1174,51,1228,34,1283,23,1379,16,1380,21,1284,28,1229,39,1176,56,1144,73,1113,94,1067,133"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="1385,183,1462,209"/>
<area shape="poly" title=" " alt="" coords="1114,157,1176,168,1279,181,1369,189,1369,195,1278,186,1175,173,1113,162"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="1182,132,1287,159"/>
<area shape="poly" title=" " alt="" coords="1120,143,1166,143,1166,148,1120,148"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="1378,81,1469,108"/>
<area shape="poly" title=" " alt="" coords="1068,129,1114,99,1144,84,1175,73,1223,66,1273,65,1321,69,1363,77,1362,82,1320,75,1273,70,1224,71,1176,79,1146,89,1117,104,1071,134"/>
<area shape="poly" title=" " alt="" coords="1253,129,1340,67,1385,38,1388,43,1343,72,1256,134"/>
<area shape="poly" title=" " alt="" coords="1288,157,1371,179,1369,184,1286,162"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="1553,183,1612,209"/>
<area shape="poly" title=" " alt="" coords="1288,144,1389,151,1506,168,1539,177,1537,182,1504,173,1388,156,1287,149"/>
<area shape="poly" title=" " alt="" coords="1286,129,1362,108,1363,113,1288,134"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="1342,233,1505,260"/>
<area shape="poly" title=" " alt="" coords="1253,157,1293,188,1343,219,1356,225,1354,230,1340,224,1290,192,1250,161"/>
<area shape="poly" title=" " alt="" coords="1469,230,1504,219,1537,208,1539,213,1506,224,1470,235"/>
<area shape="poly" title=" " alt="" coords="666,258,691,270,707,283,716,296,724,309,739,320,793,345,851,362,908,373,960,380,960,385,907,379,849,367,791,350,736,325,721,312,711,299,703,286,688,274,663,263"/>
<area shape="poly" title=" " alt="" coords="671,249,729,248,793,244,860,235,925,219,976,195,1019,166,1022,171,979,200,927,224,861,240,794,250,729,254,671,254"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="764,284,900,311"/>
<area shape="poly" title=" " alt="" coords="656,258,750,278,749,283,655,263"/>
<area shape="poly" title=" " alt="" coords="850,309,1026,474,1022,478,846,313"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="980,233,1121,260"/>
<area shape="poly" title=" " alt="" coords="892,281,975,261,976,267,893,286"/>
<area shape="poly" title=" " alt="" coords="1121,235,1369,201,1369,206,1122,240"/>
<area shape="poly" title=" " alt="" coords="1076,230,1194,164,1197,169,1078,235"/>
<area shape="poly" title=" " alt="" coords="1064,231,1125,169,1147,140,1157,129,1174,118,1221,100,1271,91,1319,87,1362,87,1362,92,1319,92,1271,96,1223,105,1177,122,1161,133,1151,144,1129,172,1068,235"/>
<area shape="poly" title=" " alt="" coords="1121,256,1176,263,1234,266,1293,263,1326,260,1326,265,1294,268,1234,271,1175,268,1121,262"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga71b68eb02e1df1dada387c9fbb7bbb37_icgraph.png" border="0" usemap="#agroup__driver1_ga71b68eb02e1df1dada387c9fbb7bbb37_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga71b68eb02e1df1dada387c9fbb7bbb37_icgraph" id="agroup__driver1_ga71b68eb02e1df1dada387c9fbb7bbb37_icgraph">
<area shape="rect" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="275,5,395,32"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="150,5,227,32"/>
<area shape="poly" title=" " alt="" coords="259,21,228,21,228,16,259,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga60c16d2b5323dc486ad6208a244ed7ae" name="ga60c16d2b5323dc486ad6208a244ed7ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga60c16d2b5323dc486ad6208a244ed7ae">&#9670;&#160;</a></span>button_isr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void button_isr </td>
          <td>(</td>
          <td class="paramtype">uint</td>          <td class="paramname"><span class="paramname"><em>gpio</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>events</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons. </p>
<p>Unified GPIO interrupt handler for PLUS, MINUS, and SET.</p>
<ul>
<li>PLUS/MINUS: act on debounced FALL, with post-action guard (POST_GUARD_MS). RISE updates only the last_edge_ms timestamp.</li>
<li>SET: FALL latches press start, arms a one-shot alarm for LONGPRESS_DT. The long action fires at the alarm time if still held. RISE performs short action only if long hasn't already fired and duration exceeded debounce.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gpio</td><td>GPIO that triggered the interrupt (BUT_PLUS / BUT_MINUS / BUT_SET). </td></tr>
    <tr><td class="paramname">events</td><td>GPIO_IRQ_EDGE_FALL and/or GPIO_IRQ_EDGE_RISE. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga60c16d2b5323dc486ad6208a244ed7ae_cgraph.png" border="0" usemap="#agroup__driver1_ga60c16d2b5323dc486ad6208a244ed7ae_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga60c16d2b5323dc486ad6208a244ed7ae_cgraph" id="agroup__driver1_ga60c16d2b5323dc486ad6208a244ed7ae_cgraph">
<area shape="rect" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="5,208,84,235"/>
<area shape="rect" href="group__driver1.html#ga4e1e35610f25024b1bcd1d1868fc9199" title="Get current time (ms) since boot." alt="" coords="162,81,239,108"/>
<area shape="poly" title=" " alt="" coords="52,206,83,163,105,139,130,118,146,109,149,113,133,122,109,143,87,167,56,209"/>
<area shape="rect" href="group__driver1.html#ga534563cee21f5728b958d0177c0b2fe3" title="Move selection down (wrap 0→7) and refresh display if present." alt="" coords="150,132,251,159"/>
<area shape="poly" title=" " alt="" coords="66,205,130,168,143,162,146,167,133,173,68,210"/>
<area shape="rect" href="group__driver1.html#ga2dc72c9906c44cd43871b5ce0ad6845d" title="Move selection up (wrap 7→0) and refresh display if present." alt="" coords="158,183,242,209"/>
<area shape="poly" title=" " alt="" coords="84,212,143,203,144,208,85,218"/>
<area shape="rect" href="group__driver1.html#gace7ec6486dde17b22e09394684f5684d" title="Alarm callback to fire the SET long&#45;press action at LONGPRESS_DT." alt="" coords="132,284,269,311"/>
<area shape="poly" title=" " alt="" coords="68,233,133,270,146,275,143,280,130,274,66,238"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="138,233,262,260"/>
<area shape="poly" title=" " alt="" coords="85,225,123,231,122,237,84,230"/>
<area shape="rect" href="group__driver1.html#gafe4a02607f51e32cc4fa90e8e2478c66" title="Check if now &#45; then &gt;= win (ms)." alt="" coords="171,335,230,361"/>
<area shape="poly" title=" " alt="" coords="56,234,87,276,109,300,133,320,158,333,155,338,130,325,105,304,83,279,52,237"/>
<area shape="rect" href="_p_d_u__display_8h.html#a6eb2efc8fb8f9a2cc5b505b9baf334a1" title="Updates the selection indicator (*) in the menu." alt="" coords="317,132,521,159"/>
<area shape="poly" title=" " alt="" coords="251,143,302,143,302,148,251,148"/>
<area shape="poly" title=" " alt="" coords="242,184,343,160,344,165,243,189"/>
<area shape="rect" href="group__driver1.html#ga6d0167c68ada9e8d950bd5e4968b401b" title="Execute SET long&#45;press action: clear the error LED." alt="" coords="360,411,479,437"/>
<area shape="poly" title=" " alt="" coords="244,309,270,320,336,360,390,399,387,403,333,364,268,325,242,314"/>
<area shape="rect" href="group__util2.html#gae73b9c33649b5f5f7388f1b4fe42d32d" title="Sets the error state on the display." alt="" coords="630,461,697,488"/>
<area shape="poly" title=" " alt="" coords="480,434,615,462,614,467,478,439"/>
<area shape="rect" href="group__driver5.html#ga1f2aea8f1cb5fb271e2b68ab119fa503" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="806,475,959,501"/>
<area shape="poly" title=" " alt="" coords="698,474,790,480,790,485,698,479"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="1007,487,1125,513"/>
<area shape="poly" title=" " alt="" coords="960,490,992,492,991,498,959,496"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="1216,385,1294,412"/>
<area shape="poly" title=" " alt="" coords="941,471,1201,409,1202,414,942,477"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="1209,537,1301,564"/>
<area shape="poly" title=" " alt="" coords="900,500,946,536,976,554,1008,567,1056,576,1105,577,1152,572,1194,564,1195,570,1153,577,1105,582,1055,581,1006,572,973,558,943,540,896,504"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="1173,588,1337,615"/>
<area shape="poly" title=" " alt="" coords="898,500,943,543,974,565,1008,583,1045,594,1083,601,1158,606,1158,611,1082,606,1043,599,1006,588,971,570,939,547,894,504"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="1227,436,1283,463"/>
<area shape="poly" title=" " alt="" coords="1118,483,1211,458,1213,463,1120,489"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="1385,537,1444,564"/>
<area shape="poly" title=" " alt="" coords="1126,499,1225,506,1337,523,1370,532,1369,537,1336,528,1225,511,1126,504"/>
<area shape="poly" title=" " alt="" coords="1094,484,1124,466,1147,443,1172,422,1200,409,1203,414,1175,426,1151,447,1127,470,1097,489"/>
<area shape="poly" title=" " alt="" coords="1120,511,1195,532,1194,537,1118,517"/>
<area shape="poly" title=" " alt="" coords="1085,512,1124,543,1175,574,1188,580,1186,585,1172,578,1121,547,1082,516"/>
<area shape="poly" title=" " alt="" coords="1300,585,1336,573,1369,563,1370,568,1337,579,1302,590"/>
<area shape="rect" href="group__driver6.html#ga65d23685098ebf6b4f8bca89409a90ab" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="569,233,758,260"/>
<area shape="poly" title=" " alt="" coords="263,244,554,244,554,249,263,249"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="814,183,951,209"/>
<area shape="poly" title=" " alt="" coords="263,233,317,225,580,205,798,195,798,201,580,210,317,231,264,238"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="336,309,502,336"/>
<area shape="poly" title=" " alt="" coords="242,258,365,301,363,306,240,263"/>
<area shape="rect" href="group__driver5.html#gab5dab0ee57bf9b5391fbf6b96be35677" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="807,385,958,412"/>
<area shape="poly" title=" " alt="" coords="686,258,851,374,848,379,683,263"/>
<area shape="poly" title=" " alt="" coords="724,230,806,211,808,216,725,235"/>
<area shape="poly" title=" " alt="" coords="910,410,1028,477,1026,481,907,415"/>
<area shape="poly" title=" " alt="" coords="958,406,1212,441,1211,446,958,412"/>
<area shape="poly" title=" " alt="" coords="958,383,1007,377,1066,374,1126,377,1202,387,1201,392,1125,383,1066,380,1007,383,958,388"/>
<area shape="poly" title=" " alt="" coords="904,410,961,461,975,479,983,496,992,510,1008,523,1054,542,1103,552,1151,555,1194,555,1194,560,1151,561,1102,557,1052,547,1006,528,988,514,978,498,970,482,957,464,900,414"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="1227,5,1283,32"/>
<area shape="poly" title=" " alt="" coords="888,181,905,152,931,115,965,78,1006,48,1058,27,1114,16,1166,12,1211,13,1211,18,1167,18,1114,22,1060,33,1008,53,968,82,935,119,910,155,893,184"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="1216,81,1294,108"/>
<area shape="poly" title=" " alt="" coords="890,180,934,125,967,96,1006,74,1056,61,1109,59,1159,65,1202,75,1201,80,1158,70,1108,65,1057,66,1008,78,971,100,938,129,895,184"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="1014,132,1119,159"/>
<area shape="poly" title=" " alt="" coords="933,179,1000,161,1001,166,934,185"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="1209,183,1301,209"/>
<area shape="poly" title=" " alt="" coords="952,193,1194,193,1194,199,952,199"/>
<area shape="poly" title=" " alt="" coords="1084,129,1172,67,1217,38,1220,43,1175,72,1088,134"/>
<area shape="poly" title=" " alt="" coords="1118,129,1201,106,1202,111,1120,134"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="1385,183,1444,209"/>
<area shape="poly" title=" " alt="" coords="1119,144,1221,151,1337,168,1370,177,1369,182,1336,173,1220,156,1119,149"/>
<area shape="poly" title=" " alt="" coords="1120,157,1195,177,1194,182,1118,162"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="1173,233,1337,260"/>
<area shape="poly" title=" " alt="" coords="1085,157,1124,188,1175,219,1188,225,1186,230,1172,224,1121,192,1082,161"/>
<area shape="poly" title=" " alt="" coords="1300,230,1336,219,1369,208,1370,213,1337,224,1302,235"/>
<area shape="poly" title=" " alt="" coords="454,334,508,354,570,371,685,387,792,395,791,400,684,393,569,376,506,359,453,339"/>
<area shape="poly" title=" " alt="" coords="503,322,561,319,627,311,693,295,756,270,771,259,780,246,789,233,804,219,813,214,816,219,807,224,793,236,784,249,775,262,759,274,695,300,627,316,562,325,503,328"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="595,335,732,361"/>
<area shape="poly" title=" " alt="" coords="503,329,580,337,580,342,503,334"/>
<area shape="poly" title=" " alt="" coords="688,360,848,464,845,468,685,364"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="812,233,952,260"/>
<area shape="poly" title=" " alt="" coords="709,332,757,314,845,266,848,271,759,318,711,337"/>
<area shape="poly" title=" " alt="" coords="940,231,957,219,968,207,974,195,979,168,985,142,993,130,1005,118,1028,104,1053,94,1105,83,1156,81,1201,83,1201,89,1156,86,1105,88,1054,99,1031,109,1009,122,997,133,990,144,984,170,979,196,972,210,961,223,943,235"/>
<area shape="poly" title=" " alt="" coords="931,230,958,219,1000,193,1036,166,1039,171,1003,198,960,224,933,235"/>
<area shape="poly" title=" " alt="" coords="952,235,1193,202,1194,207,953,240"/>
<area shape="poly" title=" " alt="" coords="953,256,1007,263,1066,266,1125,263,1157,260,1158,265,1126,268,1066,271,1007,268,952,262"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver1_ga60c16d2b5323dc486ad6208a244ed7ae_icgraph.png" border="0" usemap="#agroup__driver1_ga60c16d2b5323dc486ad6208a244ed7ae_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver1_ga60c16d2b5323dc486ad6208a244ed7ae_icgraph" id="agroup__driver1_ga60c16d2b5323dc486ad6208a244ed7ae_icgraph">
<area shape="rect" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="443,5,522,32"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="275,5,395,32"/>
<area shape="poly" title=" " alt="" coords="428,21,396,21,396,16,428,16"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="150,5,227,32"/>
<area shape="poly" title=" " alt="" coords="259,21,228,21,228,16,259,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="ga42edf6d6c7a2844cfdcca26ee15f6812" name="ga42edf6d6c7a2844cfdcca26ee15f6812"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga42edf6d6c7a2844cfdcca26ee15f6812">&#9670;&#160;</a></span>last_press_time</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint32_t last_press_time = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timestamp (ms) of the last <em>press</em> (FALL) observed for any button. </p>
<p>Timestamp (ms) of the last <em>press</em> edge observed for any button.</p>
<p>Defined here, declared in header. Updated on debounced FALL events. </p>

</div>
</div>
<a id="ga47af9f4bebafcd4a466989321f4f0ac7" name="ga47af9f4bebafcd4a466989321f4f0ac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga47af9f4bebafcd4a466989321f4f0ac7">&#9670;&#160;</a></span>s_minus</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbtn__edge__t.html">btn_edge_t</a> s_minus = {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>MINUS timing state (fall-only action). </p>

</div>
</div>
<a id="ga96f1c70b6ce8d319ac9b28ecb447c3c0" name="ga96f1c70b6ce8d319ac9b28ecb447c3c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga96f1c70b6ce8d319ac9b28ecb447c3c0">&#9670;&#160;</a></span>s_plus</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbtn__edge__t.html">btn_edge_t</a> s_plus = {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PLUS timing state (fall-only action). </p>

</div>
</div>
<a id="gaea879d6b9e3fa7c47da8007c011988b3" name="gaea879d6b9e3fa7c47da8007c011988b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea879d6b9e3fa7c47da8007c011988b3">&#9670;&#160;</a></span>s_set</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbtn__set__t.html">btn_set_t</a> s_set = {.long_alarm_id = -1}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SET press/release + long-press timing state. </p>

</div>
</div>
<a id="ga7d8fcb712bc5d9f4a723a2671f5eb9c9" name="ga7d8fcb712bc5d9f4a723a2671f5eb9c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d8fcb712bc5d9f4a723a2671f5eb9c9">&#9670;&#160;</a></span>selected_row</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t selected_row = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Currently selected row (0–7) mapping to relay channels 1–8. </p>
<p>Defined here, declared in header. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>

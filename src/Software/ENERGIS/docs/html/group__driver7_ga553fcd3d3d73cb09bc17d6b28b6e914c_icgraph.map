<map id="mcp_relay_write_pin" name="mcp_relay_write_pin">
<area shape="rect" id="Node000001" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="1310,363,1450,389"/>
<area shape="rect" id="Node000002" href="$group__driver3.html#gac1bd84c5a254283faacc776489f36625" title="Initialize the HLW8032 power measurement interface." alt="" coords="1147,152,1240,179"/>
<area shape="poly" id="edge1_Node000001_Node000002" title=" " alt="" coords="1355,353,1205,181,1209,177,1359,349"/>
<area shape="rect" id="Node000005" href="$group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="1125,363,1262,389"/>
<area shape="poly" id="edge4_Node000001_Node000005" title=" " alt="" coords="1294,379,1262,379,1262,373,1294,373"/>
<area shape="rect" id="Node000028" href="$group__driver3.html#ga317577d37ad844a15b55a8f5e55126f3" title="Select a channel on the multiplexer." alt="" coords="1149,603,1238,629"/>
<area shape="poly" id="edge30_Node000001_Node000028" title=" " alt="" coords="1361,404,1208,604,1203,600,1356,400"/>
<area shape="rect" id="Node000003" href="$group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="177,43,254,69"/>
<area shape="poly" id="edge2_Node000002_Node000003" title=" " alt="" coords="1159,145,1093,105,1002,60,950,40,896,23,840,12,784,8,584,8,456,14,329,33,255,49,254,44,329,28,456,9,584,3,784,3,841,7,897,18,952,35,1004,55,1095,101,1161,141"/>
<area shape="rect" id="Node000004" href="$group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,413,102,440"/>
<area shape="poly" id="edge3_Node000003_Node000004" title=" " alt="" coords="205,84,63,414,58,412,200,82"/>
<area shape="rect" id="Node000006" href="$group__driver6.html#ga889bb68e8929772801ed4cf4836a801d" title="Write both MCPs for one pin only if needed, and report asymmetry." alt="" coords="939,337,1049,364"/>
<area shape="poly" id="edge5_Node000005_Node000006" title=" " alt="" coords="1109,368,1050,360,1050,355,1110,363"/>
<area shape="rect" id="Node000007" href="$group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="911,388,1077,415"/>
<area shape="poly" id="edge6_Node000005_Node000007" title=" " alt="" coords="1110,389,1078,393,1078,388,1110,384"/>
<area shape="rect" id="Node000008" href="$group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="721,43,845,69"/>
<area shape="poly" id="edge7_Node000007_Node000008" title=" " alt="" coords="911,380,909,378,885,340,876,302,878,265,884,228,891,192,892,156,884,120,861,83,844,70,847,66,865,80,889,118,897,155,896,193,889,229,883,266,882,302,890,338,913,374,915,377"/>
<area shape="rect" id="Node000011" href="$group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="705,93,860,120"/>
<area shape="poly" id="edge11_Node000007_Node000011" title=" " alt="" coords="911,380,909,378,888,346,880,315,880,284,884,254,888,224,888,194,881,164,861,134,847,123,850,118,865,130,886,162,894,193,894,224,889,255,885,285,885,314,893,344,913,374,915,377"/>
<area shape="rect" id="Node000014" href="$group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="716,144,850,187"/>
<area shape="poly" id="edge15_Node000007_Node000014" title=" " alt="" coords="912,381,909,378,893,355,885,333,883,288,883,244,876,223,861,200,848,189,852,185,865,197,881,220,888,244,889,288,890,332,897,353,913,374,916,377"/>
<area shape="rect" id="Node000017" href="$group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="703,211,863,237"/>
<area shape="poly" id="edge19_Node000007_Node000017" title=" " alt="" coords="913,381,909,378,896,362,889,345,884,313,880,282,874,266,861,251,845,240,848,236,865,247,878,264,885,280,890,312,894,344,900,359,913,374,917,377"/>
<area shape="rect" id="Node000018" href="$group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="745,261,821,288"/>
<area shape="poly" id="edge20_Node000007_Node000018" title=" " alt="" coords="916,383,909,378,892,359,884,339,877,320,861,302,842,291,821,284,823,279,844,286,865,298,882,317,889,337,897,356,913,374,919,378"/>
<area shape="rect" id="Node000019" href="$group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="745,312,821,339"/>
<area shape="poly" id="edge21_Node000007_Node000019" title=" " alt="" coords="927,385,910,378,862,353,821,338,822,333,864,348,912,374,929,380"/>
<area shape="rect" id="Node000020" href="$group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="721,363,844,389"/>
<area shape="poly" id="edge22_Node000007_Node000020" title=" " alt="" coords="895,392,844,386,845,381,896,387"/>
<area shape="rect" id="Node000021" href="$group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="721,413,844,440"/>
<area shape="poly" id="edge23_Node000007_Node000021" title=" " alt="" coords="896,416,845,422,844,417,895,411"/>
<area shape="rect" id="Node000022" href="$group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="721,464,844,491"/>
<area shape="poly" id="edge24_Node000007_Node000022" title=" " alt="" coords="946,423,864,455,830,466,828,461,862,449,944,418"/>
<area shape="rect" id="Node000023" href="$group__snmp2.html#gaf0d2f8746f0e3ef405ff4c684888a34b" title="Set the state of outlet 4 (relay) based on the input value." alt="" coords="721,515,844,541"/>
<area shape="poly" id="edge25_Node000007_Node000023" title=" " alt="" coords="969,428,922,467,864,505,838,516,835,512,862,500,919,463,966,423"/>
<area shape="rect" id="Node000024" href="$group__snmp2.html#ga06d40e363a3333a7e10223aaa792eef0" title="Set the state of outlet 5 (relay) based on the input value." alt="" coords="721,565,844,592"/>
<area shape="poly" id="edge26_Node000007_Node000024" title=" " alt="" coords="979,429,933,492,901,526,864,556,842,567,839,562,862,551,897,522,929,489,975,426"/>
<area shape="rect" id="Node000025" href="$group__snmp2.html#ga085a305fa41615e4791de5e3884226af" title="Set the state of outlet 6 (relay) based on the input value." alt="" coords="721,616,844,643"/>
<area shape="poly" id="edge27_Node000007_Node000025" title=" " alt="" coords="985,430,967,469,941,517,907,565,865,606,845,618,842,613,861,602,903,561,937,514,962,467,980,428"/>
<area shape="rect" id="Node000026" href="$group__snmp2.html#gac79033b7ad83d07369d0e2b5f4d49b9d" title="Set the state of outlet 7 (relay) based on the input value." alt="" coords="721,667,844,693"/>
<area shape="poly" id="edge28_Node000007_Node000026" title=" " alt="" coords="989,431,973,479,949,540,913,603,890,631,865,657,846,668,843,664,861,653,886,628,908,600,944,538,968,478,983,429"/>
<area shape="rect" id="Node000027" href="$group__snmp2.html#gabee06a703d75e5a63c2bde983c5fab2f" title="Set the state of outlet 8 (relay) based on the input value." alt="" coords="721,717,844,744"/>
<area shape="poly" id="edge29_Node000007_Node000027" title=" " alt="" coords="991,431,979,488,956,563,939,602,919,640,894,676,865,707,846,719,843,715,861,703,890,672,914,637,934,599,951,561,974,487,986,430"/>
<area shape="rect" id="Node000009" href="$group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="546,43,624,69"/>
<area shape="poly" id="edge8_Node000008_Node000009" title=" " alt="" coords="705,59,625,59,625,53,705,53"/>
<area shape="rect" id="Node000010" href="$group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="338,43,458,69"/>
<area shape="poly" id="edge9_Node000009_Node000010" title=" " alt="" coords="531,59,459,59,459,53,531,53"/>
<area shape="poly" id="edge10_Node000010_Node000003" title=" " alt="" coords="322,59,255,59,255,53,322,53"/>
<area shape="rect" id="Node000012" href="$group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="515,261,655,288"/>
<area shape="poly" id="edge12_Node000011_Node000012" title=" " alt="" coords="712,129,704,134,668,165,637,201,596,263,592,260,633,198,664,161,701,130,709,125"/>
<area shape="rect" id="Node000013" href="$group__main02.html#gad25e95c5993e865b3f941472b7a328e0" title="Core 1 task for handling SNMP and HTTP server." alt="" coords="173,345,258,372"/>
<area shape="poly" id="edge13_Node000012_Node000013" title=" " alt="" coords="509,295,259,352,258,347,507,289"/>
<area shape="poly" id="edge14_Node000013_Node000004" title=" " alt="" coords="168,381,88,415,86,410,166,376"/>
<area shape="rect" id="Node000015" href="$group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="519,604,651,631"/>
<area shape="poly" id="edge16_Node000014_Node000015" title=" " alt="" coords="706,199,705,200,684,233,665,281,631,401,606,522,591,604,586,603,600,521,626,400,660,279,680,231,701,197,702,195"/>
<area shape="rect" id="Node000016" href="$group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="329,439,467,465"/>
<area shape="poly" id="edge17_Node000015_Node000016" title=" " alt="" coords="556,596,413,468,417,464,559,592"/>
<area shape="poly" id="edge18_Node000016_Node000004" title=" " alt="" coords="313,448,102,433,102,428,314,443"/>
<area shape="rect" id="Node000029" href="$group__driver3.html#ga204d3cdc833db3ce315ff247e3f79400" title="Read power measurements from the specified channel." alt="" coords="944,819,1045,845"/>
<area shape="poly" id="edge31_Node000028_Node000029" title=" " alt="" coords="1172,642,1010,820,1006,817,1168,639"/>
<area shape="rect" id="Node000030" href="$group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="150,827,281,853"/>
<area shape="poly" id="edge32_Node000029_Node000030" title=" " alt="" coords="929,850,863,860,699,869,536,867,392,859,281,850,282,844,392,854,537,861,699,863,863,855,928,844"/>
<area shape="rect" id="Node000031" href="$group__uart.html#gaa0cfe9fea91a783744a3ef36f146da0a" title="Read and print HLW8032 sensor values for a specific channel." alt="" coords="706,768,860,795"/>
<area shape="poly" id="edge34_Node000029_Node000031" title=" " alt="" coords="927,819,841,798,842,793,929,814"/>
<area shape="rect" id="Node000032" href="$group__uart.html#ga900a7219fe90e05fa69922b219cd6cfd" title="Read and print HLW8032 sensor values for all channels." alt="" coords="720,819,846,845"/>
<area shape="poly" id="edge36_Node000029_Node000032" title=" " alt="" coords="928,835,846,835,846,829,928,829"/>
<area shape="rect" id="Node000033" href="$group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="715,920,851,947"/>
<area shape="poly" id="edge38_Node000029_Node000033" title=" " alt="" coords="957,856,864,904,822,922,820,917,862,899,954,851"/>
<area shape="poly" id="edge33_Node000030_Node000004" title=" " alt="" coords="201,813,58,441,63,440,206,811"/>
<area shape="poly" id="edge35_Node000031_Node000015" title=" " alt="" coords="710,763,701,758,665,728,633,693,592,632,596,629,637,689,668,724,704,754,713,759"/>
<area shape="poly" id="edge37_Node000032_Node000015" title=" " alt="" coords="707,813,701,809,659,765,626,715,602,667,588,632,593,630,607,665,630,712,663,762,704,805,711,809"/>
</map>

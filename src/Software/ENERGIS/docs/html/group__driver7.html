<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ENERGIS - 8 Channel Managed PDU for 10 Inch Racks: 7. MCP23017 Relay Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ENERGIS - 8 Channel Managed PDU for 10 Inch Racks
   </div>
   <div id="projectbrief">A comprehensive power distribution unit for efficient energy management.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__driver7.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title"><ol type="1">
<li>MCP23017 Relay Driver </li>
</ol>
<div class="ingroups"><a class="el" href="group__drivers.html">Drivers</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Driver for the Relay Board's MCP23017 I/O Expander with race-free, shadow-latched writes to prevent random relay flips.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for 7. MCP23017 Relay Driver:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7.png" border="0" usemap="#agroup____driver7" loading="lazy" alt=""/></div>
<map name="agroup____driver7" id="agroup____driver7">
<area shape="rect" title="Driver for the Relay Board&#39;s MCP23017 I/O Expander with race&#45;free, shadow&#45;latched writes to prevent r..." alt="" coords="117,5,295,32"/>
<area shape="rect" href="group__drivers.html" title="All hardware drivers for the Energis PDU." alt="" coords="5,5,69,32"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaba4e8ca33cf356bc41af763ae4aa3310" id="r_gaba4e8ca33cf356bc41af763ae4aa3310"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaba4e8ca33cf356bc41af763ae4aa3310">mcp_lock</a> (void)</td></tr>
<tr class="memitem:ga713d78b9106bd7706abb1ed29d8fad27" id="r_ga713d78b9106bd7706abb1ed29d8fad27"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga713d78b9106bd7706abb1ed29d8fad27">mcp_unlock</a> (void)</td></tr>
<tr class="memitem:ga88ff03a249bfc75eaac4cab1d7955107" id="r_ga88ff03a249bfc75eaac4cab1d7955107"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga88ff03a249bfc75eaac4cab1d7955107">i2c_wr</a> (uint8_t reg, uint8_t val)</td></tr>
<tr class="memitem:ga4cde98019aa1b07cd4c5f6bd7929bd8c" id="r_ga4cde98019aa1b07cd4c5f6bd7929bd8c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4cde98019aa1b07cd4c5f6bd7929bd8c">i2c_rd</a> (uint8_t reg, uint8_t *out)</td></tr>
<tr class="memitem:ga51d31ad5757c79b0f72f1e785115efed" id="r_ga51d31ad5757c79b0f72f1e785115efed"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga51d31ad5757c79b0f72f1e785115efed">write_port_from_shadow</a> (uint8_t port_ab)</td></tr>
<tr class="memitem:ga5d50f36be11f0195d0f36b793b69e4fb" id="r_ga5d50f36be11f0195d0f36b793b69e4fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5d50f36be11f0195d0f36b793b69e4fb">mcp_relay_init</a> (void)</td></tr>
<tr class="memdesc:ga5d50f36be11f0195d0f36b793b69e4fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the relay board's MCP23017.  <br /></td></tr>
<tr class="memitem:gaf73b2d26f4d7ccd1f537fe726ba1f462" id="r_gaf73b2d26f4d7ccd1f537fe726ba1f462"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf73b2d26f4d7ccd1f537fe726ba1f462">mcp_relay_write_reg</a> (uint8_t reg, uint8_t value)</td></tr>
<tr class="memdesc:gaf73b2d26f4d7ccd1f537fe726ba1f462"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a value to a specified MCP23017 register (guarded).  <br /></td></tr>
<tr class="memitem:ga4ff3d9494f9b6420a1826db6d18d6b1a" id="r_ga4ff3d9494f9b6420a1826db6d18d6b1a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4ff3d9494f9b6420a1826db6d18d6b1a">mcp_relay_read_reg</a> (uint8_t reg)</td></tr>
<tr class="memdesc:ga4ff3d9494f9b6420a1826db6d18d6b1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a value from a specified MCP23017 register (guarded).  <br /></td></tr>
<tr class="memitem:gab1ef2508fd1f0c02cb7ec65efe0cf682" id="r_gab1ef2508fd1f0c02cb7ec65efe0cf682"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab1ef2508fd1f0c02cb7ec65efe0cf682">mcp_relay_set_direction</a> (uint8_t pin, uint8_t direction)</td></tr>
<tr class="memdesc:gab1ef2508fd1f0c02cb7ec65efe0cf682"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the direction of a specific MCP23017 pin.  <br /></td></tr>
<tr class="memitem:ga553fcd3d3d73cb09bc17d6b28b6e914c" id="r_ga553fcd3d3d73cb09bc17d6b28b6e914c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga553fcd3d3d73cb09bc17d6b28b6e914c">mcp_relay_write_pin</a> (uint8_t pin, uint8_t value)</td></tr>
<tr class="memdesc:ga553fcd3d3d73cb09bc17d6b28b6e914c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a digital value to a specific MCP23017 pin. Uses shadowed whole-port writes under a mutex to avoid races.  <br /></td></tr>
<tr class="memitem:ga9b5f742b94d4fe906f755ee724283ed0" id="r_ga9b5f742b94d4fe906f755ee724283ed0"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9b5f742b94d4fe906f755ee724283ed0">mcp_relay_read_pin</a> (uint8_t pin)</td></tr>
<tr class="memdesc:ga9b5f742b94d4fe906f755ee724283ed0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the digital value from a specific MCP23017 pin.  <br /></td></tr>
<tr class="memitem:ga17f51c0f9c1cdb9ed3825af73da10621" id="r_ga17f51c0f9c1cdb9ed3825af73da10621"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga17f51c0f9c1cdb9ed3825af73da10621">mcp_relay_write_mask</a> (uint8_t port_ab, uint8_t mask, uint8_t value_bits)</td></tr>
<tr class="memdesc:ga17f51c0f9c1cdb9ed3825af73da10621"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically set/clear a group of bits on a given port from a mask.  <br /></td></tr>
<tr class="memitem:ga41f24ca3aebfd711c56f11bbb090f640" id="r_ga41f24ca3aebfd711c56f11bbb090f640"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga41f24ca3aebfd711c56f11bbb090f640">mcp_relay_resync_from_hw</a> (void)</td></tr>
<tr class="memdesc:ga41f24ca3aebfd711c56f11bbb090f640"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-sync software shadows from hardware OLAT (optional utility).  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gac07c4c87ed47ec4ac2029dbc606f7ff8" id="r_gac07c4c87ed47ec4ac2029dbc606f7ff8"><td class="memItemLeft" align="right" valign="top">static mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac07c4c87ed47ec4ac2029dbc606f7ff8">s_relay_mutex</a></td></tr>
<tr class="memitem:gaf4582ca5e22486b19316b310c5e90124" id="r_gaf4582ca5e22486b19316b310c5e90124"><td class="memItemLeft" align="right" valign="top">static volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf4582ca5e22486b19316b310c5e90124">s_olat_a</a> = 0x00</td></tr>
<tr class="memitem:ga7192108d9b47ef396b9bba205be98fcf" id="r_ga7192108d9b47ef396b9bba205be98fcf"><td class="memItemLeft" align="right" valign="top">static volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7192108d9b47ef396b9bba205be98fcf">s_olat_b</a> = 0x00</td></tr>
<tr class="memitem:ga1b35c1a632e4bd7e072175f861c1cd6e" id="r_ga1b35c1a632e4bd7e072175f861c1cd6e"><td class="memItemLeft" align="right" valign="top">static volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1b35c1a632e4bd7e072175f861c1cd6e">s_inited</a> = false</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Driver for the Relay Board's MCP23017 I/O Expander with race-free, shadow-latched writes to prevent random relay flips. </p>
<dl class="section version"><dt>Version</dt><dd>1.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-08-21</dd></dl>
<p>Previously, <a class="el" href="#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole-port writes under a mutex to a...">mcp_relay_write_pin()</a> performed a read-modify-write (RMW) on OLATx, which could cause random relay flips under concurrent access. This driver fixes the issue by maintaining software shadow latches and using mutex protection.</p>
<p>@project ENERGIS - The Managed PDU Project for 10-Inch Rack @github <a href="https://github.com/DvidMakesThings/HW_10-In-Rack_PDU">https://github.com/DvidMakesThings/HW_10-In-Rack_PDU</a> </p>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga4cde98019aa1b07cd4c5f6bd7929bd8c" name="ga4cde98019aa1b07cd4c5f6bd7929bd8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4cde98019aa1b07cd4c5f6bd7929bd8c">&#9670;&#160;</a></span>i2c_rd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool i2c_rd </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>reg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>out</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga4cde98019aa1b07cd4c5f6bd7929bd8c_icgraph.png" border="0" usemap="#agroup__driver7_ga4cde98019aa1b07cd4c5f6bd7929bd8c_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga4cde98019aa1b07cd4c5f6bd7929bd8c_icgraph" id="agroup__driver7_ga4cde98019aa1b07cd4c5f6bd7929bd8c_icgraph">
<area shape="rect" title=" " alt="" coords="1251,183,1308,209"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="1098,183,1203,209"/>
<area shape="poly" title=" " alt="" coords="1236,199,1204,199,1204,193,1236,193"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="659,461,796,488"/>
<area shape="poly" title=" " alt="" coords="1265,225,1233,274,1185,336,1124,397,1089,423,1051,445,987,468,919,481,853,485,796,484,796,478,853,479,918,475,985,463,1049,440,1086,419,1120,393,1181,332,1228,271,1261,222"/>
<area shape="rect" href="group__driver7.html#ga4ff3d9494f9b6420a1826db6d18d6b1a" title="Reads a value from a specified MCP23017 register (guarded)." alt="" coords="889,5,1027,32"/>
<area shape="poly" title=" " alt="" coords="1256,173,1231,146,1202,121,1162,94,1129,77,1049,47,1015,35,1016,30,1051,41,1131,72,1165,90,1205,117,1235,142,1260,169"/>
<area shape="rect" href="group__driver7.html#ga41f24ca3aebfd711c56f11bbb090f640" title="Re&#45;sync software shadows from hardware OLAT (optional utility)." alt="" coords="866,56,1050,83"/>
<area shape="poly" title=" " alt="" coords="1236,178,1151,138,1049,97,1014,86,1015,81,1051,92,1153,134,1239,173"/>
<area shape="rect" href="group__driver7.html#gab1ef2508fd1f0c02cb7ec65efe0cf682" title="Sets the direction of a specific MCP23017 pin." alt="" coords="877,309,1039,336"/>
<area shape="poly" title=" " alt="" coords="1239,219,1153,258,1051,300,1015,311,1014,306,1049,295,1151,254,1236,214"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="456,208,534,235"/>
<area shape="poly" title=" " alt="" coords="1083,201,534,223,534,217,1083,196"/>
<area shape="poly" title=" " alt="" coords="1140,225,1106,286,1081,320,1052,350,990,392,923,425,856,448,797,464,796,459,854,443,920,420,987,388,1048,346,1077,317,1101,284,1135,222"/>
<area shape="poly" title=" " alt="" coords="1136,170,1103,107,1078,74,1048,46,1026,34,1029,30,1052,42,1082,70,1107,104,1141,167"/>
<area shape="poly" title=" " alt="" coords="1129,172,1094,133,1049,97,1024,86,1026,81,1051,92,1098,129,1133,169"/>
<area shape="poly" title=" " alt="" coords="1129,223,1088,267,1051,300,1026,311,1024,306,1049,295,1084,264,1125,220"/>
<area shape="rect" href="group__driver7.html#ga17f51c0f9c1cdb9ed3825af73da10621" title="Atomically set/clear a group of bits on a given port from a mask." alt="" coords="880,157,1036,184"/>
<area shape="poly" title=" " alt="" coords="1082,190,1036,184,1036,178,1083,184"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="888,259,1028,285"/>
<area shape="poly" title=" " alt="" coords="1107,219,1051,242,1002,261,1000,256,1049,238,1105,214"/>
<area shape="rect" href="group__driver7.html#gaf73b2d26f4d7ccd1f537fe726ba1f462" title="Writes a value to a specified MCP23017 register (guarded)." alt="" coords="887,107,1028,133"/>
<area shape="poly" title=" " alt="" coords="1111,177,1049,148,1015,136,1017,131,1051,143,1114,173"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="225,107,321,133"/>
<area shape="poly" title=" " alt="" coords="457,202,408,175,352,148,320,136,322,131,354,143,410,170,459,197"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="211,157,335,184"/>
<area shape="poly" title=" " alt="" coords="646,457,636,452,620,439,611,425,602,413,588,401,562,389,537,383,491,382,468,381,446,378,423,368,399,350,384,331,376,311,374,273,372,235,365,216,351,198,334,186,337,181,355,194,370,214,377,234,379,272,382,310,389,328,403,346,425,363,447,372,469,376,491,377,538,378,563,384,591,396,606,409,616,422,624,435,639,447,649,453"/>
<area shape="rect" href="group__snmp2.html#ga0771afab8e4d202bbc5540825f2afc3b" title="Read all 8 relay states and return as a bitmask." alt="" coords="450,731,540,757"/>
<area shape="poly" title=" " alt="" coords="717,504,669,595,634,647,591,695,563,717,533,732,530,728,560,712,588,691,629,644,665,592,712,501"/>
<area shape="rect" href="group__snmp2.html#ga8fce002de43387ac46d4fce1257762dc" title="Read relay state for channel ch (0..7) into SNMP buffer." alt="" coords="408,959,582,985"/>
<area shape="poly" title=" " alt="" coords="716,504,505,959,501,957,711,501"/>
<area shape="rect" href="group__webui5.html#gabec26dab8e118ff845c2fde12dc885cf" title="Handles the HTTP request for the status page." alt="" coords="419,1161,571,1188"/>
<area shape="poly" title=" " alt="" coords="726,504,714,598,689,735,650,893,623,973,592,1049,573,1083,551,1115,512,1162,508,1159,547,1111,569,1080,587,1047,618,971,645,892,684,734,709,597,721,503"/>
<area shape="rect" href="group__uart.html#ga5ece76769b8fd390a2b6133fa234a706" title="Handle UART GET_CH command." alt="" coords="428,639,562,681"/>
<area shape="poly" title=" " alt="" coords="699,500,525,640,522,636,696,496"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="430,309,561,336"/>
<area shape="poly" title=" " alt="" coords="643,457,635,451,617,427,610,403,604,379,588,357,557,339,560,334,591,353,609,377,616,402,622,425,639,447,646,452"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="427,1009,563,1036"/>
<area shape="poly" title=" " alt="" coords="725,503,709,612,680,761,662,836,641,904,617,961,591,999,565,1016,562,1011,587,995,613,958,636,903,657,834,675,759,704,611,720,503"/>
<area shape="rect" href="group__driver6.html#ga65d23685098ebf6b4f8bca89409a90ab" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="401,461,589,488"/>
<area shape="poly" title=" " alt="" coords="643,477,590,477,590,472,643,472"/>
<area shape="rect" href="group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="193,629,353,656"/>
<area shape="poly" title=" " alt="" coords="679,497,534,553,354,620,320,631,318,626,352,615,532,548,677,492"/>
<area shape="rect" href="group__driver6.html#ga889bb68e8929772801ed4cf4836a801d" title="Write both MCPs for one pin only if needed, and report asymmetry." alt="" coords="440,259,550,285"/>
<area shape="poly" title=" " alt="" coords="643,458,635,451,620,432,613,412,611,373,609,335,602,317,588,299,570,287,550,280,552,275,573,283,591,295,606,315,614,334,616,373,618,411,625,429,639,447,647,454"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="412,411,578,437"/>
<area shape="poly" title=" " alt="" coords="648,460,559,441,560,435,649,455"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="36,157,114,184"/>
<area shape="poly" title=" " alt="" coords="195,173,115,173,115,168,195,168"/>
<area shape="rect" href="group__snmp2.html#gaae5465f6b70d234aa38096a810f5fad8" title="SNMP getter for “all off” OID. Returns the same bitmask as get_allState()." alt="" coords="235,781,311,808"/>
<area shape="poly" title=" " alt="" coords="435,760,312,789,311,783,434,755"/>
<area shape="rect" href="group__snmp2.html#ga4ef4a107594909096b39054767b014f4" title="SNMP getter for “all on” OID. Returns the same bitmask as get_allState()." alt="" coords="235,731,311,757"/>
<area shape="poly" title=" " alt="" coords="434,747,312,747,312,741,434,741"/>
<area shape="rect" href="group__snmp2.html#gade7df1ea335261e38c6b1c2a61ed2ded" title="Get the state of the outlet (relay) as an integer." alt="" coords="211,1085,334,1112"/>
<area shape="poly" title=" " alt="" coords="410,995,403,999,387,1017,379,1036,372,1056,355,1075,335,1087,332,1082,351,1071,367,1053,374,1034,382,1014,399,995,407,990"/>
<area shape="rect" href="group__snmp2.html#gabbff421a9229e31a0cb05761892eec6e" title="Get the state of outlet 2 (relay) as an integer." alt="" coords="211,1136,334,1163"/>
<area shape="poly" title=" " alt="" coords="407,996,403,999,390,1014,383,1029,379,1061,375,1093,368,1110,355,1126,337,1138,334,1134,351,1122,363,1107,370,1092,374,1060,378,1028,386,1011,399,995,404,992"/>
<area shape="rect" href="group__snmp2.html#gae617a671308e5f001c463b793cfe7a03" title="Get the state of outlet 3 (relay) as an integer." alt="" coords="211,1187,334,1213"/>
<area shape="poly" title=" " alt="" coords="406,996,403,999,387,1020,380,1042,379,1086,379,1131,371,1154,355,1177,337,1190,334,1185,351,1173,367,1151,374,1130,374,1085,374,1041,382,1018,399,996,402,992"/>
<area shape="rect" href="group__snmp2.html#gac540752940c1f251d408f0954c14364d" title="Get the state of outlet 4 (relay) as an integer." alt="" coords="211,832,334,859"/>
<area shape="poly" title=" " alt="" coords="465,950,414,911,352,873,325,862,327,857,354,868,417,907,468,946"/>
<area shape="rect" href="group__snmp2.html#ga03c6e3cdf72aa5de6d3b9c1fc220add0" title="Get the state of outlet 5 (relay) as an integer." alt="" coords="211,883,334,909"/>
<area shape="poly" title=" " alt="" coords="441,955,352,924,318,912,319,907,354,919,443,950"/>
<area shape="rect" href="group__snmp2.html#ga62abeab3df59bba29de074d147e280f2" title="Get the state of outlet 6 (relay) as an integer." alt="" coords="211,933,334,960"/>
<area shape="poly" title=" " alt="" coords="393,963,335,956,335,951,394,958"/>
<area shape="rect" href="group__snmp2.html#ga45aa10db7cd7f4c2a207b81312c7a95f" title="Get the state of outlet 7 (relay) as an integer." alt="" coords="211,984,334,1011"/>
<area shape="poly" title=" " alt="" coords="394,986,335,993,335,988,393,981"/>
<area shape="rect" href="group__snmp2.html#ga219cf7f985467e92225ffcd452f81464" title="Get the state of outlet 8 (relay) as an integer." alt="" coords="211,1035,334,1061"/>
<area shape="poly" title=" " alt="" coords="421,993,402,1000,354,1025,323,1037,321,1032,352,1020,400,995,420,988"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="5,908,145,935"/>
<area shape="poly" title=" " alt="" coords="459,1198,403,1225,334,1247,297,1252,260,1252,224,1244,191,1228,157,1197,130,1159,109,1117,95,1073,79,992,74,935,79,935,84,991,100,1072,114,1115,134,1156,161,1193,194,1223,226,1239,260,1246,296,1247,333,1241,401,1220,457,1194"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="9,524,141,551"/>
<area shape="poly" title=" " alt="" coords="413,683,362,691,305,693,247,687,192,670,153,645,121,613,97,579,81,552,86,550,101,576,125,609,156,641,194,666,248,682,305,688,361,685,412,678"/>
<area shape="poly" title=" " alt="" coords="414,310,399,299,384,280,376,261,374,222,372,184,365,166,351,147,337,137,321,130,323,125,340,132,355,143,370,163,377,183,379,222,382,259,389,277,403,295,417,306"/>
<area shape="poly" title=" " alt="" coords="402,454,399,451,377,419,369,387,369,355,374,323,378,291,379,260,371,229,351,198,334,185,337,181,355,194,376,227,384,260,384,292,379,324,374,355,374,386,382,417,403,448,405,450"/>
<area shape="rect" href="group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="195,579,350,605"/>
<area shape="poly" title=" " alt="" coords="459,499,403,534,379,553,354,569,327,581,325,576,352,564,376,548,399,530,456,494"/>
<area shape="rect" href="group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="206,512,340,555"/>
<area shape="poly" title=" " alt="" coords="428,495,341,518,340,513,426,490"/>
<area shape="poly" title=" " alt="" coords="451,498,426,514,403,534,388,556,381,577,373,598,355,619,336,631,333,626,351,615,368,595,376,575,383,554,399,530,423,510,448,494"/>
<area shape="rect" href="group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="235,208,311,235"/>
<area shape="poly" title=" " alt="" coords="402,454,399,451,381,425,373,400,371,374,374,348,376,323,375,298,368,273,351,249,333,235,311,228,312,223,335,231,355,245,373,271,381,297,382,323,379,349,377,374,378,399,385,423,403,448,406,450"/>
<area shape="rect" href="group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="235,259,311,285"/>
<area shape="poly" title=" " alt="" coords="403,455,399,451,384,432,376,413,374,374,372,336,365,318,351,299,332,286,311,279,312,274,335,282,355,295,370,315,377,335,379,374,382,411,389,429,403,448,407,451"/>
<area shape="rect" href="group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="211,309,334,336"/>
<area shape="poly" title=" " alt="" coords="405,456,399,451,387,439,380,426,374,400,368,374,362,362,351,350,334,339,336,334,355,346,366,359,373,372,379,398,385,424,392,436,403,447,408,451"/>
<area shape="rect" href="group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="211,360,334,387"/>
<area shape="poly" title=" " alt="" coords="411,457,400,452,384,439,375,426,366,413,352,401,328,390,331,385,354,396,370,410,379,423,388,435,402,447,413,453"/>
<area shape="rect" href="group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="211,411,334,437"/>
<area shape="poly" title=" " alt="" coords="418,460,334,441,335,435,419,455"/>
<area shape="rect" href="group__snmp2.html#gaf0d2f8746f0e3ef405ff4c684888a34b" title="Set the state of outlet 4 (relay) based on the input value." alt="" coords="211,461,334,488"/>
<area shape="poly" title=" " alt="" coords="385,477,335,477,335,472,385,472"/>
<area shape="poly" title=" " alt="" coords="198,616,195,619,165,654,140,693,121,734,106,777,88,854,80,908,75,907,82,853,101,775,116,732,136,690,160,650,191,615,195,612"/>
<area shape="poly" title=" " alt="" coords="191,538,141,539,141,533,190,532"/>
<area shape="poly" title=" " alt="" coords="412,405,399,394,382,368,374,343,373,318,375,294,376,269,375,245,368,222,351,198,334,185,337,181,355,194,373,219,380,245,382,269,380,294,378,318,379,342,386,366,403,390,416,401"/>
<area shape="poly" title=" " alt="" coords="407,448,403,451,391,465,384,479,379,508,375,538,367,554,355,569,338,580,335,576,351,565,363,551,369,537,374,507,379,477,386,462,399,447,404,444"/>
<area shape="poly" title=" " alt="" coords="413,446,402,452,388,463,379,476,370,489,355,502,335,514,332,509,351,498,366,485,374,472,384,460,400,447,411,441"/>
<area shape="poly" title=" " alt="" coords="406,448,403,451,388,471,380,491,379,533,378,576,371,598,355,619,339,631,336,627,351,615,366,595,373,575,374,533,375,490,383,469,399,448,402,444"/>
<area shape="poly" title=" " alt="" coords="413,405,399,394,385,375,378,356,375,319,372,283,365,266,351,249,332,236,310,228,312,223,335,231,355,245,369,263,377,282,380,319,383,355,390,373,403,390,417,401"/>
<area shape="poly" title=" " alt="" coords="417,406,399,394,381,370,375,345,368,322,351,299,332,288,310,280,312,275,334,283,355,295,373,320,380,344,386,367,403,390,420,401"/>
<area shape="poly" title=" " alt="" coords="426,407,400,394,385,383,375,372,366,361,352,350,327,339,329,334,354,346,369,357,379,368,388,379,402,390,428,402"/>
<area shape="poly" title=" " alt="" coords="418,409,334,390,335,385,419,404"/>
<area shape="poly" title=" " alt="" coords="396,427,335,427,335,421,396,421"/>
<area shape="poly" title=" " alt="" coords="419,444,335,463,334,458,418,439"/>
<area shape="rect" href="group__driver6.html#ga7f5d7a9f6239ad2bdd32a6c5bbb2396d" title="Resynchronize both MCP23017 shadow latches from hardware OLAT registers." alt="" coords="637,56,818,83"/>
<area shape="poly" title=" " alt="" coords="850,72,818,72,818,67,850,67"/>
<area shape="rect" href="group__driver6.html#ga0f044ade72bf35d0f080db7ecb4d114c" title="Configure pin direction on both MCP23017 chips." alt="" coords="648,411,807,437"/>
<area shape="poly" title=" " alt="" coords="923,347,875,374,819,401,786,413,784,408,817,396,872,370,921,342"/>
<area shape="rect" href="group__driver6.html#ga881bcc923a6be895363969bbff79dc1e" title="Atomically write a masked group of bits on both MCP23017 chips." alt="" coords="652,157,803,184"/>
<area shape="poly" title=" " alt="" coords="865,173,804,173,804,168,865,168"/>
<area shape="rect" href="group__driver3.html#gac1bd84c5a254283faacc776489f36625" title="Initialize the HLW8032 power measurement interface." alt="" coords="681,309,774,336"/>
<area shape="poly" title=" " alt="" coords="880,292,775,315,774,310,879,287"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="659,360,796,387"/>
<area shape="poly" title=" " alt="" coords="878,294,867,300,853,312,844,324,835,337,819,350,794,362,792,357,816,346,831,334,839,321,849,308,864,295,875,289"/>
<area shape="rect" href="group__driver3.html#ga317577d37ad844a15b55a8f5e55126f3" title="Select a channel on the multiplexer." alt="" coords="683,259,772,285"/>
<area shape="poly" title=" " alt="" coords="872,275,772,275,772,269,872,269"/>
<area shape="poly" title=" " alt="" coords="665,313,636,300,620,287,611,273,602,261,588,249,561,237,533,229,535,224,563,232,591,244,606,257,616,270,624,283,639,295,667,308"/>
<area shape="poly" title=" " alt="" coords="646,356,636,350,620,337,611,324,602,312,588,300,550,284,552,279,591,295,606,308,616,321,624,334,639,346,649,351"/>
<area shape="poly" title=" " alt="" coords="649,393,560,413,559,407,648,388"/>
<area shape="rect" href="group__driver6.html#gac00aa0678cb81d6bb6add9d0f8ab0de4" title="Write a value to a register on both MCP23017 chips." alt="" coords="659,107,796,133"/>
<area shape="poly" title=" " alt="" coords="872,123,797,123,797,117,872,117"/>
</map>
</div>

</div>
</div>
<a id="ga88ff03a249bfc75eaac4cab1d7955107" name="ga88ff03a249bfc75eaac4cab1d7955107"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga88ff03a249bfc75eaac4cab1d7955107">&#9670;&#160;</a></span>i2c_wr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool i2c_wr </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>reg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>val</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga88ff03a249bfc75eaac4cab1d7955107_icgraph.png" border="0" usemap="#agroup__driver7_ga88ff03a249bfc75eaac4cab1d7955107_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga88ff03a249bfc75eaac4cab1d7955107_icgraph" id="agroup__driver7_ga88ff03a249bfc75eaac4cab1d7955107_icgraph">
<area shape="rect" title=" " alt="" coords="1463,689,1522,716"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="1098,613,1203,640"/>
<area shape="poly" title=" " alt="" coords="1462,682,1439,667,1414,655,1359,640,1303,631,1204,627,1204,622,1304,626,1360,634,1416,649,1442,662,1465,677"/>
<area shape="rect" href="group__driver7.html#gab1ef2508fd1f0c02cb7ec65efe0cf682" title="Sets the direction of a specific MCP23017 pin." alt="" coords="877,715,1039,741"/>
<area shape="poly" title=" " alt="" coords="1447,707,1040,727,1040,722,1447,702"/>
<area shape="rect" href="group__driver7.html#gaf73b2d26f4d7ccd1f537fe726ba1f462" title="Writes a value to a specified MCP23017 register (guarded)." alt="" coords="887,765,1028,792"/>
<area shape="poly" title=" " alt="" coords="1448,715,1415,721,1205,752,1029,774,1029,768,1204,747,1414,716,1447,710"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="1251,664,1415,691"/>
<area shape="poly" title=" " alt="" coords="1447,698,1415,693,1416,688,1448,693"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="456,87,534,113"/>
<area shape="poly" title=" " alt="" coords="1124,605,1090,577,1049,553,1010,544,959,540,836,539,774,538,717,533,669,522,650,513,636,502,616,479,603,456,596,433,592,409,596,362,607,315,619,268,624,221,622,197,616,174,604,150,587,127,563,111,534,103,535,98,565,106,591,123,609,148,621,172,627,196,629,221,624,269,613,316,602,363,598,409,601,432,608,454,621,476,639,498,653,509,671,517,718,528,774,533,836,534,959,535,1011,539,1051,548,1093,572,1127,601"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="659,613,796,640"/>
<area shape="poly" title=" " alt="" coords="1082,629,797,629,797,624,1082,624"/>
<area shape="rect" href="group__driver7.html#ga4ff3d9494f9b6420a1826db6d18d6b1a" title="Reads a value from a specified MCP23017 register (guarded)." alt="" coords="889,563,1027,589"/>
<area shape="poly" title=" " alt="" coords="1082,612,1010,592,1012,587,1083,606"/>
<area shape="rect" href="group__driver7.html#ga41f24ca3aebfd711c56f11bbb090f640" title="Re&#45;sync software shadows from hardware OLAT (optional utility)." alt="" coords="866,461,1050,488"/>
<area shape="poly" title=" " alt="" coords="1131,602,1097,554,1074,530,1049,509,1013,491,1015,486,1051,504,1078,526,1101,551,1136,598"/>
<area shape="poly" title=" " alt="" coords="1126,653,1092,680,1051,705,1022,717,1020,712,1049,700,1089,676,1122,649"/>
<area shape="rect" href="group__driver7.html#ga17f51c0f9c1cdb9ed3825af73da10621" title="Atomically set/clear a group of bits on a given port from a mask." alt="" coords="880,411,1036,437"/>
<area shape="poly" title=" " alt="" coords="1135,600,1093,516,1069,477,1048,451,1029,440,1032,436,1052,447,1074,473,1098,514,1139,598"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="888,664,1028,691"/>
<area shape="poly" title=" " alt="" coords="1083,647,1012,666,1010,661,1082,642"/>
<area shape="poly" title=" " alt="" coords="1137,655,1103,706,1079,733,1051,756,1029,767,1027,762,1049,751,1075,729,1099,703,1133,652"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="225,5,321,32"/>
<area shape="poly" title=" " alt="" coords="441,83,311,35,313,30,443,78"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="211,1085,335,1112"/>
<area shape="poly" title=" " alt="" coords="648,647,639,654,621,680,613,707,613,734,616,761,619,789,619,817,611,845,591,873,568,891,544,899,520,901,496,900,472,898,449,900,426,907,403,923,389,941,382,959,379,997,377,1036,370,1056,355,1075,337,1088,334,1084,351,1071,365,1053,372,1035,374,997,376,958,384,939,399,919,423,902,448,894,472,893,496,894,520,896,543,894,565,886,587,869,606,842,614,816,614,789,611,762,608,734,608,706,616,678,635,650,644,643"/>
<area shape="rect" href="group__snmp2.html#ga0771afab8e4d202bbc5540825f2afc3b" title="Read all 8 relay states and return as a bitmask." alt="" coords="450,255,540,281"/>
<area shape="poly" title=" " alt="" coords="644,611,635,603,615,575,604,547,601,520,602,494,604,438,599,407,587,375,570,347,550,322,511,284,515,280,554,319,575,344,592,372,604,406,609,437,607,494,606,520,609,546,619,572,639,600,648,607"/>
<area shape="rect" href="group__snmp2.html#ga8fce002de43387ac46d4fce1257762dc" title="Read relay state for channel ch (0..7) into SNMP buffer." alt="" coords="408,436,582,463"/>
<area shape="poly" title=" " alt="" coords="646,609,636,604,592,570,554,531,503,465,507,461,558,528,596,566,639,599,649,604"/>
<area shape="rect" href="group__webui5.html#gabec26dab8e118ff845c2fde12dc885cf" title="Handles the HTTP request for the status page." alt="" coords="419,613,571,640"/>
<area shape="poly" title=" " alt="" coords="643,629,572,629,572,624,643,624"/>
<area shape="rect" href="group__uart.html#ga5ece76769b8fd390a2b6133fa234a706" title="Handle UART GET_CH command." alt="" coords="428,188,562,231"/>
<area shape="poly" title=" " alt="" coords="644,611,635,603,618,580,607,557,600,534,597,512,600,467,609,423,619,379,622,335,614,290,603,267,587,244,576,233,561,225,564,221,579,229,591,241,608,265,619,288,627,334,624,379,614,424,605,468,602,511,605,533,612,555,623,577,639,600,648,607"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="430,137,561,164"/>
<area shape="poly" title=" " alt="" coords="644,611,635,603,616,576,603,548,595,521,593,494,598,441,611,388,624,335,629,283,627,257,619,231,607,204,587,178,575,167,560,160,562,155,578,163,591,174,611,202,624,229,632,256,634,283,629,336,616,389,603,442,598,494,600,520,608,546,620,573,639,600,648,607"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="427,385,563,412"/>
<area shape="poly" title=" " alt="" coords="643,610,635,603,619,581,611,558,611,513,610,468,603,447,588,426,563,410,565,406,591,422,608,445,616,467,616,513,616,557,624,578,639,600,647,606"/>
<area shape="rect" href="group__driver6.html#ga65d23685098ebf6b4f8bca89409a90ab" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="401,781,589,808"/>
<area shape="poly" title=" " alt="" coords="650,649,639,654,581,709,511,783,507,779,578,705,636,650,647,644"/>
<area shape="rect" href="group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="193,664,353,691"/>
<area shape="poly" title=" " alt="" coords="644,646,590,655,466,668,354,676,353,671,465,662,589,649,643,641"/>
<area shape="rect" href="group__driver6.html#ga889bb68e8929772801ed4cf4836a801d" title="Write both MCPs for one pin only if needed, and report asymmetry." alt="" coords="440,933,550,960"/>
<area shape="poly" title=" " alt="" coords="648,646,639,654,618,686,610,718,610,750,615,782,620,815,621,848,613,882,591,916,573,931,552,941,550,936,570,927,587,913,608,880,616,848,615,815,610,783,605,750,604,717,613,684,635,650,644,642"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="412,832,578,859"/>
<area shape="poly" title=" " alt="" coords="647,647,639,654,624,674,617,694,616,736,615,779,607,801,591,822,575,834,572,829,587,818,603,798,610,778,611,736,612,693,619,671,635,650,644,643"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="36,1085,114,1112"/>
<area shape="poly" title=" " alt="" coords="195,1101,115,1101,115,1096,195,1096"/>
<area shape="rect" href="group__snmp2.html#gaae5465f6b70d234aa38096a810f5fad8" title="SNMP getter for “all off” OID. Returns the same bitmask as get_allState()." alt="" coords="235,107,311,133"/>
<area shape="poly" title=" " alt="" coords="434,262,416,255,399,245,388,233,380,220,374,195,368,170,362,159,351,147,332,135,310,128,312,123,334,131,355,143,366,156,373,169,379,194,385,218,392,229,403,241,418,251,436,257"/>
<area shape="rect" href="group__snmp2.html#ga4ef4a107594909096b39054767b014f4" title="SNMP getter for “all on” OID. Returns the same bitmask as get_allState()." alt="" coords="235,157,311,184"/>
<area shape="poly" title=" " alt="" coords="434,259,400,245,384,233,375,221,366,210,352,198,310,181,312,176,354,194,370,206,379,218,388,229,402,240,436,254"/>
<area shape="rect" href="group__snmp2.html#gade7df1ea335261e38c6b1c2a61ed2ded" title="Get the state of the outlet (relay) as an integer." alt="" coords="211,512,334,539"/>
<area shape="poly" title=" " alt="" coords="443,471,354,503,319,514,318,509,352,497,441,466"/>
<area shape="rect" href="group__snmp2.html#gabbff421a9229e31a0cb05761892eec6e" title="Get the state of outlet 2 (relay) as an integer." alt="" coords="211,563,334,589"/>
<area shape="poly" title=" " alt="" coords="468,475,417,514,354,553,327,565,325,560,352,548,414,510,465,471"/>
<area shape="rect" href="group__snmp2.html#gae617a671308e5f001c463b793cfe7a03" title="Get the state of outlet 3 (relay) as an integer." alt="" coords="211,208,334,235"/>
<area shape="poly" title=" " alt="" coords="402,429,399,426,382,403,374,381,374,336,374,292,367,270,351,249,334,236,337,232,355,245,371,268,379,291,379,336,380,380,387,401,403,422,406,425"/>
<area shape="rect" href="group__snmp2.html#gac540752940c1f251d408f0954c14364d" title="Get the state of outlet 4 (relay) as an integer." alt="" coords="211,259,334,285"/>
<area shape="poly" title=" " alt="" coords="404,430,399,426,386,410,378,394,374,361,370,330,363,314,351,299,334,287,337,283,355,295,368,312,375,328,379,361,383,392,390,407,403,422,407,426"/>
<area shape="rect" href="group__snmp2.html#ga03c6e3cdf72aa5de6d3b9c1fc220add0" title="Get the state of outlet 5 (relay) as an integer." alt="" coords="211,309,334,336"/>
<area shape="poly" title=" " alt="" coords="407,431,399,426,382,407,374,387,367,368,351,350,332,339,335,334,355,346,372,365,379,385,387,404,403,422,410,427"/>
<area shape="rect" href="group__snmp2.html#ga62abeab3df59bba29de074d147e280f2" title="Get the state of outlet 6 (relay) as an integer." alt="" coords="211,360,334,387"/>
<area shape="poly" title=" " alt="" coords="420,433,400,426,352,401,321,390,323,385,354,396,402,422,421,428"/>
<area shape="rect" href="group__snmp2.html#ga45aa10db7cd7f4c2a207b81312c7a95f" title="Get the state of outlet 7 (relay) as an integer." alt="" coords="211,411,334,437"/>
<area shape="poly" title=" " alt="" coords="393,440,335,434,335,428,394,435"/>
<area shape="rect" href="group__snmp2.html#ga219cf7f985467e92225ffcd452f81464" title="Get the state of outlet 8 (relay) as an integer." alt="" coords="211,461,334,488"/>
<area shape="poly" title=" " alt="" coords="394,464,335,470,335,465,393,458"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="5,733,145,760"/>
<area shape="poly" title=" " alt="" coords="403,623,354,624,300,628,246,638,194,654,179,662,169,671,146,694,95,735,92,731,143,690,165,667,176,658,192,650,245,633,300,623,354,618,403,618"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="9,653,141,680"/>
<area shape="poly" title=" " alt="" coords="412,187,399,178,383,156,376,134,369,114,351,97,309,76,270,67,252,68,233,73,194,97,179,114,164,138,139,203,120,283,105,372,86,543,80,653,74,653,81,542,100,371,115,282,134,201,159,135,174,111,191,93,231,68,251,63,271,62,310,71,355,92,374,111,381,132,387,154,403,174,415,183"/>
<area shape="poly" title=" " alt="" coords="414,136,399,127,382,109,374,90,367,71,351,53,320,35,323,30,355,49,371,68,379,88,387,106,403,123,417,132"/>
<area shape="poly" title=" " alt="" coords="405,819,403,822,382,853,374,883,374,914,379,946,384,977,384,1010,376,1042,355,1075,337,1089,334,1084,351,1072,371,1040,379,1009,378,978,374,946,369,915,369,883,377,850,399,818,402,816"/>
<area shape="rect" href="group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="195,883,350,909"/>
<area shape="poly" title=" " alt="" coords="413,817,402,822,388,834,379,847,370,860,354,873,331,885,328,880,352,868,366,856,375,844,384,830,400,818,411,812"/>
<area shape="rect" href="group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="206,765,340,808"/>
<area shape="poly" title=" " alt="" coords="386,793,340,792,340,786,386,788"/>
<area shape="poly" title=" " alt="" coords="462,774,412,739,352,705,324,694,326,689,354,700,415,735,465,769"/>
<area shape="rect" href="group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="235,715,311,741"/>
<area shape="poly" title=" " alt="" coords="433,779,311,742,312,737,434,774"/>
<area shape="rect" href="group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="235,832,311,859"/>
<area shape="poly" title=" " alt="" coords="419,815,312,839,311,834,418,809"/>
<area shape="rect" href="group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="211,933,334,960"/>
<area shape="poly" title=" " alt="" coords="408,818,403,822,392,834,385,846,379,871,373,897,366,910,355,923,336,935,334,931,351,919,362,907,368,895,374,870,380,844,387,831,399,818,405,814"/>
<area shape="rect" href="group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="211,984,334,1011"/>
<area shape="poly" title=" " alt="" coords="407,819,403,822,389,840,382,858,379,896,377,935,370,954,355,974,336,987,333,982,351,970,365,952,372,933,374,895,376,857,384,837,399,818,403,815"/>
<area shape="rect" href="group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="211,1035,334,1061"/>
<area shape="poly" title=" " alt="" coords="406,819,403,822,385,846,378,871,377,895,379,921,382,946,381,972,373,998,355,1025,336,1038,333,1034,351,1021,368,996,375,971,376,946,374,921,371,896,373,870,381,844,399,818,402,815"/>
<area shape="poly" title=" " alt="" coords="201,878,191,873,156,846,126,815,83,762,88,759,130,812,160,842,194,868,203,874"/>
<area shape="poly" title=" " alt="" coords="200,761,191,756,92,683,96,678,194,751,203,756"/>
<area shape="poly" title=" " alt="" coords="416,868,403,879,386,903,379,927,378,951,380,975,382,1000,380,1025,373,1050,355,1075,337,1088,334,1084,351,1071,368,1048,375,1024,376,1000,375,976,373,951,374,926,382,901,399,876,412,864"/>
<area shape="poly" title=" " alt="" coords="419,865,335,885,334,879,418,860"/>
<area shape="poly" title=" " alt="" coords="426,830,340,807,341,802,428,825"/>
<area shape="poly" title=" " alt="" coords="404,826,399,822,386,807,379,792,374,762,369,733,363,719,351,705,335,693,338,689,355,701,367,716,375,731,379,761,384,790,391,804,403,818,407,822"/>
<area shape="poly" title=" " alt="" coords="408,827,399,822,383,805,374,788,367,771,351,755,332,745,310,737,312,732,334,740,355,751,371,768,379,786,387,802,403,818,410,823"/>
<area shape="poly" title=" " alt="" coords="396,848,312,848,312,843,396,843"/>
<area shape="poly" title=" " alt="" coords="428,867,402,880,388,890,379,901,369,912,354,924,329,935,327,930,352,919,366,908,375,898,385,886,400,875,426,862"/>
<area shape="poly" title=" " alt="" coords="420,868,403,879,386,902,380,926,373,950,355,974,336,986,334,981,351,970,368,947,375,924,381,900,399,875,417,863"/>
<area shape="poly" title=" " alt="" coords="417,868,403,879,390,897,383,914,380,950,377,987,369,1006,355,1025,336,1037,333,1033,351,1021,365,1003,372,986,375,950,378,913,385,894,399,875,413,864"/>
<area shape="rect" href="group__driver6.html#ga7f5d7a9f6239ad2bdd32a6c5bbb2396d" title="Resynchronize both MCP23017 shadow latches from hardware OLAT registers." alt="" coords="637,461,818,488"/>
<area shape="poly" title=" " alt="" coords="850,477,818,477,818,472,850,472"/>
<area shape="rect" href="group__driver6.html#ga0f044ade72bf35d0f080db7ecb4d114c" title="Configure pin direction on both MCP23017 chips." alt="" coords="648,765,807,792"/>
<area shape="poly" title=" " alt="" coords="879,748,792,767,791,762,878,743"/>
<area shape="rect" href="group__driver6.html#ga881bcc923a6be895363969bbff79dc1e" title="Atomically write a masked group of bits on both MCP23017 chips." alt="" coords="652,411,803,437"/>
<area shape="poly" title=" " alt="" coords="865,427,804,427,804,421,865,421"/>
<area shape="rect" href="group__driver3.html#gac1bd84c5a254283faacc776489f36625" title="Initialize the HLW8032 power measurement interface." alt="" coords="681,563,774,589"/>
<area shape="poly" title=" " alt="" coords="921,658,872,630,817,604,774,590,776,584,819,599,875,626,923,653"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="659,715,796,741"/>
<area shape="poly" title=" " alt="" coords="879,697,792,717,791,711,878,692"/>
<area shape="rect" href="group__driver3.html#ga317577d37ad844a15b55a8f5e55126f3" title="Select a channel on the multiplexer." alt="" coords="683,664,772,691"/>
<area shape="poly" title=" " alt="" coords="872,680,772,680,772,675,872,675"/>
<area shape="poly" title=" " alt="" coords="665,567,649,558,635,546,617,518,604,491,598,463,595,437,601,384,613,332,625,281,629,230,626,205,619,179,606,153,587,127,576,117,563,111,534,103,535,98,565,106,579,113,591,124,611,150,624,177,632,204,635,230,630,282,618,334,606,385,601,437,603,463,609,489,621,515,639,542,652,554,668,562"/>
<area shape="poly" title=" " alt="" coords="647,748,639,755,624,774,617,794,615,834,614,875,606,896,591,917,573,931,552,940,549,935,570,926,587,913,602,893,609,874,610,833,612,793,620,772,635,751,644,744"/>
<area shape="poly" title=" " alt="" coords="647,751,639,755,624,771,616,788,607,805,591,822,569,834,566,829,588,818,603,802,611,786,619,768,636,751,644,746"/>
<area shape="rect" href="group__driver6.html#gac00aa0678cb81d6bb6add9d0f8ab0de4" title="Write a value to a register on both MCP23017 chips." alt="" coords="659,816,796,843"/>
<area shape="poly" title=" " alt="" coords="879,799,792,818,791,813,878,793"/>
<area shape="poly" title=" " alt="" coords="1267,662,1201,643,1202,638,1268,657"/>
<area shape="poly" title=" " alt="" coords="1307,655,1263,612,1201,557,1128,500,1049,452,1021,440,1023,435,1051,447,1131,496,1205,553,1266,608,1311,651"/>
<area shape="poly" title=" " alt="" coords="1236,680,1029,680,1029,675,1236,675"/>
</map>
</div>

</div>
</div>
<a id="gaba4e8ca33cf356bc41af763ae4aa3310" name="gaba4e8ca33cf356bc41af763ae4aa3310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaba4e8ca33cf356bc41af763ae4aa3310">&#9670;&#160;</a></span>mcp_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_lock </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_gaba4e8ca33cf356bc41af763ae4aa3310_icgraph.png" border="0" usemap="#agroup__driver7_gaba4e8ca33cf356bc41af763ae4aa3310_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_gaba4e8ca33cf356bc41af763ae4aa3310_icgraph" id="agroup__driver7_gaba4e8ca33cf356bc41af763ae4aa3310_icgraph">
<area shape="rect" title=" " alt="" coords="1251,401,1329,428"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="1098,376,1203,403"/>
<area shape="poly" title=" " alt="" coords="1236,408,1203,402,1204,396,1237,402"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="659,376,796,403"/>
<area shape="poly" title=" " alt="" coords="1267,391,1238,358,1202,327,1163,302,1130,286,1095,275,1049,265,996,252,953,243,933,242,913,245,891,252,867,265,855,275,848,286,843,312,838,339,831,353,819,366,798,379,795,375,816,362,827,350,833,337,838,311,843,284,851,272,864,260,889,247,912,239,933,237,954,238,998,247,1051,260,1097,270,1132,281,1165,298,1205,323,1242,355,1271,387"/>
<area shape="rect" href="group__driver7.html#ga4ff3d9494f9b6420a1826db6d18d6b1a" title="Reads a value from a specified MCP23017 register (guarded)." alt="" coords="889,275,1027,301"/>
<area shape="poly" title=" " alt="" coords="1255,395,1202,366,1105,330,1017,305,1018,299,1107,325,1204,362,1257,390"/>
<area shape="rect" href="group__driver7.html#ga41f24ca3aebfd711c56f11bbb090f640" title="Re&#45;sync software shadows from hardware OLAT (optional utility)." alt="" coords="866,427,1050,453"/>
<area shape="poly" title=" " alt="" coords="1236,421,1051,436,1050,430,1235,416"/>
<area shape="rect" href="group__driver7.html#gab1ef2508fd1f0c02cb7ec65efe0cf682" title="Sets the direction of a specific MCP23017 pin." alt="" coords="877,477,1039,504"/>
<area shape="poly" title=" " alt="" coords="1237,430,1204,437,1021,479,1020,474,1203,432,1235,424"/>
<area shape="rect" href="group__driver7.html#ga17f51c0f9c1cdb9ed3825af73da10621" title="Atomically set/clear a group of bits on a given port from a mask." alt="" coords="880,528,1036,555"/>
<area shape="poly" title=" " alt="" coords="1255,439,1204,465,1105,503,1015,530,1014,525,1103,498,1202,460,1252,434"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="888,173,1028,200"/>
<area shape="poly" title=" " alt="" coords="1282,387,1274,348,1260,303,1236,257,1220,238,1202,221,1162,199,1117,186,1071,181,1029,181,1029,176,1071,176,1118,181,1164,194,1205,216,1224,234,1240,255,1264,300,1280,347,1288,386"/>
<area shape="rect" href="group__driver7.html#gaf73b2d26f4d7ccd1f537fe726ba1f462" title="Writes a value to a specified MCP23017 register (guarded)." alt="" coords="887,579,1028,605"/>
<area shape="poly" title=" " alt="" coords="1272,443,1243,477,1205,510,1162,535,1116,555,1030,581,1028,576,1115,550,1160,530,1202,506,1239,473,1268,439"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="456,107,534,133"/>
<area shape="poly" title=" " alt="" coords="1082,377,979,351,865,316,744,278,693,254,636,214,620,196,612,179,603,163,588,148,561,134,534,127,535,122,563,129,591,143,608,160,616,177,624,193,639,210,696,250,746,273,866,311,980,346,1083,372"/>
<area shape="poly" title=" " alt="" coords="1082,392,797,392,797,387,1082,387"/>
<area shape="poly" title=" " alt="" coords="1119,368,1086,345,1049,322,1005,304,1007,299,1051,318,1089,340,1122,364"/>
<area shape="poly" title=" " alt="" coords="1083,410,1012,429,1010,424,1082,404"/>
<area shape="poly" title=" " alt="" coords="1126,415,1092,443,1051,468,1022,479,1020,474,1049,463,1089,438,1122,411"/>
<area shape="poly" title=" " alt="" coords="1137,418,1103,469,1079,496,1051,518,1029,530,1027,525,1049,514,1075,492,1099,466,1133,415"/>
<area shape="poly" title=" " alt="" coords="1129,365,1093,317,1048,265,1011,230,976,203,980,198,1014,226,1052,261,1097,313,1133,362"/>
<area shape="poly" title=" " alt="" coords="1144,419,1131,453,1112,494,1085,534,1052,569,1030,581,1028,577,1048,565,1081,531,1107,491,1126,451,1139,417"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="225,5,321,32"/>
<area shape="poly" title=" " alt="" coords="452,102,352,53,309,35,311,30,354,48,455,97"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="211,579,335,605"/>
<area shape="poly" title=" " alt="" coords="647,411,639,417,627,430,621,445,617,474,612,505,604,520,591,534,562,554,530,570,462,590,394,598,335,599,335,594,394,593,461,585,528,565,559,550,588,530,600,517,607,503,611,474,616,443,623,428,635,413,644,406"/>
<area shape="rect" href="group__snmp2.html#ga0771afab8e4d202bbc5540825f2afc3b" title="Read all 8 relay states and return as a bitmask." alt="" coords="450,1085,540,1112"/>
<area shape="poly" title=" " alt="" coords="647,409,639,416,629,433,620,453,608,505,603,567,601,635,601,769,598,826,592,871,572,936,548,997,506,1086,501,1084,543,995,567,934,587,870,593,826,595,769,595,635,597,567,603,505,615,452,624,430,635,413,644,405"/>
<area shape="rect" href="group__snmp2.html#ga8fce002de43387ac46d4fce1257762dc" title="Read relay state for channel ch (0..7) into SNMP buffer." alt="" coords="408,832,582,859"/>
<area shape="poly" title=" " alt="" coords="648,409,639,416,618,445,606,472,601,499,601,527,604,586,601,620,592,657,571,709,547,759,507,833,502,830,543,757,566,707,587,655,596,619,599,586,596,527,596,499,601,471,613,443,635,413,644,405"/>
<area shape="rect" href="group__webui5.html#gabec26dab8e118ff845c2fde12dc885cf" title="Handles the HTTP request for the status page." alt="" coords="419,617,571,644"/>
<area shape="poly" title=" " alt="" coords="647,410,639,417,624,435,617,454,613,492,611,532,605,553,591,575,563,601,532,619,530,615,560,597,587,572,600,551,606,531,608,491,611,452,620,433,635,413,644,406"/>
<area shape="rect" href="group__uart.html#ga5ece76769b8fd390a2b6133fa234a706" title="Handle UART GET_CH command." alt="" coords="428,259,562,301"/>
<area shape="poly" title=" " alt="" coords="646,372,636,366,620,354,611,341,602,328,588,316,562,302,564,297,591,311,606,324,615,337,624,350,639,362,649,367"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="430,208,561,235"/>
<area shape="poly" title=" " alt="" coords="644,372,636,366,623,351,616,336,611,306,606,276,600,262,588,249,560,233,563,228,591,245,604,259,611,275,616,305,621,334,627,348,639,362,647,368"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="427,376,563,403"/>
<area shape="poly" title=" " alt="" coords="643,392,564,392,564,387,643,387"/>
<area shape="rect" href="group__driver6.html#ga65d23685098ebf6b4f8bca89409a90ab" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="401,427,589,453"/>
<area shape="poly" title=" " alt="" coords="649,409,560,429,559,423,648,404"/>
<area shape="rect" href="group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="193,528,353,555"/>
<area shape="poly" title=" " alt="" coords="649,411,639,417,624,429,616,442,606,455,591,468,532,495,470,515,408,529,354,537,353,532,407,524,468,510,530,490,588,463,602,451,611,439,620,425,636,412,646,407"/>
<area shape="rect" href="group__driver6.html#ga889bb68e8929772801ed4cf4836a801d" title="Write both MCPs for one pin only if needed, and report asymmetry." alt="" coords="440,157,550,184"/>
<area shape="poly" title=" " alt="" coords="644,373,635,366,619,345,612,323,611,280,610,238,603,218,587,198,570,186,550,178,552,173,573,181,591,194,607,215,615,237,616,280,617,322,624,342,639,362,647,369"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="412,325,578,352"/>
<area shape="poly" title=" " alt="" coords="648,375,559,355,560,350,649,370"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="36,579,114,605"/>
<area shape="poly" title=" " alt="" coords="195,595,115,595,115,589,195,589"/>
<area shape="rect" href="group__snmp2.html#gaae5465f6b70d234aa38096a810f5fad8" title="SNMP getter for “all off” OID. Returns the same bitmask as get_allState()." alt="" coords="235,1136,311,1163"/>
<area shape="poly" title=" " alt="" coords="435,1115,312,1143,311,1138,434,1110"/>
<area shape="rect" href="group__snmp2.html#ga4ef4a107594909096b39054767b014f4" title="SNMP getter for “all on” OID. Returns the same bitmask as get_allState()." alt="" coords="235,1085,311,1112"/>
<area shape="poly" title=" " alt="" coords="434,1101,312,1101,312,1096,434,1096"/>
<area shape="rect" href="group__snmp2.html#gade7df1ea335261e38c6b1c2a61ed2ded" title="Get the state of the outlet (relay) as an integer." alt="" coords="211,984,334,1011"/>
<area shape="poly" title=" " alt="" coords="474,872,422,924,390,951,354,974,329,986,327,981,352,970,386,946,419,920,470,869"/>
<area shape="rect" href="group__snmp2.html#gabbff421a9229e31a0cb05761892eec6e" title="Get the state of outlet 2 (relay) as an integer." alt="" coords="211,1035,334,1061"/>
<area shape="poly" title=" " alt="" coords="482,874,432,949,396,990,354,1025,332,1037,330,1032,352,1020,392,986,428,945,477,871"/>
<area shape="rect" href="group__snmp2.html#gae617a671308e5f001c463b793cfe7a03" title="Get the state of outlet 3 (relay) as an integer." alt="" coords="211,680,334,707"/>
<area shape="poly" title=" " alt="" coords="470,822,419,771,386,744,352,721,327,710,329,705,354,716,390,740,422,767,474,818"/>
<area shape="rect" href="group__snmp2.html#gac540752940c1f251d408f0954c14364d" title="Get the state of outlet 4 (relay) as an integer." alt="" coords="211,731,334,757"/>
<area shape="poly" title=" " alt="" coords="457,826,408,799,352,772,321,760,323,755,354,767,410,794,459,821"/>
<area shape="rect" href="group__snmp2.html#ga03c6e3cdf72aa5de6d3b9c1fc220add0" title="Get the state of outlet 5 (relay) as an integer." alt="" coords="211,781,334,808"/>
<area shape="poly" title=" " alt="" coords="418,831,334,811,335,806,419,825"/>
<area shape="rect" href="group__snmp2.html#ga62abeab3df59bba29de074d147e280f2" title="Get the state of outlet 6 (relay) as an integer." alt="" coords="211,832,334,859"/>
<area shape="poly" title=" " alt="" coords="393,848,335,848,335,843,393,843"/>
<area shape="rect" href="group__snmp2.html#ga45aa10db7cd7f4c2a207b81312c7a95f" title="Get the state of outlet 7 (relay) as an integer." alt="" coords="211,883,334,909"/>
<area shape="poly" title=" " alt="" coords="419,865,335,885,334,879,418,860"/>
<area shape="rect" href="group__snmp2.html#ga219cf7f985467e92225ffcd452f81464" title="Get the state of outlet 8 (relay) as an integer." alt="" coords="211,933,334,960"/>
<area shape="poly" title=" " alt="" coords="459,869,410,897,354,924,323,935,321,930,352,919,408,892,457,865"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="5,629,145,656"/>
<area shape="poly" title=" " alt="" coords="404,636,145,643,145,638,404,631"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="9,85,141,112"/>
<area shape="poly" title=" " alt="" coords="412,259,399,248,385,228,378,208,377,167,375,130,367,113,351,97,324,81,294,71,262,67,230,66,167,74,116,87,114,82,166,69,229,61,262,61,295,66,326,76,355,93,372,110,380,128,383,167,383,207,390,226,403,245,416,255"/>
<area shape="poly" title=" " alt="" coords="414,209,399,198,384,180,377,161,373,125,371,88,364,71,351,52,337,41,320,33,323,28,340,37,355,49,369,68,376,87,379,124,382,160,389,177,403,194,417,204"/>
<area shape="poly" title=" " alt="" coords="474,467,422,518,390,545,354,569,329,580,327,576,352,564,386,541,419,514,470,463"/>
<area shape="rect" href="group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="195,427,350,453"/>
<area shape="poly" title=" " alt="" coords="385,443,351,443,351,437,385,437"/>
<area shape="rect" href="group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="206,107,340,149"/>
<area shape="poly" title=" " alt="" coords="402,419,399,416,377,384,368,352,368,321,372,290,377,258,377,227,370,195,351,163,339,152,342,148,355,160,375,193,383,226,382,259,377,290,373,321,373,352,382,382,403,413,405,415"/>
<area shape="poly" title=" " alt="" coords="441,462,402,481,379,500,354,518,328,530,325,525,352,514,376,496,400,476,439,457"/>
<area shape="rect" href="group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="235,376,311,403"/>
<area shape="poly" title=" " alt="" coords="418,425,311,400,312,395,419,420"/>
<area shape="rect" href="group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="235,224,311,251"/>
<area shape="poly" title=" " alt="" coords="403,420,399,416,384,397,376,378,374,339,372,301,365,283,351,265,332,252,311,244,312,239,335,247,355,261,370,280,377,300,379,339,382,377,389,395,403,413,407,416"/>
<area shape="rect" href="group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="211,477,334,504"/>
<area shape="poly" title=" " alt="" coords="419,460,335,479,334,474,418,455"/>
<area shape="rect" href="group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="211,275,334,301"/>
<area shape="poly" title=" " alt="" coords="405,421,399,417,387,404,380,391,374,365,368,339,362,327,351,315,334,304,336,300,355,311,366,324,373,338,379,364,385,389,392,401,403,413,408,417"/>
<area shape="rect" href="group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="211,173,334,200"/>
<area shape="poly" title=" " alt="" coords="402,419,399,416,381,391,373,365,371,339,374,314,376,288,375,263,368,239,351,214,333,201,336,197,355,210,373,236,381,263,382,289,379,314,377,339,378,364,385,388,403,413,406,416"/>
<area shape="rect" href="group__snmp2.html#gaf0d2f8746f0e3ef405ff4c684888a34b" title="Set the state of outlet 4 (relay) based on the input value." alt="" coords="211,325,334,352"/>
<area shape="poly" title=" " alt="" coords="411,423,400,417,384,404,375,391,366,378,352,366,328,355,331,350,354,362,370,375,379,388,388,401,402,412,413,418"/>
<area shape="poly" title=" " alt="" coords="198,464,195,467,181,485,174,504,171,541,168,580,161,599,147,619,131,631,128,627,143,615,156,597,163,578,166,541,168,502,176,483,191,464,194,460"/>
<area shape="poly" title=" " alt="" coords="190,118,141,111,141,106,191,113"/>
<area shape="poly" title=" " alt="" coords="406,363,403,366,385,390,378,415,377,439,379,465,382,490,381,516,373,542,355,569,337,582,334,577,351,565,368,540,375,515,376,490,374,465,371,440,373,414,381,388,399,362,402,359"/>
<area shape="poly" title=" " alt="" coords="413,361,402,366,388,378,379,391,370,404,354,417,331,429,328,424,352,412,366,400,375,388,384,374,400,362,411,356"/>
<area shape="poly" title=" " alt="" coords="403,319,399,315,384,296,376,277,373,239,371,201,364,182,351,163,338,152,341,148,355,160,369,180,376,200,378,238,381,276,389,294,403,311,407,315"/>
<area shape="poly" title=" " alt="" coords="407,363,403,366,389,384,382,402,379,440,377,479,370,498,355,518,339,530,336,525,351,514,365,496,372,477,374,439,376,401,384,381,399,362,403,359"/>
<area shape="poly" title=" " alt="" coords="419,359,312,383,311,378,418,353"/>
<area shape="poly" title=" " alt="" coords="411,321,400,316,384,303,375,290,366,277,352,265,311,248,313,243,354,260,370,274,379,287,388,299,402,311,413,317"/>
<area shape="poly" title=" " alt="" coords="408,362,403,366,392,378,385,390,379,415,373,441,366,454,355,467,336,479,334,475,351,463,362,451,368,439,374,414,380,388,387,375,399,362,405,358"/>
<area shape="poly" title=" " alt="" coords="418,324,334,305,335,299,419,319"/>
<area shape="poly" title=" " alt="" coords="405,320,399,315,387,303,380,290,374,264,368,238,362,226,351,214,334,203,336,198,355,210,366,223,373,236,379,262,385,288,392,300,403,311,408,315"/>
<area shape="poly" title=" " alt="" coords="396,341,335,341,335,336,396,336"/>
<area shape="rect" href="group__driver6.html#ga7f5d7a9f6239ad2bdd32a6c5bbb2396d" title="Resynchronize both MCP23017 shadow latches from hardware OLAT registers." alt="" coords="637,427,818,453"/>
<area shape="poly" title=" " alt="" coords="850,443,818,443,818,437,850,437"/>
<area shape="rect" href="group__driver6.html#ga0f044ade72bf35d0f080db7ecb4d114c" title="Configure pin direction on both MCP23017 chips." alt="" coords="648,477,807,504"/>
<area shape="poly" title=" " alt="" coords="861,493,807,493,807,488,861,488"/>
<area shape="rect" href="group__driver6.html#ga881bcc923a6be895363969bbff79dc1e" title="Atomically write a masked group of bits on both MCP23017 chips." alt="" coords="652,528,803,555"/>
<area shape="poly" title=" " alt="" coords="865,544,804,544,804,539,865,539"/>
<area shape="rect" href="group__driver3.html#gac1bd84c5a254283faacc776489f36625" title="Initialize the HLW8032 power measurement interface." alt="" coords="681,173,774,200"/>
<area shape="poly" title=" " alt="" coords="873,189,775,189,775,184,873,184"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="659,325,796,352"/>
<area shape="poly" title=" " alt="" coords="893,208,867,221,829,247,794,276,743,327,739,323,791,272,826,242,864,216,891,204"/>
<area shape="rect" href="group__driver3.html#ga317577d37ad844a15b55a8f5e55126f3" title="Select a channel on the multiplexer." alt="" coords="683,123,772,149"/>
<area shape="poly" title=" " alt="" coords="878,172,771,148,773,143,879,167"/>
<area shape="poly" title=" " alt="" coords="665,172,637,164,589,148,533,132,535,127,590,143,638,159,666,167"/>
<area shape="poly" title=" " alt="" coords="651,320,636,309,623,294,617,280,611,251,606,224,599,211,588,198,570,187,550,179,551,174,572,182,591,194,604,208,611,222,616,250,622,278,628,291,639,305,654,316"/>
<area shape="poly" title=" " alt="" coords="644,341,579,341,579,336,644,336"/>
<area shape="rect" href="group__driver6.html#gac00aa0678cb81d6bb6add9d0f8ab0de4" title="Write a value to a register on both MCP23017 chips." alt="" coords="659,579,796,605"/>
<area shape="poly" title=" " alt="" coords="872,595,797,595,797,589,872,589"/>
</map>
</div>

</div>
</div>
<a id="ga5d50f36be11f0195d0f36b793b69e4fb" name="ga5d50f36be11f0195d0f36b793b69e4fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5d50f36be11f0195d0f36b793b69e4fb">&#9670;&#160;</a></span>mcp_relay_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_relay_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the relay board's MCP23017. </p>
<p>Initialize the MCP23017 I/O expander for the relay board.</p>
<p>Performs a hardware reset using MCP_REL_RST, configures IOCON/IODIR, seeds software shadows from OLAT, and drives a known state. All I²C access is mutex-guarded to prevent torn RMW updates. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga5d50f36be11f0195d0f36b793b69e4fb_cgraph.png" border="0" usemap="#agroup__driver7_ga5d50f36be11f0195d0f36b793b69e4fb_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga5d50f36be11f0195d0f36b793b69e4fb_cgraph" id="agroup__driver7_ga5d50f36be11f0195d0f36b793b69e4fb_cgraph">
<area shape="rect" title="Initializes the relay board&#39;s MCP23017." alt="" coords="5,107,111,133"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="212,5,268,32"/>
<area shape="poly" title=" " alt="" coords="75,104,112,77,157,48,196,31,198,36,160,53,115,81,78,108"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="370,132,429,159"/>
<area shape="poly" title=" " alt="" coords="101,104,147,92,203,84,263,82,323,92,350,104,373,120,370,124,347,109,321,97,263,87,204,89,148,97,102,109"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="202,107,279,133"/>
<area shape="poly" title=" " alt="" coords="111,117,186,117,186,123,111,123"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="195,157,286,184"/>
<area shape="poly" title=" " alt="" coords="110,131,181,151,179,157,108,137"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="159,208,322,235"/>
<area shape="poly" title=" " alt="" coords="75,132,112,162,160,194,173,200,170,204,157,198,109,167,72,136"/>
<area shape="poly" title=" " alt="" coords="293,205,321,194,368,165,370,170,323,198,294,210"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga5d50f36be11f0195d0f36b793b69e4fb_icgraph.png" border="0" usemap="#agroup__driver7_ga5d50f36be11f0195d0f36b793b69e4fb_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga5d50f36be11f0195d0f36b793b69e4fb_icgraph" id="agroup__driver7_ga5d50f36be11f0195d0f36b793b69e4fb_icgraph">
<area shape="rect" title="Initializes the relay board&#39;s MCP23017." alt="" coords="1098,756,1203,783"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="456,183,534,209"/>
<area shape="poly" title=" " alt="" coords="1143,741,1133,689,1115,622,1088,550,1069,516,1048,484,991,423,924,370,852,325,777,288,705,258,637,235,533,206,535,201,639,230,707,253,780,283,855,320,927,365,994,419,1052,481,1074,513,1092,548,1120,621,1138,688,1148,740"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="659,731,796,757"/>
<area shape="poly" title=" " alt="" coords="1115,750,1084,733,1049,721,978,712,905,713,837,721,781,733,780,727,836,716,904,708,978,706,1051,716,1086,729,1117,745"/>
<area shape="rect" href="group__driver7.html#ga4ff3d9494f9b6420a1826db6d18d6b1a" title="Reads a value from a specified MCP23017 register (guarded)." alt="" coords="889,731,1027,757"/>
<area shape="poly" title=" " alt="" coords="1082,763,1027,756,1028,750,1083,758"/>
<area shape="rect" href="group__driver7.html#ga41f24ca3aebfd711c56f11bbb090f640" title="Re&#45;sync software shadows from hardware OLAT (optional utility)." alt="" coords="866,781,1050,808"/>
<area shape="poly" title=" " alt="" coords="1083,781,1051,785,1050,780,1082,776"/>
<area shape="rect" href="group__driver7.html#gab1ef2508fd1f0c02cb7ec65efe0cf682" title="Sets the direction of a specific MCP23017 pin." alt="" coords="877,832,1039,859"/>
<area shape="poly" title=" " alt="" coords="1114,793,1051,822,1017,834,1015,829,1049,818,1111,788"/>
<area shape="rect" href="group__driver7.html#ga17f51c0f9c1cdb9ed3825af73da10621" title="Atomically set/clear a group of bits on a given port from a mask." alt="" coords="880,883,1036,909"/>
<area shape="poly" title=" " alt="" coords="1133,796,1098,836,1051,873,1026,885,1024,880,1049,868,1094,832,1129,793"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="888,495,1028,521"/>
<area shape="poly" title=" " alt="" coords="1128,745,967,523,971,520,1133,742"/>
<area shape="rect" href="group__driver7.html#gaf73b2d26f4d7ccd1f537fe726ba1f462" title="Writes a value to a specified MCP23017 register (guarded)." alt="" coords="887,933,1028,960"/>
<area shape="poly" title=" " alt="" coords="1141,798,1107,861,1082,895,1052,923,1030,935,1028,931,1048,919,1078,891,1103,859,1136,796"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="225,5,321,32"/>
<area shape="poly" title=" " alt="" coords="474,171,423,109,389,75,352,46,320,32,322,27,354,42,393,71,427,105,478,168"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="211,984,335,1011"/>
<area shape="poly" title=" " alt="" coords="647,765,639,771,626,788,619,805,616,840,613,875,605,894,591,911,563,934,531,952,463,979,395,993,335,999,335,994,394,988,462,973,529,948,560,930,587,907,601,891,608,874,611,839,614,803,621,785,635,767,644,761"/>
<area shape="rect" href="group__snmp2.html#ga0771afab8e4d202bbc5540825f2afc3b" title="Read all 8 relay states and return as a bitmask." alt="" coords="450,1136,540,1163"/>
<area shape="poly" title=" " alt="" coords="648,763,639,771,623,793,612,814,603,857,606,900,615,943,624,986,627,1030,618,1075,608,1098,591,1121,569,1138,542,1147,540,1142,566,1133,587,1117,603,1095,613,1073,622,1030,619,987,610,944,601,900,598,857,607,812,619,790,635,768,644,760"/>
<area shape="rect" href="group__snmp2.html#ga8fce002de43387ac46d4fce1257762dc" title="Read relay state for channel ch (0..7) into SNMP buffer." alt="" coords="408,335,582,361"/>
<area shape="poly" title=" " alt="" coords="708,719,502,363,507,361,713,716"/>
<area shape="rect" href="group__webui5.html#gabec26dab8e118ff845c2fde12dc885cf" title="Handles the HTTP request for the status page." alt="" coords="419,1080,571,1107"/>
<area shape="poly" title=" " alt="" coords="647,764,639,771,616,806,608,841,608,876,614,911,620,947,622,984,614,1021,591,1059,577,1072,560,1082,557,1077,574,1068,587,1056,609,1019,617,983,615,948,609,912,603,877,602,841,611,804,635,768,644,760"/>
<area shape="rect" href="group__uart.html#ga5ece76769b8fd390a2b6133fa234a706" title="Handle UART GET_CH command." alt="" coords="428,1003,562,1045"/>
<area shape="poly" title=" " alt="" coords="647,765,639,771,622,794,614,817,611,840,612,863,612,911,606,937,591,964,570,987,545,1004,542,1000,567,983,587,961,601,935,607,911,607,863,606,839,608,816,617,792,635,768,643,761"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="430,284,561,311"/>
<area shape="poly" title=" " alt="" coords="708,718,671,648,635,559,626,523,623,490,625,432,625,405,620,379,609,352,587,325,575,314,560,307,562,303,578,310,591,321,613,350,625,377,630,405,631,432,628,490,631,522,640,558,676,645,713,716"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="427,731,563,757"/>
<area shape="poly" title=" " alt="" coords="643,747,564,747,564,741,643,741"/>
<area shape="rect" href="group__driver6.html#ga65d23685098ebf6b4f8bca89409a90ab" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="401,781,589,808"/>
<area shape="poly" title=" " alt="" coords="649,764,560,783,559,778,648,759"/>
<area shape="rect" href="group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="193,933,353,960"/>
<area shape="poly" title=" " alt="" coords="649,766,639,772,624,783,615,796,606,809,591,822,529,860,477,883,354,924,321,935,319,930,352,919,475,878,527,855,588,818,602,805,611,792,620,780,636,767,646,761"/>
<area shape="rect" href="group__driver6.html#ga889bb68e8929772801ed4cf4836a801d" title="Write both MCPs for one pin only if needed, and report asymmetry." alt="" coords="440,233,550,260"/>
<area shape="poly" title=" " alt="" coords="708,718,671,648,635,559,625,515,623,475,629,405,630,372,625,341,612,308,587,274,570,261,550,253,552,248,573,256,591,270,617,305,630,339,635,372,634,405,628,475,630,515,640,558,676,646,713,716"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="412,680,578,707"/>
<area shape="poly" title=" " alt="" coords="648,729,559,710,560,705,649,724"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="36,984,114,1011"/>
<area shape="poly" title=" " alt="" coords="195,1000,115,1000,115,995,195,995"/>
<area shape="rect" href="group__snmp2.html#gaae5465f6b70d234aa38096a810f5fad8" title="SNMP getter for “all off” OID. Returns the same bitmask as get_allState()." alt="" coords="235,1136,311,1163"/>
<area shape="poly" title=" " alt="" coords="434,1152,312,1152,312,1147,434,1147"/>
<area shape="rect" href="group__snmp2.html#ga4ef4a107594909096b39054767b014f4" title="SNMP getter for “all on” OID. Returns the same bitmask as get_allState()." alt="" coords="235,1187,311,1213"/>
<area shape="poly" title=" " alt="" coords="435,1166,312,1194,311,1189,434,1160"/>
<area shape="rect" href="group__snmp2.html#gade7df1ea335261e38c6b1c2a61ed2ded" title="Get the state of the outlet (relay) as an integer." alt="" coords="211,259,334,285"/>
<area shape="poly" title=" " alt="" coords="420,332,400,325,352,300,321,288,323,283,354,295,402,320,421,327"/>
<area shape="rect" href="group__snmp2.html#gabbff421a9229e31a0cb05761892eec6e" title="Get the state of outlet 2 (relay) as an integer." alt="" coords="211,309,334,336"/>
<area shape="poly" title=" " alt="" coords="393,339,335,332,335,327,394,334"/>
<area shape="rect" href="group__snmp2.html#gae617a671308e5f001c463b793cfe7a03" title="Get the state of outlet 3 (relay) as an integer." alt="" coords="211,360,334,387"/>
<area shape="poly" title=" " alt="" coords="394,362,335,369,335,364,393,357"/>
<area shape="rect" href="group__snmp2.html#gac540752940c1f251d408f0954c14364d" title="Get the state of outlet 4 (relay) as an integer." alt="" coords="211,411,334,437"/>
<area shape="poly" title=" " alt="" coords="443,370,354,401,319,413,318,408,352,396,441,365"/>
<area shape="rect" href="group__snmp2.html#ga03c6e3cdf72aa5de6d3b9c1fc220add0" title="Get the state of outlet 5 (relay) as an integer." alt="" coords="211,56,334,83"/>
<area shape="poly" title=" " alt="" coords="402,327,399,324,379,296,371,266,370,238,374,209,377,181,377,152,370,125,351,97,333,84,337,79,355,93,374,122,382,152,383,181,379,210,376,238,376,266,384,293,403,321,406,324"/>
<area shape="rect" href="group__snmp2.html#ga62abeab3df59bba29de074d147e280f2" title="Get the state of outlet 6 (relay) as an integer." alt="" coords="211,107,334,133"/>
<area shape="poly" title=" " alt="" coords="402,328,399,324,382,302,374,279,374,235,374,190,367,169,351,147,334,135,337,130,355,143,371,166,379,189,379,234,380,278,387,300,403,321,406,324"/>
<area shape="rect" href="group__snmp2.html#ga45aa10db7cd7f4c2a207b81312c7a95f" title="Get the state of outlet 7 (relay) as an integer." alt="" coords="211,157,334,184"/>
<area shape="poly" title=" " alt="" coords="404,328,399,325,386,309,378,292,374,260,370,228,363,213,351,198,334,186,337,182,355,194,368,210,375,227,379,259,383,291,390,306,403,321,407,324"/>
<area shape="rect" href="group__snmp2.html#ga219cf7f985467e92225ffcd452f81464" title="Get the state of outlet 8 (relay) as an integer." alt="" coords="211,208,334,235"/>
<area shape="poly" title=" " alt="" coords="407,330,399,325,382,306,374,286,367,267,351,249,332,238,335,233,355,245,372,264,379,284,387,303,403,321,410,325"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="5,1085,145,1112"/>
<area shape="poly" title=" " alt="" coords="404,1097,145,1100,145,1095,404,1092"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="9,1035,141,1061"/>
<area shape="poly" title=" " alt="" coords="413,1031,141,1047,141,1042,412,1026"/>
<area shape="poly" title=" " alt="" coords="414,285,399,274,379,245,371,216,370,187,374,158,377,130,377,102,370,74,351,46,337,35,320,28,322,23,340,30,355,42,374,72,382,101,383,130,379,159,376,187,376,215,384,243,403,270,417,281"/>
<area shape="poly" title=" " alt="" coords="478,822,417,907,383,947,355,974,332,986,330,981,351,970,379,944,412,903,474,819"/>
<area shape="rect" href="group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="195,731,350,757"/>
<area shape="poly" title=" " alt="" coords="418,780,334,761,335,755,419,775"/>
<area shape="rect" href="group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="206,512,340,555"/>
<area shape="poly" title=" " alt="" coords="402,774,399,771,381,746,372,720,371,695,373,669,375,644,374,619,367,594,351,568,339,557,342,553,355,565,372,592,379,618,380,644,378,670,376,695,377,719,385,743,403,768,406,770"/>
<area shape="poly" title=" " alt="" coords="465,820,403,871,380,899,370,911,354,924,331,935,329,930,352,919,367,907,376,895,399,867,461,815"/>
<area shape="rect" href="group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="235,781,311,808"/>
<area shape="poly" title=" " alt="" coords="386,797,312,797,312,792,386,792"/>
<area shape="rect" href="group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="235,832,311,859"/>
<area shape="poly" title=" " alt="" coords="419,815,312,839,311,834,418,809"/>
<area shape="rect" href="group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="211,680,334,707"/>
<area shape="poly" title=" " alt="" coords="411,777,400,772,384,759,375,746,366,733,352,721,328,710,331,705,354,716,370,730,379,743,388,755,402,767,413,773"/>
<area shape="rect" href="group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="211,461,334,488"/>
<area shape="poly" title=" " alt="" coords="402,774,399,771,376,737,367,703,368,669,374,635,379,602,380,568,372,535,351,502,333,489,336,484,355,498,377,533,385,568,384,602,379,636,374,669,373,702,381,735,403,768,405,770"/>
<area shape="rect" href="group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="211,579,334,605"/>
<area shape="poly" title=" " alt="" coords="403,775,399,771,384,752,376,733,374,694,372,656,365,638,351,619,333,607,336,603,355,615,370,635,377,655,379,694,382,731,389,749,403,768,407,771"/>
<area shape="rect" href="group__snmp2.html#gaf0d2f8746f0e3ef405ff4c684888a34b" title="Set the state of outlet 4 (relay) based on the input value." alt="" coords="211,629,334,656"/>
<area shape="poly" title=" " alt="" coords="405,776,399,771,387,759,380,746,374,720,368,694,362,682,351,670,334,659,336,654,355,666,366,679,373,692,379,718,385,744,392,756,403,767,408,771"/>
<area shape="rect" href="group__snmp2.html#ga06d40e363a3333a7e10223aaa792eef0" title="Set the state of outlet 5 (relay) based on the input value." alt="" coords="211,883,334,909"/>
<area shape="poly" title=" " alt="" coords="459,819,410,846,354,873,323,885,321,880,352,868,408,841,457,814"/>
<area shape="poly" title=" " alt="" coords="197,769,195,771,171,809,162,846,164,883,170,920,177,958,179,996,170,1035,147,1075,132,1087,129,1083,143,1072,165,1033,174,996,172,958,165,921,159,884,157,846,166,807,191,768,193,765"/>
<area shape="poly" title=" " alt="" coords="196,567,195,568,176,598,163,628,157,656,154,684,160,740,173,795,185,850,191,907,188,935,180,964,167,994,147,1024,133,1036,130,1032,143,1021,162,992,175,963,182,934,185,907,180,851,167,796,154,741,149,684,151,655,158,626,171,596,190,565,192,563"/>
<area shape="poly" title=" " alt="" coords="405,718,403,720,382,751,374,782,374,813,379,844,384,876,384,908,376,941,355,974,337,987,334,983,351,970,371,939,379,908,378,877,374,845,369,813,369,781,377,749,399,717,402,714"/>
<area shape="poly" title=" " alt="" coords="419,713,335,733,334,727,418,708"/>
<area shape="poly" title=" " alt="" coords="469,670,418,620,352,569,331,558,333,553,354,564,421,616,473,667"/>
<area shape="poly" title=" " alt="" coords="406,718,403,720,385,745,378,769,377,794,379,819,382,845,381,871,373,897,355,923,340,935,336,931,351,919,368,895,375,870,376,845,374,820,371,794,373,768,381,743,399,717,402,714"/>
<area shape="poly" title=" " alt="" coords="413,715,402,721,388,733,379,745,370,758,354,772,313,789,311,784,352,767,366,755,375,742,384,729,400,716,411,711"/>
<area shape="poly" title=" " alt="" coords="408,717,403,721,392,732,385,744,379,770,373,796,366,809,355,822,334,835,312,842,311,837,332,830,351,818,362,806,368,794,374,768,380,742,387,729,399,717,405,712"/>
<area shape="poly" title=" " alt="" coords="396,696,335,696,335,691,396,691"/>
<area shape="poly" title=" " alt="" coords="479,668,459,630,430,586,394,541,351,502,331,491,333,486,355,498,398,537,435,583,463,628,484,665"/>
<area shape="poly" title=" " alt="" coords="457,674,408,647,352,620,321,608,323,603,354,615,410,642,459,669"/>
<area shape="poly" title=" " alt="" coords="418,679,334,659,335,654,419,673"/>
<area shape="poly" title=" " alt="" coords="407,717,403,720,389,739,382,757,379,794,377,833,370,853,355,873,336,885,333,881,351,869,365,850,372,832,374,794,376,755,384,736,399,717,403,713"/>
<area shape="rect" href="group__driver6.html#ga7f5d7a9f6239ad2bdd32a6c5bbb2396d" title="Resynchronize both MCP23017 shadow latches from hardware OLAT registers." alt="" coords="637,781,818,808"/>
<area shape="poly" title=" " alt="" coords="850,797,818,797,818,792,850,792"/>
<area shape="rect" href="group__driver6.html#ga0f044ade72bf35d0f080db7ecb4d114c" title="Configure pin direction on both MCP23017 chips." alt="" coords="648,832,807,859"/>
<area shape="poly" title=" " alt="" coords="861,848,807,848,807,843,861,843"/>
<area shape="rect" href="group__driver6.html#ga881bcc923a6be895363969bbff79dc1e" title="Atomically write a masked group of bits on both MCP23017 chips." alt="" coords="652,883,803,909"/>
<area shape="poly" title=" " alt="" coords="865,899,804,899,804,893,865,893"/>
<area shape="rect" href="group__driver3.html#gac1bd84c5a254283faacc776489f36625" title="Initialize the HLW8032 power measurement interface." alt="" coords="681,339,774,365"/>
<area shape="poly" title=" " alt="" coords="922,488,747,368,750,363,925,483"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="659,520,796,547"/>
<area shape="poly" title=" " alt="" coords="873,520,796,529,796,523,872,515"/>
<area shape="rect" href="group__driver3.html#ga317577d37ad844a15b55a8f5e55126f3" title="Select a channel on the multiplexer." alt="" coords="683,469,772,496"/>
<area shape="poly" title=" " alt="" coords="872,501,772,490,772,485,873,496"/>
<area shape="poly" title=" " alt="" coords="693,331,635,282,622,265,613,250,603,237,588,224,561,211,534,203,535,198,563,206,591,219,607,233,617,247,626,262,639,278,697,327"/>
<area shape="poly" title=" " alt="" coords="644,517,635,510,615,480,607,449,607,419,611,389,615,360,615,331,607,302,587,274,570,261,550,254,552,249,573,257,591,270,612,300,620,330,620,360,616,390,612,420,612,449,620,477,639,506,647,513"/>
<area shape="poly" title=" " alt="" coords="695,558,517,682,514,678,692,554"/>
<area shape="rect" href="group__driver6.html#gac00aa0678cb81d6bb6add9d0f8ab0de4" title="Write a value to a register on both MCP23017 chips." alt="" coords="659,933,796,960"/>
<area shape="poly" title=" " alt="" coords="872,949,797,949,797,944,872,944"/>
</map>
</div>

</div>
</div>
<a id="ga9b5f742b94d4fe906f755ee724283ed0" name="ga9b5f742b94d4fe906f755ee724283ed0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b5f742b94d4fe906f755ee724283ed0">&#9670;&#160;</a></span>mcp_relay_read_pin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mcp_relay_read_pin </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the digital value from a specific MCP23017 pin. </p>
<p>Read the digital value from a specific MCP23017 pin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>The pin number (0-15). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 = low, 1 = high. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga9b5f742b94d4fe906f755ee724283ed0_cgraph.png" border="0" usemap="#agroup__driver7_ga9b5f742b94d4fe906f755ee724283ed0_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga9b5f742b94d4fe906f755ee724283ed0_cgraph" id="agroup__driver7_ga9b5f742b94d4fe906f755ee724283ed0_cgraph">
<area shape="rect" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="5,81,143,108"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="398,5,454,32"/>
<area shape="poly" title=" " alt="" coords="124,78,190,61,382,23,383,29,191,67,125,83"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="387,56,464,83"/>
<area shape="poly" title=" " alt="" coords="143,87,371,71,372,76,143,92"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="191,107,296,133"/>
<area shape="poly" title=" " alt="" coords="144,102,175,107,175,112,143,108"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="380,208,471,235"/>
<area shape="poly" title=" " alt="" coords="106,106,192,143,268,170,345,193,366,200,364,205,343,199,266,175,190,148,104,111"/>
<area shape="poly" title=" " alt="" coords="257,104,294,73,343,42,381,26,383,31,345,46,298,78,261,108"/>
<area shape="poly" title=" " alt="" coords="294,103,372,81,373,87,295,109"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="555,132,615,159"/>
<area shape="poly" title=" " alt="" coords="297,121,540,139,540,145,296,127"/>
<area shape="poly" title=" " alt="" coords="261,132,298,162,345,194,366,203,364,208,343,198,294,167,257,136"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="344,157,507,184"/>
<area shape="poly" title=" " alt="" coords="295,131,361,150,360,155,294,137"/>
<area shape="poly" title=" " alt="" coords="507,155,539,150,540,155,508,160"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga9b5f742b94d4fe906f755ee724283ed0_icgraph.png" border="0" usemap="#agroup__driver7_ga9b5f742b94d4fe906f755ee724283ed0_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga9b5f742b94d4fe906f755ee724283ed0_icgraph" id="agroup__driver7_ga9b5f742b94d4fe906f755ee724283ed0_icgraph">
<area shape="rect" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="1136,448,1274,475"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="710,144,834,171"/>
<area shape="poly" title=" " alt="" coords="1179,438,1137,398,1087,357,1035,327,991,310,947,291,898,255,883,236,874,218,866,201,850,185,830,174,833,169,854,181,871,198,879,216,887,233,902,251,950,286,993,305,1037,322,1090,352,1141,394,1182,435"/>
<area shape="rect" href="group__snmp2.html#ga0771afab8e4d202bbc5540825f2afc3b" title="Read all 8 relay states and return as a bitmask." alt="" coords="949,869,1039,896"/>
<area shape="poly" title=" " alt="" coords="1193,490,1005,870,1000,868,1188,487"/>
<area shape="rect" href="group__snmp2.html#ga8fce002de43387ac46d4fce1257762dc" title="Read relay state for channel ch (0..7) into SNMP buffer." alt="" coords="908,1072,1081,1099"/>
<area shape="poly" title=" " alt="" coords="1201,491,1163,669,1131,789,1091,909,1046,1004,1006,1073,1002,1070,1041,1002,1086,907,1126,788,1158,668,1196,490"/>
<area shape="rect" href="group__webui5.html#gabec26dab8e118ff845c2fde12dc885cf" title="Handles the HTTP request for the status page." alt="" coords="918,136,1070,163"/>
<area shape="poly" title=" " alt="" coords="1197,433,1185,382,1164,316,1132,248,1111,217,1087,189,1069,175,1049,166,1052,161,1072,171,1090,185,1115,214,1137,246,1169,315,1190,380,1202,432"/>
<area shape="rect" href="group__uart.html#ga5ece76769b8fd390a2b6133fa234a706" title="Handle UART GET_CH command." alt="" coords="927,199,1061,241"/>
<area shape="poly" title=" " alt="" coords="1188,435,1147,363,1119,322,1086,285,1061,262,1034,244,1037,240,1064,258,1090,281,1123,319,1152,360,1193,433"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="153,43,284,69"/>
<area shape="poly" title=" " alt="" coords="1199,433,1191,370,1173,288,1158,245,1139,202,1116,162,1086,126,1049,90,1015,62,981,42,947,27,911,17,871,11,773,8,573,8,493,12,414,21,281,45,280,39,413,15,493,6,573,3,773,3,871,6,912,12,949,22,984,37,1018,58,1053,86,1090,122,1120,159,1144,199,1163,243,1178,287,1197,369,1205,432"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="926,1123,1062,1149"/>
<area shape="poly" title=" " alt="" coords="1205,490,1197,622,1178,808,1163,904,1144,991,1120,1063,1106,1091,1090,1113,1064,1130,1061,1125,1086,1109,1101,1088,1115,1061,1139,990,1158,903,1173,808,1192,621,1200,490"/>
<area shape="rect" href="group__driver6.html#ga65d23685098ebf6b4f8bca89409a90ab" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="900,499,1088,525"/>
<area shape="poly" title=" " alt="" coords="1132,481,1053,501,1052,495,1131,476"/>
<area shape="rect" href="group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="692,195,852,221"/>
<area shape="poly" title=" " alt="" coords="1134,446,1079,426,1017,400,954,365,898,322,881,299,874,277,867,256,850,235,832,224,835,220,854,231,872,253,879,275,886,297,902,318,957,361,1019,395,1081,421,1136,440"/>
<area shape="rect" href="group__driver6.html#ga889bb68e8929772801ed4cf4836a801d" title="Write both MCPs for one pin only if needed, and report asymmetry." alt="" coords="939,1173,1049,1200"/>
<area shape="poly" title=" " alt="" coords="1206,490,1199,631,1181,833,1166,936,1147,1031,1122,1109,1107,1140,1090,1163,1072,1177,1051,1185,1049,1180,1069,1172,1086,1159,1102,1137,1117,1107,1142,1030,1161,935,1176,832,1194,631,1200,490"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="911,448,1077,475"/>
<area shape="poly" title=" " alt="" coords="1121,464,1078,464,1078,459,1121,459"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="535,119,613,145"/>
<area shape="poly" title=" " alt="" coords="694,150,613,140,614,134,695,145"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="336,119,456,145"/>
<area shape="poly" title=" " alt="" coords="519,135,457,135,457,129,519,129"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="180,119,258,145"/>
<area shape="poly" title=" " alt="" coords="321,135,258,135,258,129,321,129"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,144,102,171"/>
<area shape="poly" title=" " alt="" coords="165,143,103,153,102,147,165,138"/>
<area shape="rect" href="group__snmp2.html#gaae5465f6b70d234aa38096a810f5fad8" title="SNMP getter for “all off” OID. Returns the same bitmask as get_allState()." alt="" coords="734,920,810,947"/>
<area shape="poly" title=" " alt="" coords="934,899,811,927,810,922,933,894"/>
<area shape="rect" href="group__snmp2.html#ga4ef4a107594909096b39054767b014f4" title="SNMP getter for “all on” OID. Returns the same bitmask as get_allState()." alt="" coords="734,869,810,896"/>
<area shape="poly" title=" " alt="" coords="933,885,811,885,811,880,933,880"/>
<area shape="rect" href="group__snmp2.html#gade7df1ea335261e38c6b1c2a61ed2ded" title="Get the state of the outlet (relay) as an integer." alt="" coords="710,1021,834,1048"/>
<area shape="poly" title=" " alt="" coords="917,1071,833,1051,834,1046,918,1065"/>
<area shape="rect" href="group__snmp2.html#gabbff421a9229e31a0cb05761892eec6e" title="Get the state of outlet 2 (relay) as an integer." alt="" coords="710,1072,834,1099"/>
<area shape="poly" title=" " alt="" coords="892,1088,834,1088,834,1083,892,1083"/>
<area shape="rect" href="group__snmp2.html#gae617a671308e5f001c463b793cfe7a03" title="Get the state of outlet 3 (relay) as an integer." alt="" coords="710,1123,834,1149"/>
<area shape="poly" title=" " alt="" coords="918,1105,834,1125,833,1119,917,1100"/>
<area shape="rect" href="group__snmp2.html#gac540752940c1f251d408f0954c14364d" title="Get the state of outlet 4 (relay) as an integer." alt="" coords="710,1173,834,1200"/>
<area shape="poly" title=" " alt="" coords="912,1107,901,1113,887,1125,878,1137,869,1150,853,1164,830,1175,827,1170,851,1159,865,1147,874,1134,883,1121,899,1108,910,1103"/>
<area shape="rect" href="group__snmp2.html#ga03c6e3cdf72aa5de6d3b9c1fc220add0" title="Get the state of outlet 5 (relay) as an integer." alt="" coords="710,1224,834,1251"/>
<area shape="poly" title=" " alt="" coords="907,1109,902,1113,891,1124,884,1136,878,1162,872,1188,865,1201,854,1214,835,1226,833,1221,850,1210,861,1198,867,1186,873,1160,879,1134,886,1121,898,1109,904,1104"/>
<area shape="rect" href="group__snmp2.html#ga62abeab3df59bba29de074d147e280f2" title="Get the state of outlet 6 (relay) as an integer." alt="" coords="710,1275,834,1301"/>
<area shape="poly" title=" " alt="" coords="906,1109,902,1112,888,1131,881,1149,878,1186,876,1225,869,1245,854,1265,835,1277,832,1273,850,1261,864,1242,871,1224,873,1186,875,1147,883,1128,898,1109,902,1105"/>
<area shape="rect" href="group__snmp2.html#ga45aa10db7cd7f4c2a207b81312c7a95f" title="Get the state of outlet 7 (relay) as an integer." alt="" coords="710,1325,834,1352"/>
<area shape="poly" title=" " alt="" coords="905,1110,902,1112,884,1137,877,1161,876,1186,878,1211,881,1237,880,1263,872,1289,854,1315,835,1329,832,1324,850,1311,867,1287,874,1262,875,1237,873,1212,870,1186,872,1160,880,1135,898,1109,901,1106"/>
<area shape="rect" href="group__snmp2.html#ga219cf7f985467e92225ffcd452f81464" title="Get the state of outlet 8 (relay) as an integer." alt="" coords="710,971,834,997"/>
<area shape="poly" title=" " alt="" coords="956,1066,907,1039,851,1012,820,1000,822,995,853,1007,909,1034,958,1061"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="504,169,644,196"/>
<area shape="poly" title=" " alt="" coords="951,132,898,111,832,94,796,89,761,89,726,94,693,105,677,116,669,130,660,145,645,159,624,171,621,166,642,155,656,141,664,127,674,112,690,100,725,89,760,84,797,84,832,89,899,106,953,127"/>
<area shape="rect" href="group__main02.html#gad25e95c5993e865b3f941472b7a328e0" title="Core 1 task for handling SNMP and HTTP server." alt="" coords="354,169,439,196"/>
<area shape="poly" title=" " alt="" coords="489,185,439,185,439,180,489,180"/>
<area shape="poly" title=" " alt="" coords="338,181,102,164,103,158,338,176"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="508,220,640,247"/>
<area shape="poly" title=" " alt="" coords="927,194,898,177,884,165,875,153,866,143,851,134,807,119,770,112,734,117,693,134,676,150,669,169,662,189,645,210,626,222,623,217,642,206,657,187,664,167,672,147,690,130,733,111,770,107,808,114,853,130,869,139,879,149,888,161,902,173,930,189"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="150,220,288,247"/>
<area shape="poly" title=" " alt="" coords="493,236,289,236,289,231,493,231"/>
<area shape="poly" title=" " alt="" coords="173,215,83,174,86,169,175,211"/>
<area shape="poly" title=" " alt="" coords="184,80,78,146,75,141,181,76"/>
<area shape="poly" title=" " alt="" coords="900,491,898,488,873,450,864,411,866,373,873,335,880,297,882,260,873,222,850,184,833,171,836,167,854,181,878,220,887,259,885,298,878,336,871,373,869,411,878,448,902,485,904,487"/>
<area shape="rect" href="group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="694,347,850,373"/>
<area shape="poly" title=" " alt="" coords="904,493,898,489,886,476,879,463,873,437,867,411,861,399,850,387,833,376,836,372,854,383,865,396,872,410,878,436,884,461,891,473,902,485,907,489"/>
<area shape="rect" href="group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="705,803,839,845"/>
<area shape="poly" title=" " alt="" coords="988,541,972,593,944,660,905,730,881,763,854,793,838,804,835,800,850,789,877,760,901,728,940,658,967,592,983,539"/>
<area shape="poly" title=" " alt="" coords="901,491,898,488,876,456,868,424,868,392,873,360,877,329,878,298,870,266,850,235,836,224,839,220,854,232,875,264,883,297,883,329,878,361,873,392,873,423,881,454,902,485,904,487"/>
<area shape="rect" href="group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="734,499,810,525"/>
<area shape="poly" title=" " alt="" coords="885,515,811,515,811,509,885,509"/>
<area shape="rect" href="group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="734,600,810,627"/>
<area shape="poly" title=" " alt="" coords="958,536,909,563,853,590,811,605,810,600,851,586,907,559,956,531"/>
<area shape="rect" href="group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="710,651,834,677"/>
<area shape="poly" title=" " alt="" coords="973,539,921,590,889,617,853,641,828,652,826,648,851,636,885,613,918,586,969,535"/>
<area shape="rect" href="group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="710,701,834,728"/>
<area shape="poly" title=" " alt="" coords="981,540,931,615,895,656,853,692,831,703,829,698,851,687,891,652,927,612,976,537"/>
<area shape="rect" href="group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="710,549,834,576"/>
<area shape="poly" title=" " alt="" coords="918,532,834,551,833,546,917,527"/>
<area shape="rect" href="group__snmp2.html#gaf0d2f8746f0e3ef405ff4c684888a34b" title="Set the state of outlet 4 (relay) based on the input value." alt="" coords="710,752,834,779"/>
<area shape="poly" title=" " alt="" coords="986,541,967,585,939,639,901,694,879,720,854,742,834,754,831,749,850,738,875,716,897,691,934,636,962,583,981,539"/>
<area shape="rect" href="group__snmp2.html#ga06d40e363a3333a7e10223aaa792eef0" title="Set the state of outlet 5 (relay) based on the input value." alt="" coords="710,245,834,272"/>
<area shape="poly" title=" " alt="" coords="901,491,898,488,880,463,872,437,870,411,873,386,875,360,874,335,867,311,850,286,832,273,835,269,854,282,872,308,880,335,881,361,878,386,876,411,877,436,884,460,902,485,905,488"/>
<area shape="rect" href="group__snmp2.html#ga085a305fa41615e4791de5e3884226af" title="Set the state of outlet 6 (relay) based on the input value." alt="" coords="710,296,834,323"/>
<area shape="poly" title=" " alt="" coords="902,492,898,488,883,469,875,450,873,411,871,373,864,355,850,337,832,324,835,320,854,333,869,352,876,372,878,411,881,449,888,467,902,485,906,488"/>
<area shape="rect" href="group__snmp2.html#gac79033b7ad83d07369d0e2b5f4d49b9d" title="Set the state of outlet 7 (relay) based on the input value." alt="" coords="710,397,834,424"/>
<area shape="poly" title=" " alt="" coords="910,495,899,489,883,476,874,463,865,450,851,438,827,427,830,422,853,434,869,447,878,460,887,473,901,484,912,490"/>
<area shape="rect" href="group__snmp2.html#gabee06a703d75e5a63c2bde983c5fab2f" title="Set the state of outlet 8 (relay) based on the input value." alt="" coords="710,448,834,475"/>
<area shape="poly" title=" " alt="" coords="917,497,833,478,834,473,918,492"/>
<area shape="poly" title=" " alt="" coords="694,340,690,337,677,320,669,304,665,272,660,241,654,225,642,210,626,199,629,194,646,206,658,223,666,239,670,271,674,303,681,318,694,333,697,336"/>
<area shape="poly" title=" " alt="" coords="691,794,689,792,664,746,642,680,623,601,607,516,585,353,574,247,579,247,590,352,612,515,628,600,647,679,669,744,694,789,695,791"/>
<area shape="poly" title=" " alt="" coords="971,437,935,385,898,321,884,281,880,247,873,216,864,201,850,185,833,173,836,168,854,181,868,198,877,214,885,246,890,280,902,319,939,382,975,434"/>
<area shape="poly" title=" " alt="" coords="945,443,899,420,875,403,851,388,823,376,825,371,853,383,878,399,901,415,948,439"/>
<area shape="poly" title=" " alt="" coords="904,486,902,488,878,526,868,562,870,599,876,636,883,674,885,712,877,752,854,792,841,805,838,801,850,789,872,750,880,712,878,674,871,637,864,599,863,562,873,523,898,485,900,482"/>
<area shape="poly" title=" " alt="" coords="929,443,912,433,898,419,882,394,875,370,875,324,874,279,866,257,850,235,835,224,838,220,854,231,871,255,879,278,880,324,881,369,887,392,902,416,916,429,932,439"/>
<area shape="poly" title=" " alt="" coords="918,481,811,506,810,501,917,476"/>
<area shape="poly" title=" " alt="" coords="907,485,902,489,891,500,884,512,878,538,872,564,865,577,854,590,833,603,811,610,810,605,831,598,850,586,861,574,867,562,873,536,879,510,886,497,898,485,904,480"/>
<area shape="poly" title=" " alt="" coords="906,485,902,488,888,507,881,525,878,562,876,601,869,621,854,641,835,653,832,649,850,637,864,618,871,600,873,562,875,523,883,504,898,485,902,481"/>
<area shape="poly" title=" " alt="" coords="905,486,902,488,884,513,877,537,876,562,878,587,881,613,880,639,872,665,854,691,835,705,832,700,850,687,867,663,874,638,875,613,873,588,870,562,872,536,880,511,898,485,901,482"/>
<area shape="poly" title=" " alt="" coords="912,483,901,489,887,501,878,513,869,526,853,540,830,551,827,546,851,535,865,523,874,510,883,497,899,484,910,479"/>
<area shape="poly" title=" " alt="" coords="904,486,902,488,881,519,873,550,873,581,878,612,883,644,883,676,875,709,854,742,836,756,833,751,850,738,870,707,878,676,877,645,873,613,868,581,868,549,876,517,898,485,901,482"/>
<area shape="poly" title=" " alt="" coords="930,443,898,419,885,401,878,384,874,350,870,317,863,302,850,286,833,274,836,270,854,282,868,299,875,316,880,349,884,382,890,399,902,415,933,439"/>
<area shape="poly" title=" " alt="" coords="935,443,898,419,882,397,874,376,867,356,850,337,832,325,834,321,854,333,871,353,879,374,886,395,902,415,938,439"/>
<area shape="poly" title=" " alt="" coords="917,447,833,427,834,422,918,441"/>
<area shape="poly" title=" " alt="" coords="895,464,834,464,834,459,895,459"/>
</map>
</div>

</div>
</div>
<a id="ga4ff3d9494f9b6420a1826db6d18d6b1a" name="ga4ff3d9494f9b6420a1826db6d18d6b1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4ff3d9494f9b6420a1826db6d18d6b1a">&#9670;&#160;</a></span>mcp_relay_read_reg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mcp_relay_read_reg </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>reg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a value from a specified MCP23017 register (guarded). </p>
<p>Read a value from a specific MCP23017 register (mutex-guarded). </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga4ff3d9494f9b6420a1826db6d18d6b1a_cgraph.png" border="0" usemap="#agroup__driver7_ga4ff3d9494f9b6420a1826db6d18d6b1a_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga4ff3d9494f9b6420a1826db6d18d6b1a_cgraph" id="agroup__driver7_ga4ff3d9494f9b6420a1826db6d18d6b1a_cgraph">
<area shape="rect" title="Reads a value from a specified MCP23017 register (guarded)." alt="" coords="5,81,144,108"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="398,5,455,32"/>
<area shape="poly" title=" " alt="" coords="125,78,191,61,383,23,384,29,192,67,126,83"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="388,56,465,83"/>
<area shape="poly" title=" " alt="" coords="144,87,372,71,373,76,144,92"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="192,107,297,133"/>
<area shape="poly" title=" " alt="" coords="145,102,177,107,176,113,144,108"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="381,208,472,235"/>
<area shape="poly" title=" " alt="" coords="107,106,193,143,269,169,346,193,367,200,365,205,344,199,267,175,191,148,104,111"/>
<area shape="poly" title=" " alt="" coords="258,104,295,73,344,42,382,26,384,31,346,46,299,78,262,108"/>
<area shape="poly" title=" " alt="" coords="295,103,373,81,374,87,296,109"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="556,132,616,159"/>
<area shape="poly" title=" " alt="" coords="298,121,541,139,541,145,297,127"/>
<area shape="poly" title=" " alt="" coords="262,132,299,162,346,194,367,203,365,208,344,198,295,167,258,136"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="345,157,508,184"/>
<area shape="poly" title=" " alt="" coords="296,131,362,150,361,155,295,137"/>
<area shape="poly" title=" " alt="" coords="508,155,540,150,541,155,509,160"/>
</map>
</div>

</div>
</div>
<a id="ga41f24ca3aebfd711c56f11bbb090f640" name="ga41f24ca3aebfd711c56f11bbb090f640"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga41f24ca3aebfd711c56f11bbb090f640">&#9670;&#160;</a></span>mcp_relay_resync_from_hw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_relay_resync_from_hw </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Re-sync software shadows from hardware OLAT (optional utility). </p>
<p>Re-sync software shadow latches from hardware OLAT registers. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga41f24ca3aebfd711c56f11bbb090f640_cgraph.png" border="0" usemap="#agroup__driver7_ga41f24ca3aebfd711c56f11bbb090f640_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga41f24ca3aebfd711c56f11bbb090f640_cgraph" id="agroup__driver7_ga41f24ca3aebfd711c56f11bbb090f640_cgraph">
<area shape="rect" title="Re&#45;sync software shadows from hardware OLAT (optional utility)." alt="" coords="5,81,190,108"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="444,5,501,32"/>
<area shape="poly" title=" " alt="" coords="157,78,237,60,429,23,430,29,238,65,158,83"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="434,56,511,83"/>
<area shape="poly" title=" " alt="" coords="190,86,418,70,419,76,190,91"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="238,107,343,133"/>
<area shape="poly" title=" " alt="" coords="190,104,223,108,222,114,190,109"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="427,208,518,235"/>
<area shape="poly" title=" " alt="" coords="137,106,239,143,392,193,413,200,411,205,390,199,237,148,135,111"/>
<area shape="poly" title=" " alt="" coords="304,104,341,73,390,42,428,26,430,31,392,46,345,78,308,108"/>
<area shape="poly" title=" " alt="" coords="341,103,419,81,420,87,342,109"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="602,132,662,159"/>
<area shape="poly" title=" " alt="" coords="344,121,587,139,587,145,343,127"/>
<area shape="poly" title=" " alt="" coords="308,132,345,162,392,194,413,203,411,208,390,198,341,167,304,136"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="391,157,554,184"/>
<area shape="poly" title=" " alt="" coords="342,131,408,150,407,155,341,137"/>
<area shape="poly" title=" " alt="" coords="554,155,586,150,587,155,555,160"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga41f24ca3aebfd711c56f11bbb090f640_icgraph.png" border="0" usemap="#agroup__driver7_ga41f24ca3aebfd711c56f11bbb090f640_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga41f24ca3aebfd711c56f11bbb090f640_icgraph" id="agroup__driver7_ga41f24ca3aebfd711c56f11bbb090f640_icgraph">
<area shape="rect" title="Re&#45;sync software shadows from hardware OLAT (optional utility)." alt="" coords="234,5,418,32"/>
<area shape="rect" href="group__driver6.html#ga7f5d7a9f6239ad2bdd32a6c5bbb2396d" title="Resynchronize both MCP23017 shadow latches from hardware OLAT registers." alt="" coords="5,5,186,32"/>
<area shape="poly" title=" " alt="" coords="218,21,186,21,186,16,218,16"/>
</map>
</div>

</div>
</div>
<a id="gab1ef2508fd1f0c02cb7ec65efe0cf682" name="gab1ef2508fd1f0c02cb7ec65efe0cf682"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab1ef2508fd1f0c02cb7ec65efe0cf682">&#9670;&#160;</a></span>mcp_relay_set_direction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_relay_set_direction </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>direction</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the direction of a specific MCP23017 pin. </p>
<p>Set the direction of a specific MCP23017 pin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>The pin number (0-15). </td></tr>
    <tr><td class="paramname">direction</td><td>0 = output, 1 = input. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_gab1ef2508fd1f0c02cb7ec65efe0cf682_cgraph.png" border="0" usemap="#agroup__driver7_gab1ef2508fd1f0c02cb7ec65efe0cf682_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_gab1ef2508fd1f0c02cb7ec65efe0cf682_cgraph" id="agroup__driver7_gab1ef2508fd1f0c02cb7ec65efe0cf682_cgraph">
<area shape="rect" title="Sets the direction of a specific MCP23017 pin." alt="" coords="5,135,168,161"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="422,33,479,60"/>
<area shape="poly" title=" " alt="" coords="137,132,407,56,409,61,138,137"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="580,84,640,111"/>
<area shape="poly" title=" " alt="" coords="107,132,153,105,216,72,290,40,368,19,452,4,489,5,533,19,568,42,593,70,589,73,564,46,531,24,488,11,452,9,370,24,292,46,218,77,155,109,110,137"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="412,185,489,212"/>
<area shape="poly" title=" " alt="" coords="153,160,216,171,397,192,396,197,215,176,152,165"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="216,135,321,161"/>
<area shape="poly" title=" " alt="" coords="168,145,200,145,200,151,168,151"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="405,236,496,263"/>
<area shape="poly" title=" " alt="" coords="126,159,216,190,391,234,389,239,215,195,124,164"/>
<area shape="poly" title=" " alt="" coords="285,132,322,105,368,76,407,59,409,64,370,81,325,109,288,136"/>
<area shape="poly" title=" " alt="" coords="318,132,369,120,474,106,564,98,565,103,474,111,369,125,319,137"/>
<area shape="poly" title=" " alt="" coords="320,160,398,182,397,187,319,165"/>
<area shape="poly" title=" " alt="" coords="286,160,323,191,370,222,391,231,389,236,368,227,319,195,282,164"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="369,135,532,161"/>
<area shape="poly" title=" " alt="" coords="322,145,353,145,353,151,322,151"/>
<area shape="poly" title=" " alt="" coords="494,132,565,109,566,114,496,137"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_gab1ef2508fd1f0c02cb7ec65efe0cf682_icgraph.png" border="0" usemap="#agroup__driver7_gab1ef2508fd1f0c02cb7ec65efe0cf682_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_gab1ef2508fd1f0c02cb7ec65efe0cf682_icgraph" id="agroup__driver7_gab1ef2508fd1f0c02cb7ec65efe0cf682_icgraph">
<area shape="rect" title="Sets the direction of a specific MCP23017 pin." alt="" coords="212,5,374,32"/>
<area shape="rect" href="group__driver6.html#ga0f044ade72bf35d0f080db7ecb4d114c" title="Configure pin direction on both MCP23017 chips." alt="" coords="5,5,164,32"/>
<area shape="poly" title=" " alt="" coords="196,21,164,21,164,16,196,16"/>
</map>
</div>

</div>
</div>
<a id="ga17f51c0f9c1cdb9ed3825af73da10621" name="ga17f51c0f9c1cdb9ed3825af73da10621"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga17f51c0f9c1cdb9ed3825af73da10621">&#9670;&#160;</a></span>mcp_relay_write_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_relay_write_mask </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>port_ab</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>mask</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>value_bits</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically set/clear a group of bits on a given port from a mask. </p>
<p>Atomically set or clear a group of bits on a given port using a mask.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port_ab</td><td>0 for Port A, 1 for Port B </td></tr>
    <tr><td class="paramname">mask</td><td>Bits to affect </td></tr>
    <tr><td class="paramname">value_bits</td><td>Values for those bits (only masked bits are applied) </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga17f51c0f9c1cdb9ed3825af73da10621_cgraph.png" border="0" usemap="#agroup__driver7_ga17f51c0f9c1cdb9ed3825af73da10621_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga17f51c0f9c1cdb9ed3825af73da10621_cgraph" id="agroup__driver7_ga17f51c0f9c1cdb9ed3825af73da10621_cgraph">
<area shape="rect" title="Atomically set/clear a group of bits on a given port from a mask." alt="" coords="5,132,161,159"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="405,5,482,32"/>
<area shape="poly" title=" " alt="" coords="116,129,208,92,389,32,391,37,210,97,118,134"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="209,107,314,133"/>
<area shape="poly" title=" " alt="" coords="160,132,193,127,194,132,161,137"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="398,208,489,235"/>
<area shape="poly" title=" " alt="" coords="151,157,383,206,382,211,149,162"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="362,157,525,184"/>
<area shape="poly" title=" " alt="" coords="161,148,347,161,347,167,161,153"/>
<area shape="poly" title=" " alt="" coords="278,104,315,77,361,48,390,35,392,40,363,53,318,81,281,108"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="416,107,472,133"/>
<area shape="poly" title=" " alt="" coords="315,117,400,117,400,123,315,123"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="573,107,633,133"/>
<area shape="poly" title=" " alt="" coords="307,104,362,92,444,84,526,92,559,100,558,106,525,97,444,90,362,97,308,109"/>
<area shape="poly" title=" " alt="" coords="279,132,316,162,363,194,384,203,382,208,361,198,312,167,275,136"/>
<area shape="poly" title=" " alt="" coords="313,131,379,150,378,155,312,137"/>
<area shape="poly" title=" " alt="" coords="489,154,525,143,557,132,559,137,526,148,490,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga17f51c0f9c1cdb9ed3825af73da10621_icgraph.png" border="0" usemap="#agroup__driver7_ga17f51c0f9c1cdb9ed3825af73da10621_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga17f51c0f9c1cdb9ed3825af73da10621_icgraph" id="agroup__driver7_ga17f51c0f9c1cdb9ed3825af73da10621_icgraph">
<area shape="rect" title="Atomically set/clear a group of bits on a given port from a mask." alt="" coords="205,5,360,32"/>
<area shape="rect" href="group__driver6.html#ga881bcc923a6be895363969bbff79dc1e" title="Atomically write a masked group of bits on both MCP23017 chips." alt="" coords="5,5,157,32"/>
<area shape="poly" title=" " alt="" coords="189,21,157,21,157,16,189,16"/>
</map>
</div>

</div>
</div>
<a id="ga553fcd3d3d73cb09bc17d6b28b6e914c" name="ga553fcd3d3d73cb09bc17d6b28b6e914c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga553fcd3d3d73cb09bc17d6b28b6e914c">&#9670;&#160;</a></span>mcp_relay_write_pin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_relay_write_pin </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a digital value to a specific MCP23017 pin. Uses shadowed whole-port writes under a mutex to avoid races. </p>
<p>Write a digital value to a specific MCP23017 pin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>The pin number (0-15). </td></tr>
    <tr><td class="paramname">value</td><td>0 = low, 1 = high. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga553fcd3d3d73cb09bc17d6b28b6e914c_cgraph.png" border="0" usemap="#agroup__driver7_ga553fcd3d3d73cb09bc17d6b28b6e914c_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga553fcd3d3d73cb09bc17d6b28b6e914c_cgraph" id="agroup__driver7_ga553fcd3d3d73cb09bc17d6b28b6e914c_cgraph">
<area shape="rect" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="5,132,146,159"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="390,5,467,32"/>
<area shape="poly" title=" " alt="" coords="106,129,193,92,374,32,376,37,195,97,108,134"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="194,107,299,133"/>
<area shape="poly" title=" " alt="" coords="146,132,178,127,179,133,147,138"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="383,208,474,235"/>
<area shape="poly" title=" " alt="" coords="142,157,368,206,367,211,141,162"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="347,157,510,184"/>
<area shape="poly" title=" " alt="" coords="146,148,332,161,331,166,146,153"/>
<area shape="poly" title=" " alt="" coords="263,104,300,77,346,48,375,35,377,40,348,53,303,81,266,108"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="400,107,457,133"/>
<area shape="poly" title=" " alt="" coords="300,117,385,117,385,123,300,123"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="558,107,618,133"/>
<area shape="poly" title=" " alt="" coords="292,104,347,92,429,84,511,92,544,100,543,106,510,97,429,90,347,97,293,109"/>
<area shape="poly" title=" " alt="" coords="264,132,301,162,348,194,369,203,367,208,346,198,297,167,260,136"/>
<area shape="poly" title=" " alt="" coords="298,131,364,150,363,155,297,137"/>
<area shape="poly" title=" " alt="" coords="474,154,510,143,542,132,544,137,511,148,475,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga553fcd3d3d73cb09bc17d6b28b6e914c_icgraph.png" border="0" usemap="#agroup__driver7_ga553fcd3d3d73cb09bc17d6b28b6e914c_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga553fcd3d3d73cb09bc17d6b28b6e914c_icgraph" id="agroup__driver7_ga553fcd3d3d73cb09bc17d6b28b6e914c_icgraph">
<area shape="rect" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="1310,363,1450,389"/>
<area shape="rect" href="group__driver3.html#gac1bd84c5a254283faacc776489f36625" title="Initialize the HLW8032 power measurement interface." alt="" coords="1147,152,1240,179"/>
<area shape="poly" title=" " alt="" coords="1355,353,1205,181,1209,177,1359,349"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="1125,363,1262,389"/>
<area shape="poly" title=" " alt="" coords="1294,379,1262,379,1262,373,1294,373"/>
<area shape="rect" href="group__driver3.html#ga317577d37ad844a15b55a8f5e55126f3" title="Select a channel on the multiplexer." alt="" coords="1149,603,1238,629"/>
<area shape="poly" title=" " alt="" coords="1361,404,1208,604,1203,600,1356,400"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="177,43,254,69"/>
<area shape="poly" title=" " alt="" coords="1159,145,1093,105,1002,60,950,40,896,23,840,12,784,8,584,8,456,14,329,33,255,49,254,44,329,28,456,9,584,3,784,3,841,7,897,18,952,35,1004,55,1095,101,1161,141"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,413,102,440"/>
<area shape="poly" title=" " alt="" coords="205,84,63,414,58,412,200,82"/>
<area shape="rect" href="group__driver6.html#ga889bb68e8929772801ed4cf4836a801d" title="Write both MCPs for one pin only if needed, and report asymmetry." alt="" coords="939,337,1049,364"/>
<area shape="poly" title=" " alt="" coords="1109,368,1050,360,1050,355,1110,363"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="911,388,1077,415"/>
<area shape="poly" title=" " alt="" coords="1110,389,1078,393,1078,388,1110,384"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="721,43,845,69"/>
<area shape="poly" title=" " alt="" coords="911,380,909,378,885,340,876,302,878,265,884,228,891,192,892,156,884,120,861,83,844,70,847,66,865,80,889,118,897,155,896,193,889,229,883,266,882,302,890,338,913,374,915,377"/>
<area shape="rect" href="group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="705,93,860,120"/>
<area shape="poly" title=" " alt="" coords="911,380,909,378,888,346,880,315,880,284,884,254,888,224,888,194,881,164,861,134,847,123,850,118,865,130,886,162,894,193,894,224,889,255,885,285,885,314,893,344,913,374,915,377"/>
<area shape="rect" href="group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="716,144,850,187"/>
<area shape="poly" title=" " alt="" coords="912,381,909,378,893,355,885,333,883,288,883,244,876,223,861,200,848,189,852,185,865,197,881,220,888,244,889,288,890,332,897,353,913,374,916,377"/>
<area shape="rect" href="group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="703,211,863,237"/>
<area shape="poly" title=" " alt="" coords="913,381,909,378,896,362,889,345,884,313,880,282,874,266,861,251,845,240,848,236,865,247,878,264,885,280,890,312,894,344,900,359,913,374,917,377"/>
<area shape="rect" href="group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="745,261,821,288"/>
<area shape="poly" title=" " alt="" coords="916,383,909,378,892,359,884,339,877,320,861,302,842,291,821,284,823,279,844,286,865,298,882,317,889,337,897,356,913,374,919,378"/>
<area shape="rect" href="group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="745,312,821,339"/>
<area shape="poly" title=" " alt="" coords="927,385,910,378,862,353,821,338,822,333,864,348,912,374,929,380"/>
<area shape="rect" href="group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="721,363,844,389"/>
<area shape="poly" title=" " alt="" coords="895,392,844,386,845,381,896,387"/>
<area shape="rect" href="group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="721,413,844,440"/>
<area shape="poly" title=" " alt="" coords="896,416,845,422,844,417,895,411"/>
<area shape="rect" href="group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="721,464,844,491"/>
<area shape="poly" title=" " alt="" coords="946,423,864,455,830,466,828,461,862,449,944,418"/>
<area shape="rect" href="group__snmp2.html#gaf0d2f8746f0e3ef405ff4c684888a34b" title="Set the state of outlet 4 (relay) based on the input value." alt="" coords="721,515,844,541"/>
<area shape="poly" title=" " alt="" coords="969,428,922,467,864,505,838,516,835,512,862,500,919,463,966,423"/>
<area shape="rect" href="group__snmp2.html#ga06d40e363a3333a7e10223aaa792eef0" title="Set the state of outlet 5 (relay) based on the input value." alt="" coords="721,565,844,592"/>
<area shape="poly" title=" " alt="" coords="979,429,933,492,901,526,864,556,842,567,839,562,862,551,897,522,929,489,975,426"/>
<area shape="rect" href="group__snmp2.html#ga085a305fa41615e4791de5e3884226af" title="Set the state of outlet 6 (relay) based on the input value." alt="" coords="721,616,844,643"/>
<area shape="poly" title=" " alt="" coords="985,430,967,469,941,517,907,565,865,606,845,618,842,613,861,602,903,561,937,514,962,467,980,428"/>
<area shape="rect" href="group__snmp2.html#gac79033b7ad83d07369d0e2b5f4d49b9d" title="Set the state of outlet 7 (relay) based on the input value." alt="" coords="721,667,844,693"/>
<area shape="poly" title=" " alt="" coords="989,431,973,479,949,540,913,603,890,631,865,657,846,668,843,664,861,653,886,628,908,600,944,538,968,478,983,429"/>
<area shape="rect" href="group__snmp2.html#gabee06a703d75e5a63c2bde983c5fab2f" title="Set the state of outlet 8 (relay) based on the input value." alt="" coords="721,717,844,744"/>
<area shape="poly" title=" " alt="" coords="991,431,979,488,956,563,939,602,919,640,894,676,865,707,846,719,843,715,861,703,890,672,914,637,934,599,951,561,974,487,986,430"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="546,43,624,69"/>
<area shape="poly" title=" " alt="" coords="705,59,625,59,625,53,705,53"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="338,43,458,69"/>
<area shape="poly" title=" " alt="" coords="531,59,459,59,459,53,531,53"/>
<area shape="poly" title=" " alt="" coords="322,59,255,59,255,53,322,53"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="515,261,655,288"/>
<area shape="poly" title=" " alt="" coords="712,129,704,134,668,165,637,201,596,263,592,260,633,198,664,161,701,130,709,125"/>
<area shape="rect" href="group__main02.html#gad25e95c5993e865b3f941472b7a328e0" title="Core 1 task for handling SNMP and HTTP server." alt="" coords="173,345,258,372"/>
<area shape="poly" title=" " alt="" coords="509,295,259,352,258,347,507,289"/>
<area shape="poly" title=" " alt="" coords="168,381,88,415,86,410,166,376"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="519,604,651,631"/>
<area shape="poly" title=" " alt="" coords="706,199,705,200,684,233,665,281,631,401,606,522,591,604,586,603,600,521,626,400,660,279,680,231,701,197,702,195"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="329,439,467,465"/>
<area shape="poly" title=" " alt="" coords="556,596,413,468,417,464,559,592"/>
<area shape="poly" title=" " alt="" coords="313,448,102,433,102,428,314,443"/>
<area shape="rect" href="group__driver3.html#ga204d3cdc833db3ce315ff247e3f79400" title="Read power measurements from the specified channel." alt="" coords="944,819,1045,845"/>
<area shape="poly" title=" " alt="" coords="1172,642,1010,820,1006,817,1168,639"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="150,827,281,853"/>
<area shape="poly" title=" " alt="" coords="929,850,863,860,699,869,536,867,392,859,281,850,282,844,392,854,537,861,699,863,863,855,928,844"/>
<area shape="rect" href="group__uart.html#gaa0cfe9fea91a783744a3ef36f146da0a" title="Read and print HLW8032 sensor values for a specific channel." alt="" coords="706,768,860,795"/>
<area shape="poly" title=" " alt="" coords="927,819,841,798,842,793,929,814"/>
<area shape="rect" href="group__uart.html#ga900a7219fe90e05fa69922b219cd6cfd" title="Read and print HLW8032 sensor values for all channels." alt="" coords="720,819,846,845"/>
<area shape="poly" title=" " alt="" coords="928,835,846,835,846,829,928,829"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="715,920,851,947"/>
<area shape="poly" title=" " alt="" coords="957,856,864,904,822,922,820,917,862,899,954,851"/>
<area shape="poly" title=" " alt="" coords="201,813,58,441,63,440,206,811"/>
<area shape="poly" title=" " alt="" coords="710,763,701,758,665,728,633,693,592,632,596,629,637,689,668,724,704,754,713,759"/>
<area shape="poly" title=" " alt="" coords="707,813,701,809,659,765,626,715,602,667,588,632,593,630,607,665,630,712,663,762,704,805,711,809"/>
</map>
</div>

</div>
</div>
<a id="gaf73b2d26f4d7ccd1f537fe726ba1f462" name="gaf73b2d26f4d7ccd1f537fe726ba1f462"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf73b2d26f4d7ccd1f537fe726ba1f462">&#9670;&#160;</a></span>mcp_relay_write_reg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_relay_write_reg </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>reg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a value to a specified MCP23017 register (guarded). </p>
<p>Write a value to a specific MCP23017 register (mutex-guarded).</p>
<p>If OLATA/OLATB is written, the shadow is kept in sync. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_gaf73b2d26f4d7ccd1f537fe726ba1f462_cgraph.png" border="0" usemap="#agroup__driver7_gaf73b2d26f4d7ccd1f537fe726ba1f462_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_gaf73b2d26f4d7ccd1f537fe726ba1f462_cgraph" id="agroup__driver7_gaf73b2d26f4d7ccd1f537fe726ba1f462_cgraph">
<area shape="rect" title="Writes a value to a specified MCP23017 register (guarded)." alt="" coords="5,89,147,116"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="559,89,619,116"/>
<area shape="poly" title=" " alt="" coords="102,86,174,53,223,35,277,19,336,7,395,3,455,7,512,24,547,46,572,75,568,78,543,50,510,29,454,13,395,8,336,13,279,24,225,40,176,58,104,91"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="391,38,468,65"/>
<area shape="poly" title=" " alt="" coords="147,90,375,57,376,62,147,95"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="195,114,300,141"/>
<area shape="poly" title=" " alt="" coords="147,110,179,115,179,120,147,115"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="384,241,475,268"/>
<area shape="poly" title=" " alt="" coords="105,114,211,166,349,226,370,234,368,239,347,231,209,171,103,119"/>
<area shape="poly" title=" " alt="" coords="300,121,544,103,544,108,301,126"/>
<area shape="poly" title=" " alt="" coords="278,111,347,81,378,69,380,73,349,86,280,116"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="402,140,458,166"/>
<area shape="poly" title=" " alt="" coords="301,132,386,144,386,150,300,138"/>
<area shape="poly" title=" " alt="" coords="261,140,297,183,322,206,349,227,371,237,368,242,347,231,318,210,293,186,257,143"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="348,190,511,217"/>
<area shape="poly" title=" " alt="" coords="274,139,349,176,366,182,364,187,347,181,272,144"/>
<area shape="poly" title=" " alt="" coords="486,187,510,176,541,152,566,126,570,129,544,156,513,181,489,192"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_gaf73b2d26f4d7ccd1f537fe726ba1f462_icgraph.png" border="0" usemap="#agroup__driver7_gaf73b2d26f4d7ccd1f537fe726ba1f462_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_gaf73b2d26f4d7ccd1f537fe726ba1f462_icgraph" id="agroup__driver7_gaf73b2d26f4d7ccd1f537fe726ba1f462_icgraph">
<area shape="rect" title="Writes a value to a specified MCP23017 register (guarded)." alt="" coords="191,5,332,32"/>
<area shape="rect" href="group__driver6.html#gac00aa0678cb81d6bb6add9d0f8ab0de4" title="Write a value to a register on both MCP23017 chips." alt="" coords="5,5,143,32"/>
<area shape="poly" title=" " alt="" coords="175,21,143,21,143,16,175,16"/>
</map>
</div>

</div>
</div>
<a id="ga713d78b9106bd7706abb1ed29d8fad27" name="ga713d78b9106bd7706abb1ed29d8fad27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga713d78b9106bd7706abb1ed29d8fad27">&#9670;&#160;</a></span>mcp_unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_unlock </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga713d78b9106bd7706abb1ed29d8fad27_icgraph.png" border="0" usemap="#agroup__driver7_ga713d78b9106bd7706abb1ed29d8fad27_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga713d78b9106bd7706abb1ed29d8fad27_icgraph" id="agroup__driver7_ga713d78b9106bd7706abb1ed29d8fad27_icgraph">
<area shape="rect" title=" " alt="" coords="1251,401,1343,428"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="1098,376,1203,403"/>
<area shape="poly" title=" " alt="" coords="1236,407,1203,401,1204,396,1237,402"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="659,376,796,403"/>
<area shape="poly" title=" " alt="" coords="1272,392,1241,360,1202,329,1162,304,1130,287,1095,276,1049,265,996,252,953,243,933,242,913,245,891,252,867,265,855,275,848,286,843,312,838,339,831,353,819,366,798,379,795,375,816,362,827,350,833,337,838,311,843,284,851,272,864,260,889,247,912,239,933,237,954,238,998,247,1051,260,1097,271,1132,283,1165,299,1205,324,1244,356,1276,388"/>
<area shape="rect" href="group__driver7.html#ga4ff3d9494f9b6420a1826db6d18d6b1a" title="Reads a value from a specified MCP23017 register (guarded)." alt="" coords="889,275,1027,301"/>
<area shape="poly" title=" " alt="" coords="1259,396,1202,366,1104,331,1014,305,1016,299,1105,325,1204,362,1262,391"/>
<area shape="rect" href="group__driver7.html#ga41f24ca3aebfd711c56f11bbb090f640" title="Re&#45;sync software shadows from hardware OLAT (optional utility)." alt="" coords="866,427,1050,453"/>
<area shape="poly" title=" " alt="" coords="1236,422,1051,436,1050,430,1236,417"/>
<area shape="rect" href="group__driver7.html#gab1ef2508fd1f0c02cb7ec65efe0cf682" title="Sets the direction of a specific MCP23017 pin." alt="" coords="877,477,1039,504"/>
<area shape="poly" title=" " alt="" coords="1237,431,1021,479,1020,474,1236,425"/>
<area shape="rect" href="group__driver7.html#ga17f51c0f9c1cdb9ed3825af73da10621" title="Atomically set/clear a group of bits on a given port from a mask." alt="" coords="880,528,1036,555"/>
<area shape="poly" title=" " alt="" coords="1260,438,1204,465,1129,494,1051,519,1012,530,1010,525,1049,513,1127,489,1202,460,1257,433"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="888,173,1028,200"/>
<area shape="poly" title=" " alt="" coords="1288,387,1279,348,1262,302,1237,257,1221,238,1202,221,1161,199,1116,187,1071,182,1028,182,1028,176,1071,176,1117,182,1163,194,1205,216,1225,234,1242,254,1267,300,1284,347,1294,386"/>
<area shape="rect" href="group__driver7.html#gaf73b2d26f4d7ccd1f537fe726ba1f462" title="Writes a value to a specified MCP23017 register (guarded)." alt="" coords="887,579,1028,605"/>
<area shape="poly" title=" " alt="" coords="1278,442,1245,476,1205,509,1161,534,1114,553,1026,581,1024,576,1112,548,1158,529,1202,504,1242,472,1274,438"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="456,107,534,133"/>
<area shape="poly" title=" " alt="" coords="1082,377,979,351,865,316,744,278,693,254,636,214,620,196,612,179,603,163,588,148,561,134,534,127,535,122,563,129,591,143,608,160,616,177,624,193,639,210,696,250,746,273,866,311,980,346,1083,372"/>
<area shape="poly" title=" " alt="" coords="1082,392,797,392,797,387,1082,387"/>
<area shape="poly" title=" " alt="" coords="1119,368,1086,345,1049,322,1005,304,1007,299,1051,318,1089,340,1122,364"/>
<area shape="poly" title=" " alt="" coords="1083,410,1012,429,1010,424,1082,404"/>
<area shape="poly" title=" " alt="" coords="1126,415,1092,443,1051,468,1022,479,1020,474,1049,463,1089,438,1122,411"/>
<area shape="poly" title=" " alt="" coords="1137,418,1103,469,1079,496,1051,518,1029,530,1027,525,1049,514,1075,492,1099,466,1133,415"/>
<area shape="poly" title=" " alt="" coords="1129,365,1093,317,1048,265,1011,230,976,203,980,198,1014,226,1052,261,1097,313,1133,362"/>
<area shape="poly" title=" " alt="" coords="1144,419,1131,453,1112,494,1085,534,1052,569,1030,581,1028,577,1048,565,1081,531,1107,491,1126,451,1139,417"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="225,5,321,32"/>
<area shape="poly" title=" " alt="" coords="452,102,352,53,309,35,311,30,354,48,455,97"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="211,579,335,605"/>
<area shape="poly" title=" " alt="" coords="647,411,639,417,627,430,621,445,617,474,612,505,604,520,591,534,562,554,530,570,462,590,394,598,335,599,335,594,394,593,461,585,528,565,559,550,588,530,600,517,607,503,611,474,616,443,623,428,635,413,644,406"/>
<area shape="rect" href="group__snmp2.html#ga0771afab8e4d202bbc5540825f2afc3b" title="Read all 8 relay states and return as a bitmask." alt="" coords="450,1085,540,1112"/>
<area shape="poly" title=" " alt="" coords="647,409,639,416,629,433,620,453,608,505,603,567,601,635,601,769,598,826,592,871,572,936,548,997,506,1086,501,1084,543,995,567,934,587,870,593,826,595,769,595,635,597,567,603,505,615,452,624,430,635,413,644,405"/>
<area shape="rect" href="group__snmp2.html#ga8fce002de43387ac46d4fce1257762dc" title="Read relay state for channel ch (0..7) into SNMP buffer." alt="" coords="408,832,582,859"/>
<area shape="poly" title=" " alt="" coords="648,409,639,416,618,445,606,472,601,499,601,527,604,586,601,620,592,657,571,709,547,759,507,833,502,830,543,757,566,707,587,655,596,619,599,586,596,527,596,499,601,471,613,443,635,413,644,405"/>
<area shape="rect" href="group__webui5.html#gabec26dab8e118ff845c2fde12dc885cf" title="Handles the HTTP request for the status page." alt="" coords="419,617,571,644"/>
<area shape="poly" title=" " alt="" coords="647,410,639,417,624,435,617,454,613,492,611,532,605,553,591,575,563,601,532,619,530,615,560,597,587,572,600,551,606,531,608,491,611,452,620,433,635,413,644,406"/>
<area shape="rect" href="group__uart.html#ga5ece76769b8fd390a2b6133fa234a706" title="Handle UART GET_CH command." alt="" coords="428,259,562,301"/>
<area shape="poly" title=" " alt="" coords="646,372,636,366,620,354,611,341,602,328,588,316,562,302,564,297,591,311,606,324,615,337,624,350,639,362,649,367"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="430,208,561,235"/>
<area shape="poly" title=" " alt="" coords="644,372,636,366,623,351,616,336,611,306,606,276,600,262,588,249,560,233,563,228,591,245,604,259,611,275,616,305,621,334,627,348,639,362,647,368"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="427,376,563,403"/>
<area shape="poly" title=" " alt="" coords="643,392,564,392,564,387,643,387"/>
<area shape="rect" href="group__driver6.html#ga65d23685098ebf6b4f8bca89409a90ab" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="401,427,589,453"/>
<area shape="poly" title=" " alt="" coords="649,409,560,429,559,423,648,404"/>
<area shape="rect" href="group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="193,528,353,555"/>
<area shape="poly" title=" " alt="" coords="649,411,639,417,624,429,616,442,606,455,591,468,532,495,470,515,408,529,354,537,353,532,407,524,468,510,530,490,588,463,602,451,611,439,620,425,636,412,646,407"/>
<area shape="rect" href="group__driver6.html#ga889bb68e8929772801ed4cf4836a801d" title="Write both MCPs for one pin only if needed, and report asymmetry." alt="" coords="440,157,550,184"/>
<area shape="poly" title=" " alt="" coords="644,373,635,366,619,345,612,323,611,280,610,238,603,218,587,198,570,186,550,178,552,173,573,181,591,194,607,215,615,237,616,280,617,322,624,342,639,362,647,369"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="412,325,578,352"/>
<area shape="poly" title=" " alt="" coords="648,375,559,355,560,350,649,370"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="36,579,114,605"/>
<area shape="poly" title=" " alt="" coords="195,595,115,595,115,589,195,589"/>
<area shape="rect" href="group__snmp2.html#gaae5465f6b70d234aa38096a810f5fad8" title="SNMP getter for “all off” OID. Returns the same bitmask as get_allState()." alt="" coords="235,1136,311,1163"/>
<area shape="poly" title=" " alt="" coords="435,1115,312,1143,311,1138,434,1110"/>
<area shape="rect" href="group__snmp2.html#ga4ef4a107594909096b39054767b014f4" title="SNMP getter for “all on” OID. Returns the same bitmask as get_allState()." alt="" coords="235,1085,311,1112"/>
<area shape="poly" title=" " alt="" coords="434,1101,312,1101,312,1096,434,1096"/>
<area shape="rect" href="group__snmp2.html#gade7df1ea335261e38c6b1c2a61ed2ded" title="Get the state of the outlet (relay) as an integer." alt="" coords="211,984,334,1011"/>
<area shape="poly" title=" " alt="" coords="474,872,422,924,390,951,354,974,329,986,327,981,352,970,386,946,419,920,470,869"/>
<area shape="rect" href="group__snmp2.html#gabbff421a9229e31a0cb05761892eec6e" title="Get the state of outlet 2 (relay) as an integer." alt="" coords="211,1035,334,1061"/>
<area shape="poly" title=" " alt="" coords="482,874,432,949,396,990,354,1025,332,1037,330,1032,352,1020,392,986,428,945,477,871"/>
<area shape="rect" href="group__snmp2.html#gae617a671308e5f001c463b793cfe7a03" title="Get the state of outlet 3 (relay) as an integer." alt="" coords="211,680,334,707"/>
<area shape="poly" title=" " alt="" coords="470,822,419,771,386,744,352,721,327,710,329,705,354,716,390,740,422,767,474,818"/>
<area shape="rect" href="group__snmp2.html#gac540752940c1f251d408f0954c14364d" title="Get the state of outlet 4 (relay) as an integer." alt="" coords="211,731,334,757"/>
<area shape="poly" title=" " alt="" coords="457,826,408,799,352,772,321,760,323,755,354,767,410,794,459,821"/>
<area shape="rect" href="group__snmp2.html#ga03c6e3cdf72aa5de6d3b9c1fc220add0" title="Get the state of outlet 5 (relay) as an integer." alt="" coords="211,781,334,808"/>
<area shape="poly" title=" " alt="" coords="418,831,334,811,335,806,419,825"/>
<area shape="rect" href="group__snmp2.html#ga62abeab3df59bba29de074d147e280f2" title="Get the state of outlet 6 (relay) as an integer." alt="" coords="211,832,334,859"/>
<area shape="poly" title=" " alt="" coords="393,848,335,848,335,843,393,843"/>
<area shape="rect" href="group__snmp2.html#ga45aa10db7cd7f4c2a207b81312c7a95f" title="Get the state of outlet 7 (relay) as an integer." alt="" coords="211,883,334,909"/>
<area shape="poly" title=" " alt="" coords="419,865,335,885,334,879,418,860"/>
<area shape="rect" href="group__snmp2.html#ga219cf7f985467e92225ffcd452f81464" title="Get the state of outlet 8 (relay) as an integer." alt="" coords="211,933,334,960"/>
<area shape="poly" title=" " alt="" coords="459,869,410,897,354,924,323,935,321,930,352,919,408,892,457,865"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="5,629,145,656"/>
<area shape="poly" title=" " alt="" coords="404,636,145,643,145,638,404,631"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="9,85,141,112"/>
<area shape="poly" title=" " alt="" coords="412,259,399,248,385,228,378,208,377,167,375,130,367,113,351,97,324,81,294,71,262,67,230,66,167,74,116,87,114,82,166,69,229,61,262,61,295,66,326,76,355,93,372,110,380,128,383,167,383,207,390,226,403,245,416,255"/>
<area shape="poly" title=" " alt="" coords="414,209,399,198,384,180,377,161,373,125,371,88,364,71,351,52,337,41,320,33,323,28,340,37,355,49,369,68,376,87,379,124,382,160,389,177,403,194,417,204"/>
<area shape="poly" title=" " alt="" coords="474,467,422,518,390,545,354,569,329,580,327,576,352,564,386,541,419,514,470,463"/>
<area shape="rect" href="group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="195,427,350,453"/>
<area shape="poly" title=" " alt="" coords="385,443,351,443,351,437,385,437"/>
<area shape="rect" href="group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="206,107,340,149"/>
<area shape="poly" title=" " alt="" coords="402,419,399,416,377,384,368,352,368,321,372,290,377,258,377,227,370,195,351,163,339,152,342,148,355,160,375,193,383,226,382,259,377,290,373,321,373,352,382,382,403,413,405,415"/>
<area shape="poly" title=" " alt="" coords="441,462,402,481,379,500,354,518,328,530,325,525,352,514,376,496,400,476,439,457"/>
<area shape="rect" href="group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="235,376,311,403"/>
<area shape="poly" title=" " alt="" coords="418,425,311,400,312,395,419,420"/>
<area shape="rect" href="group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="235,224,311,251"/>
<area shape="poly" title=" " alt="" coords="403,420,399,416,384,397,376,378,374,339,372,301,365,283,351,265,332,252,311,244,312,239,335,247,355,261,370,280,377,300,379,339,382,377,389,395,403,413,407,416"/>
<area shape="rect" href="group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="211,477,334,504"/>
<area shape="poly" title=" " alt="" coords="419,460,335,479,334,474,418,455"/>
<area shape="rect" href="group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="211,275,334,301"/>
<area shape="poly" title=" " alt="" coords="405,421,399,417,387,404,380,391,374,365,368,339,362,327,351,315,334,304,336,300,355,311,366,324,373,338,379,364,385,389,392,401,403,413,408,417"/>
<area shape="rect" href="group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="211,173,334,200"/>
<area shape="poly" title=" " alt="" coords="402,419,399,416,381,391,373,365,371,339,374,314,376,288,375,263,368,239,351,214,333,201,336,197,355,210,373,236,381,263,382,289,379,314,377,339,378,364,385,388,403,413,406,416"/>
<area shape="rect" href="group__snmp2.html#gaf0d2f8746f0e3ef405ff4c684888a34b" title="Set the state of outlet 4 (relay) based on the input value." alt="" coords="211,325,334,352"/>
<area shape="poly" title=" " alt="" coords="411,423,400,417,384,404,375,391,366,378,352,366,328,355,331,350,354,362,370,375,379,388,388,401,402,412,413,418"/>
<area shape="poly" title=" " alt="" coords="198,464,195,467,181,485,174,504,171,541,168,580,161,599,147,619,131,631,128,627,143,615,156,597,163,578,166,541,168,502,176,483,191,464,194,460"/>
<area shape="poly" title=" " alt="" coords="190,118,141,111,141,106,191,113"/>
<area shape="poly" title=" " alt="" coords="406,363,403,366,385,390,378,415,377,439,379,465,382,490,381,516,373,542,355,569,337,582,334,577,351,565,368,540,375,515,376,490,374,465,371,440,373,414,381,388,399,362,402,359"/>
<area shape="poly" title=" " alt="" coords="413,361,402,366,388,378,379,391,370,404,354,417,331,429,328,424,352,412,366,400,375,388,384,374,400,362,411,356"/>
<area shape="poly" title=" " alt="" coords="403,319,399,315,384,296,376,277,373,239,371,201,364,182,351,163,338,152,341,148,355,160,369,180,376,200,378,238,381,276,389,294,403,311,407,315"/>
<area shape="poly" title=" " alt="" coords="407,363,403,366,389,384,382,402,379,440,377,479,370,498,355,518,339,530,336,525,351,514,365,496,372,477,374,439,376,401,384,381,399,362,403,359"/>
<area shape="poly" title=" " alt="" coords="419,359,312,383,311,378,418,353"/>
<area shape="poly" title=" " alt="" coords="411,321,400,316,384,303,375,290,366,277,352,265,311,248,313,243,354,260,370,274,379,287,388,299,402,311,413,317"/>
<area shape="poly" title=" " alt="" coords="408,362,403,366,392,378,385,390,379,415,373,441,366,454,355,467,336,479,334,475,351,463,362,451,368,439,374,414,380,388,387,375,399,362,405,358"/>
<area shape="poly" title=" " alt="" coords="418,324,334,305,335,299,419,319"/>
<area shape="poly" title=" " alt="" coords="405,320,399,315,387,303,380,290,374,264,368,238,362,226,351,214,334,203,336,198,355,210,366,223,373,236,379,262,385,288,392,300,403,311,408,315"/>
<area shape="poly" title=" " alt="" coords="396,341,335,341,335,336,396,336"/>
<area shape="rect" href="group__driver6.html#ga7f5d7a9f6239ad2bdd32a6c5bbb2396d" title="Resynchronize both MCP23017 shadow latches from hardware OLAT registers." alt="" coords="637,427,818,453"/>
<area shape="poly" title=" " alt="" coords="850,443,818,443,818,437,850,437"/>
<area shape="rect" href="group__driver6.html#ga0f044ade72bf35d0f080db7ecb4d114c" title="Configure pin direction on both MCP23017 chips." alt="" coords="648,477,807,504"/>
<area shape="poly" title=" " alt="" coords="861,493,807,493,807,488,861,488"/>
<area shape="rect" href="group__driver6.html#ga881bcc923a6be895363969bbff79dc1e" title="Atomically write a masked group of bits on both MCP23017 chips." alt="" coords="652,528,803,555"/>
<area shape="poly" title=" " alt="" coords="865,544,804,544,804,539,865,539"/>
<area shape="rect" href="group__driver3.html#gac1bd84c5a254283faacc776489f36625" title="Initialize the HLW8032 power measurement interface." alt="" coords="681,173,774,200"/>
<area shape="poly" title=" " alt="" coords="873,189,775,189,775,184,873,184"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="659,325,796,352"/>
<area shape="poly" title=" " alt="" coords="893,208,867,221,829,247,794,276,743,327,739,323,791,272,826,242,864,216,891,204"/>
<area shape="rect" href="group__driver3.html#ga317577d37ad844a15b55a8f5e55126f3" title="Select a channel on the multiplexer." alt="" coords="683,123,772,149"/>
<area shape="poly" title=" " alt="" coords="878,172,771,148,773,143,879,167"/>
<area shape="poly" title=" " alt="" coords="665,172,637,164,589,148,533,132,535,127,590,143,638,159,666,167"/>
<area shape="poly" title=" " alt="" coords="651,320,636,309,623,294,617,280,611,251,606,224,599,211,588,198,570,187,550,179,551,174,572,182,591,194,604,208,611,222,616,250,622,278,628,291,639,305,654,316"/>
<area shape="poly" title=" " alt="" coords="644,341,579,341,579,336,644,336"/>
<area shape="rect" href="group__driver6.html#gac00aa0678cb81d6bb6add9d0f8ab0de4" title="Write a value to a register on both MCP23017 chips." alt="" coords="659,579,796,605"/>
<area shape="poly" title=" " alt="" coords="872,595,797,595,797,589,872,589"/>
</map>
</div>

</div>
</div>
<a id="ga51d31ad5757c79b0f72f1e785115efed" name="ga51d31ad5757c79b0f72f1e785115efed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51d31ad5757c79b0f72f1e785115efed">&#9670;&#160;</a></span>write_port_from_shadow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool write_port_from_shadow </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>port_ab</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga51d31ad5757c79b0f72f1e785115efed_cgraph.png" border="0" usemap="#agroup__driver7_ga51d31ad5757c79b0f72f1e785115efed_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga51d31ad5757c79b0f72f1e785115efed_cgraph" id="agroup__driver7_ga51d31ad5757c79b0f72f1e785115efed_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,169,32"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="217,5,276,32"/>
<area shape="poly" title=" " alt="" coords="169,16,201,16,201,21,169,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver7_ga51d31ad5757c79b0f72f1e785115efed_icgraph.png" border="0" usemap="#agroup__driver7_ga51d31ad5757c79b0f72f1e785115efed_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver7_ga51d31ad5757c79b0f72f1e785115efed_icgraph" id="agroup__driver7_ga51d31ad5757c79b0f72f1e785115efed_icgraph">
<area shape="rect" title=" " alt="" coords="1251,301,1415,328"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="1098,301,1203,328"/>
<area shape="poly" title=" " alt="" coords="1236,317,1204,317,1204,312,1236,312"/>
<area shape="rect" href="group__driver7.html#ga17f51c0f9c1cdb9ed3825af73da10621" title="Atomically set/clear a group of bits on a given port from a mask." alt="" coords="880,479,1036,505"/>
<area shape="poly" title=" " alt="" coords="1299,339,1190,402,1122,437,1051,469,1017,481,1016,476,1049,464,1119,433,1188,397,1296,334"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="888,175,1028,201"/>
<area shape="poly" title=" " alt="" coords="1280,298,1174,259,1049,216,1011,205,1012,199,1051,211,1176,254,1282,293"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="456,23,534,49"/>
<area shape="poly" title=" " alt="" coords="1135,289,1101,227,1077,194,1048,165,986,122,917,89,844,66,770,50,699,41,634,36,534,36,534,31,634,31,700,36,771,45,845,61,919,84,989,117,1052,161,1081,191,1106,224,1140,286"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="659,327,796,353"/>
<area shape="poly" title=" " alt="" coords="1082,314,980,312,866,317,791,329,790,323,865,312,980,307,1082,309"/>
<area shape="rect" href="group__driver7.html#ga4ff3d9494f9b6420a1826db6d18d6b1a" title="Reads a value from a specified MCP23017 register (guarded)." alt="" coords="889,327,1027,353"/>
<area shape="poly" title=" " alt="" coords="1083,326,1028,334,1027,328,1082,321"/>
<area shape="rect" href="group__driver7.html#ga41f24ca3aebfd711c56f11bbb090f640" title="Re&#45;sync software shadows from hardware OLAT (optional utility)." alt="" coords="866,377,1050,404"/>
<area shape="poly" title=" " alt="" coords="1114,338,1051,368,1017,379,1015,374,1049,363,1111,333"/>
<area shape="rect" href="group__driver7.html#gab1ef2508fd1f0c02cb7ec65efe0cf682" title="Sets the direction of a specific MCP23017 pin." alt="" coords="877,428,1039,455"/>
<area shape="poly" title=" " alt="" coords="1133,342,1098,381,1051,418,1026,430,1024,425,1049,414,1094,377,1129,338"/>
<area shape="poly" title=" " alt="" coords="1135,343,1052,469,1031,480,1028,476,1048,465,1131,340"/>
<area shape="poly" title=" " alt="" coords="1129,291,1094,252,1049,216,1024,204,1026,199,1051,211,1098,248,1133,288"/>
<area shape="rect" href="group__driver7.html#gaf73b2d26f4d7ccd1f537fe726ba1f462" title="Writes a value to a specified MCP23017 register (guarded)." alt="" coords="887,225,1028,252"/>
<area shape="poly" title=" " alt="" coords="1105,297,1049,273,1000,255,1002,250,1051,268,1107,292"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="27,23,123,49"/>
<area shape="poly" title=" " alt="" coords="441,27,353,13,273,8,193,13,124,26,123,21,192,8,273,3,353,8,442,22"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="211,124,335,151"/>
<area shape="poly" title=" " alt="" coords="644,326,495,291,434,274,400,260,388,248,381,235,374,211,368,187,351,165,334,154,336,149,355,161,373,185,379,210,385,233,392,244,402,255,435,269,497,286,645,320"/>
<area shape="rect" href="group__snmp2.html#ga0771afab8e4d202bbc5540825f2afc3b" title="Read all 8 relay states and return as a bitmask." alt="" coords="450,647,540,673"/>
<area shape="poly" title=" " alt="" coords="648,360,639,367,619,397,610,426,609,455,612,484,616,514,617,545,610,578,591,611,568,633,540,649,538,644,565,629,587,608,605,576,611,545,611,515,607,485,604,455,605,425,614,394,635,364,644,356"/>
<area shape="rect" href="group__snmp2.html#ga8fce002de43387ac46d4fce1257762dc" title="Read relay state for channel ch (0..7) into SNMP buffer." alt="" coords="408,951,582,977"/>
<area shape="poly" title=" " alt="" coords="648,359,639,367,622,399,612,444,606,498,603,557,602,673,599,723,592,762,572,819,548,873,507,952,502,949,544,871,567,817,587,761,593,722,596,673,598,557,601,498,606,443,617,397,635,364,644,356"/>
<area shape="rect" href="group__webui5.html#gabec26dab8e118ff845c2fde12dc885cf" title="Handles the HTTP request for the status page." alt="" coords="419,723,571,749"/>
<area shape="poly" title=" " alt="" coords="647,360,639,367,614,406,604,445,605,483,611,521,618,561,621,601,614,643,591,687,569,709,541,725,539,720,565,705,587,684,609,641,616,601,613,561,606,522,599,483,599,444,609,404,635,364,644,356"/>
<area shape="rect" href="group__uart.html#ga5ece76769b8fd390a2b6133fa234a706" title="Handle UART GET_CH command." alt="" coords="428,555,562,597"/>
<area shape="poly" title=" " alt="" coords="647,361,639,367,626,381,619,395,612,422,607,453,592,487,560,525,526,556,523,552,556,522,587,484,602,451,607,421,614,393,622,378,636,363,644,357"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="207,73,338,100"/>
<area shape="poly" title=" " alt="" coords="690,321,642,294,588,268,535,252,490,247,446,237,424,226,399,209,381,185,374,160,368,137,351,114,334,103,336,98,355,110,373,134,380,159,386,182,403,205,426,222,448,232,490,242,536,247,590,263,645,289,692,316"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="205,23,341,49"/>
<area shape="poly" title=" " alt="" coords="696,319,635,266,613,241,588,220,561,207,537,201,492,197,447,192,424,182,399,165,387,152,380,139,374,113,368,87,362,75,351,63,334,52,337,48,355,59,366,72,373,86,379,112,385,137,392,149,403,161,426,177,449,186,492,192,538,196,563,202,591,215,617,237,639,262,699,315"/>
<area shape="rect" href="group__driver6.html#ga65d23685098ebf6b4f8bca89409a90ab" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="401,377,589,404"/>
<area shape="poly" title=" " alt="" coords="649,360,560,379,559,374,648,355"/>
<area shape="rect" href="group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="193,545,353,572"/>
<area shape="poly" title=" " alt="" coords="649,362,639,368,624,379,615,391,606,404,591,418,529,460,478,487,354,536,323,547,321,542,352,531,475,482,527,455,588,414,602,401,611,388,620,376,636,363,646,357"/>
<area shape="rect" href="group__driver6.html#ga889bb68e8929772801ed4cf4836a801d" title="Write both MCPs for one pin only if needed, and report asymmetry." alt="" coords="440,124,550,151"/>
<area shape="poly" title=" " alt="" coords="692,320,663,295,635,266,620,239,613,215,605,193,588,171,570,159,550,151,552,146,572,155,591,167,610,191,618,214,625,237,639,262,667,291,696,315"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="412,327,578,353"/>
<area shape="poly" title=" " alt="" coords="643,343,579,343,579,337,643,337"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="36,124,114,151"/>
<area shape="poly" title=" " alt="" coords="195,140,115,140,115,135,195,135"/>
<area shape="rect" href="group__snmp2.html#gaae5465f6b70d234aa38096a810f5fad8" title="SNMP getter for “all off” OID. Returns the same bitmask as get_allState()." alt="" coords="235,647,311,673"/>
<area shape="poly" title=" " alt="" coords="434,663,312,663,312,657,434,657"/>
<area shape="rect" href="group__snmp2.html#ga4ef4a107594909096b39054767b014f4" title="SNMP getter for “all on” OID. Returns the same bitmask as get_allState()." alt="" coords="235,697,311,724"/>
<area shape="poly" title=" " alt="" coords="435,676,312,705,311,699,434,671"/>
<area shape="rect" href="group__snmp2.html#gade7df1ea335261e38c6b1c2a61ed2ded" title="Get the state of the outlet (relay) as an integer." alt="" coords="211,799,334,825"/>
<area shape="poly" title=" " alt="" coords="470,941,419,890,386,863,352,840,327,828,329,824,354,835,390,859,422,886,474,937"/>
<area shape="rect" href="group__snmp2.html#gabbff421a9229e31a0cb05761892eec6e" title="Get the state of outlet 2 (relay) as an integer." alt="" coords="211,849,334,876"/>
<area shape="poly" title=" " alt="" coords="457,945,408,917,352,891,321,879,323,874,354,886,410,913,459,940"/>
<area shape="rect" href="group__snmp2.html#gae617a671308e5f001c463b793cfe7a03" title="Get the state of outlet 3 (relay) as an integer." alt="" coords="211,900,334,927"/>
<area shape="poly" title=" " alt="" coords="418,949,334,930,335,925,419,944"/>
<area shape="rect" href="group__snmp2.html#gac540752940c1f251d408f0954c14364d" title="Get the state of outlet 4 (relay) as an integer." alt="" coords="211,951,334,977"/>
<area shape="poly" title=" " alt="" coords="393,967,335,967,335,961,393,961"/>
<area shape="rect" href="group__snmp2.html#ga03c6e3cdf72aa5de6d3b9c1fc220add0" title="Get the state of outlet 5 (relay) as an integer." alt="" coords="211,1001,334,1028"/>
<area shape="poly" title=" " alt="" coords="419,984,335,1003,334,998,418,979"/>
<area shape="rect" href="group__snmp2.html#ga62abeab3df59bba29de074d147e280f2" title="Get the state of outlet 6 (relay) as an integer." alt="" coords="211,1052,334,1079"/>
<area shape="poly" title=" " alt="" coords="459,988,410,1016,354,1043,323,1054,321,1049,352,1038,408,1011,457,983"/>
<area shape="rect" href="group__snmp2.html#ga45aa10db7cd7f4c2a207b81312c7a95f" title="Get the state of outlet 7 (relay) as an integer." alt="" coords="211,1103,334,1129"/>
<area shape="poly" title=" " alt="" coords="474,991,422,1042,390,1069,354,1093,329,1105,327,1100,352,1088,386,1065,419,1038,470,987"/>
<area shape="rect" href="group__snmp2.html#ga219cf7f985467e92225ffcd452f81464" title="Get the state of outlet 8 (relay) as an integer." alt="" coords="211,1153,334,1180"/>
<area shape="poly" title=" " alt="" coords="482,992,432,1067,396,1108,354,1144,332,1155,330,1151,352,1139,392,1104,428,1064,477,990"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="5,620,145,647"/>
<area shape="poly" title=" " alt="" coords="407,755,357,759,302,759,246,753,192,739,157,720,127,696,84,649,88,645,130,692,160,716,194,734,247,748,302,754,357,754,406,749"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="9,440,141,467"/>
<area shape="poly" title=" " alt="" coords="413,599,362,607,305,609,247,603,192,586,153,561,121,529,97,495,81,468,86,466,101,492,125,525,156,557,194,582,248,598,305,604,361,601,412,594"/>
<area shape="poly" title=" " alt="" coords="202,72,123,51,124,46,204,66"/>
<area shape="poly" title=" " alt="" coords="402,370,399,367,381,342,373,316,371,290,374,264,376,239,375,214,368,189,351,165,334,152,337,148,355,161,373,187,381,213,382,239,379,265,377,290,378,315,385,339,403,364,406,366"/>
<area shape="rect" href="group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="195,393,350,420"/>
<area shape="poly" title=" " alt="" coords="386,401,351,404,351,398,385,396"/>
<area shape="rect" href="group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="206,276,340,319"/>
<area shape="poly" title=" " alt="" coords="415,374,400,368,375,351,352,333,329,322,332,317,354,328,378,346,402,363,418,369"/>
<area shape="poly" title=" " alt="" coords="451,414,426,430,403,450,388,472,381,493,373,514,355,535,336,547,333,542,351,531,368,512,376,491,383,470,399,446,423,426,448,410"/>
<area shape="rect" href="group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="235,343,311,369"/>
<area shape="poly" title=" " alt="" coords="391,377,311,365,312,359,391,372"/>
<area shape="rect" href="group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="235,444,311,471"/>
<area shape="poly" title=" " alt="" coords="434,412,312,449,311,444,433,407"/>
<area shape="rect" href="group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="211,175,334,201"/>
<area shape="poly" title=" " alt="" coords="403,371,399,367,384,348,376,329,374,290,372,252,365,234,351,215,333,203,336,199,355,211,370,231,377,251,379,290,382,327,389,346,403,364,407,367"/>
<area shape="rect" href="group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="211,495,334,521"/>
<area shape="poly" title=" " alt="" coords="459,415,403,450,379,469,354,485,327,497,325,492,352,480,376,464,399,446,456,410"/>
<area shape="rect" href="group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="211,225,334,252"/>
<area shape="poly" title=" " alt="" coords="405,372,399,367,387,355,380,342,374,316,368,290,362,278,351,266,334,255,336,250,355,262,366,275,373,288,379,314,385,340,392,352,403,363,408,367"/>
<area shape="poly" title=" " alt="" coords="200,430,194,434,172,456,151,480,119,533,96,584,83,621,78,619,91,582,114,531,147,477,168,452,191,430,197,425"/>
<area shape="poly" title=" " alt="" coords="201,329,194,333,161,360,131,390,88,441,84,438,127,386,158,356,191,329,198,324"/>
<area shape="poly" title=" " alt="" coords="413,321,399,310,385,291,378,272,375,235,372,199,365,182,351,165,334,153,337,148,355,161,369,179,377,198,380,235,383,271,390,289,403,306,417,317"/>
<area shape="poly" title=" " alt="" coords="427,361,402,368,354,384,319,395,317,390,352,379,400,363,426,355"/>
<area shape="poly" title=" " alt="" coords="407,326,340,313,341,308,408,321"/>
<area shape="poly" title=" " alt="" coords="406,364,403,367,388,387,380,407,379,449,378,492,371,514,355,535,339,547,336,543,351,532,366,511,373,491,374,449,375,406,383,385,399,364,402,361"/>
<area shape="poly" title=" " alt="" coords="397,350,312,356,311,351,396,345"/>
<area shape="poly" title=" " alt="" coords="410,363,403,367,387,383,379,400,371,417,355,434,334,446,312,453,310,448,332,441,351,430,367,414,374,397,383,380,399,363,408,358"/>
<area shape="poly" title=" " alt="" coords="417,322,399,310,381,286,375,261,368,238,351,215,334,204,336,200,355,211,373,236,380,260,386,283,403,306,420,318"/>
<area shape="poly" title=" " alt="" coords="407,364,403,367,391,381,384,395,379,424,375,454,367,470,355,485,336,497,333,493,351,481,363,467,369,453,374,423,379,393,386,378,399,363,404,360"/>
<area shape="poly" title=" " alt="" coords="426,323,400,310,385,299,375,288,366,277,352,266,327,255,329,250,354,262,369,273,379,284,388,295,402,306,428,318"/>
<area shape="rect" href="group__driver6.html#ga7f5d7a9f6239ad2bdd32a6c5bbb2396d" title="Resynchronize both MCP23017 shadow latches from hardware OLAT registers." alt="" coords="637,377,818,404"/>
<area shape="poly" title=" " alt="" coords="850,393,818,393,818,388,850,388"/>
<area shape="rect" href="group__driver6.html#ga0f044ade72bf35d0f080db7ecb4d114c" title="Configure pin direction on both MCP23017 chips." alt="" coords="648,428,807,455"/>
<area shape="poly" title=" " alt="" coords="861,444,807,444,807,439,861,439"/>
<area shape="rect" href="group__driver6.html#ga881bcc923a6be895363969bbff79dc1e" title="Atomically write a masked group of bits on both MCP23017 chips." alt="" coords="652,479,803,505"/>
<area shape="poly" title=" " alt="" coords="865,495,804,495,804,489,865,489"/>
<area shape="rect" href="group__driver3.html#gac1bd84c5a254283faacc776489f36625" title="Initialize the HLW8032 power measurement interface." alt="" coords="681,73,774,100"/>
<area shape="poly" title=" " alt="" coords="921,169,872,141,817,115,774,100,776,95,819,110,875,136,923,164"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="659,175,796,201"/>
<area shape="poly" title=" " alt="" coords="872,191,796,191,796,185,872,185"/>
<area shape="rect" href="group__driver3.html#ga317577d37ad844a15b55a8f5e55126f3" title="Select a channel on the multiplexer." alt="" coords="683,124,772,151"/>
<area shape="poly" title=" " alt="" coords="878,173,771,150,773,144,879,168"/>
<area shape="poly" title=" " alt="" coords="665,76,534,47,535,42,666,71"/>
<area shape="poly" title=" " alt="" coords="647,173,550,152,551,147,649,168"/>
<area shape="poly" title=" " alt="" coords="650,210,639,216,598,242,562,274,510,328,506,325,558,270,595,238,636,211,648,205"/>
<area shape="rect" href="group__driver3.html#ga204d3cdc833db3ce315ff247e3f79400" title="Read power measurements from the specified channel." alt="" coords="444,73,546,100"/>
<area shape="poly" title=" " alt="" coords="668,127,546,100,547,95,669,122"/>
<area shape="poly" title=" " alt="" coords="429,89,339,89,339,84,429,84"/>
<area shape="poly" title=" " alt="" coords="429,74,334,53,335,47,430,69"/>
<area shape="rect" href="group__driver6.html#gac00aa0678cb81d6bb6add9d0f8ab0de4" title="Write a value to a register on both MCP23017 chips." alt="" coords="659,225,796,252"/>
<area shape="poly" title=" " alt="" coords="872,241,797,241,797,236,872,236"/>
</map>
</div>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="ga1b35c1a632e4bd7e072175f861c1cd6e" name="ga1b35c1a632e4bd7e072175f861c1cd6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b35c1a632e4bd7e072175f861c1cd6e">&#9670;&#160;</a></span>s_inited</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool s_inited = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gaf4582ca5e22486b19316b310c5e90124" name="gaf4582ca5e22486b19316b310c5e90124"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf4582ca5e22486b19316b310c5e90124">&#9670;&#160;</a></span>s_olat_a</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t s_olat_a = 0x00</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga7192108d9b47ef396b9bba205be98fcf" name="ga7192108d9b47ef396b9bba205be98fcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7192108d9b47ef396b9bba205be98fcf">&#9670;&#160;</a></span>s_olat_b</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t s_olat_b = 0x00</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gac07c4c87ed47ec4ac2029dbc606f7ff8" name="gac07c4c87ed47ec4ac2029dbc606f7ff8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac07c4c87ed47ec4ac2029dbc606f7ff8">&#9670;&#160;</a></span>s_relay_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mutex_t s_relay_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>

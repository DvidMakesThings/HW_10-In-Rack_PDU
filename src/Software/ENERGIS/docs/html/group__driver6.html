<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ENERGIS - 8 Channel Managed PDU for 10 Inch Racks: 6. MCP23017 Dual Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ENERGIS - 8 Channel Managed PDU for 10 Inch Racks
   </div>
   <div id="projectbrief">A comprehensive power distribution unit for efficient energy management.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__driver6.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title"><ol type="1">
<li>MCP23017 Dual Driver </li>
</ol>
<div class="ingroups"><a class="el" href="group__drivers.html">Drivers</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Thin wrapper driver that controls both Relay and Display MCP23017 chips together.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for 6. MCP23017 Dual Driver:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6.png" border="0" usemap="#agroup____driver6" loading="lazy" alt=""/></div>
<map name="agroup____driver6" id="agroup____driver6">
<area shape="rect" title="Thin wrapper driver that controls both Relay and Display MCP23017 chips together." alt="" coords="117,5,288,32"/>
<area shape="rect" href="group__drivers.html" title="All hardware drivers for the Energis PDU." alt="" coords="5,5,69,32"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac00aa0678cb81d6bb6add9d0f8ab0de4" id="r_gac00aa0678cb81d6bb6add9d0f8ab0de4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac00aa0678cb81d6bb6add9d0f8ab0de4">mcp_dual_write_reg</a> (uint8_t reg, uint8_t value)</td></tr>
<tr class="memdesc:gac00aa0678cb81d6bb6add9d0f8ab0de4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a value to a register on both MCP23017 chips.  <br /></td></tr>
<tr class="memitem:ga0f044ade72bf35d0f080db7ecb4d114c" id="r_ga0f044ade72bf35d0f080db7ecb4d114c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0f044ade72bf35d0f080db7ecb4d114c">mcp_dual_set_direction</a> (uint8_t pin, uint8_t direction)</td></tr>
<tr class="memdesc:ga0f044ade72bf35d0f080db7ecb4d114c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure pin direction on both MCP23017 chips.  <br /></td></tr>
<tr class="memitem:gaea03923bde53674db77e1e4428b0e912" id="r_gaea03923bde53674db77e1e4428b0e912"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaea03923bde53674db77e1e4428b0e912">mcp_dual_write_pin</a> (uint8_t pin, uint8_t value)</td></tr>
<tr class="memdesc:gaea03923bde53674db77e1e4428b0e912"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a digital value to a pin on both MCP23017 chips.  <br /></td></tr>
<tr class="memitem:ga881bcc923a6be895363969bbff79dc1e" id="r_ga881bcc923a6be895363969bbff79dc1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga881bcc923a6be895363969bbff79dc1e">mcp_dual_write_mask</a> (uint8_t port_ab, uint8_t mask, uint8_t value_bits)</td></tr>
<tr class="memdesc:ga881bcc923a6be895363969bbff79dc1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically write a masked group of bits on both MCP23017 chips.  <br /></td></tr>
<tr class="memitem:ga7f5d7a9f6239ad2bdd32a6c5bbb2396d" id="r_ga7f5d7a9f6239ad2bdd32a6c5bbb2396d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7f5d7a9f6239ad2bdd32a6c5bbb2396d">mcp_dual_resync_from_hw</a> (void)</td></tr>
<tr class="memdesc:ga7f5d7a9f6239ad2bdd32a6c5bbb2396d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resynchronize both MCP23017 shadow latches from hardware OLAT registers.  <br /></td></tr>
<tr class="memitem:ga889bb68e8929772801ed4cf4836a801d" id="r_ga889bb68e8929772801ed4cf4836a801d"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga889bb68e8929772801ed4cf4836a801d">set_relay_state</a> (uint8_t pin, uint8_t value, uint8_t *asym_before_out, uint8_t *asym_after_out)</td></tr>
<tr class="memdesc:ga889bb68e8929772801ed4cf4836a801d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write both MCPs for one pin only if needed, and report asymmetry.  <br /></td></tr>
<tr class="memitem:gace05145c93133aa7e479bec6c0613677" id="r_gace05145c93133aa7e479bec6c0613677"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gace05145c93133aa7e479bec6c0613677">set_relay_state_with_tag</a> (const char *caller_tag, uint8_t pin, uint8_t value, uint8_t *asym_before_out, uint8_t *asym_after_out)</td></tr>
<tr class="memdesc:gace05145c93133aa7e479bec6c0613677"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write both MCPs for one pin only if needed, and report asymmetry, with logging.  <br /></td></tr>
<tr class="memitem:ga65d23685098ebf6b4f8bca89409a90ab" id="r_ga65d23685098ebf6b4f8bca89409a90ab"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga65d23685098ebf6b4f8bca89409a90ab">mcp_dual_asymmetry_mask</a> (void)</td></tr>
<tr class="memdesc:ga65d23685098ebf6b4f8bca89409a90ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute full-chip asymmetry mask (1 bits where relay!=display).  <br /></td></tr>
<tr class="memitem:gae49e94d74eefe80449e590bf8798fb17" id="r_gae49e94d74eefe80449e590bf8798fb17"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae49e94d74eefe80449e590bf8798fb17">mcp_dual_guardian_poll</a> (void)</td></tr>
<tr class="memdesc:gae49e94d74eefe80449e590bf8798fb17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Periodic asymmetry guardian for the two MCP23017s.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gaef34900fa66f22b10508520bf1f4e9f0" id="r_gaef34900fa66f22b10508520bf1f4e9f0"><td class="memItemLeft" align="right" valign="top">static atomic_uint_fast32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaef34900fa66f22b10508520bf1f4e9f0">g_set_relay_write_count</a> = 0</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Thin wrapper driver that controls both Relay and Display MCP23017 chips together. </p>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-08-25</dd></dl>
<p>This driver simply forwards calls to both the Relay and Display MCP23017 robust drivers. It ensures both chips are always updated consistently, using the already shadow-latched and mutex-protected single drivers.</p>
<p>@project ENERGIS - The Managed PDU Project for 10-Inch Rack @github <a href="https://github.com/DvidMakesThings/HW_10-In-Rack_PDU">https://github.com/DvidMakesThings/HW_10-In-Rack_PDU</a></p>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-08-25</dd></dl>
<p>This driver provides convenience functions to operate on both the Relay MCP23017 and the Display MCP23017 simultaneously. It reuses the robust, shadow-latched single-chip drivers internally.</p>
<p>@project ENERGIS - The Managed PDU Project for 10-Inch Rack @github <a href="https://github.com/DvidMakesThings/HW_10-In-Rack_PDU">https://github.com/DvidMakesThings/HW_10-In-Rack_PDU</a> </p>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga65d23685098ebf6b4f8bca89409a90ab" name="ga65d23685098ebf6b4f8bca89409a90ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga65d23685098ebf6b4f8bca89409a90ab">&#9670;&#160;</a></span>mcp_dual_asymmetry_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t mcp_dual_asymmetry_mask </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute full-chip asymmetry mask (1 bits where relay!=display). </p>
<dl class="section return"><dt>Returns</dt><dd>uint16_t 16-bit mask: bit n = 1 iff relay[n] != display[n].</dd></dl>
<p>Compares all 16 outputs (A0..A7, B0..B7) between Relay and Display chips.</p>
<p>Bit mapping in the returned mask: bit 0..7 -&gt; Port A pins 0..7 bit 8..15 -&gt; Port B pins 0..7</p>
<dl class="section return"><dt>Returns</dt><dd>uint16_t 16-bit mask of asymmetric pins (0 = identical, 1 = mismatch). </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_ga65d23685098ebf6b4f8bca89409a90ab_cgraph.png" border="0" usemap="#agroup__driver6_ga65d23685098ebf6b4f8bca89409a90ab_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_ga65d23685098ebf6b4f8bca89409a90ab_cgraph" id="agroup__driver6_ga65d23685098ebf6b4f8bca89409a90ab_cgraph">
<area shape="rect" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="5,233,194,260"/>
<area shape="rect" href="group__driver5.html#gab5dab0ee57bf9b5391fbf6b96be35677" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="242,157,392,184"/>
<area shape="poly" title=" " alt="" coords="139,230,261,187,263,192,141,235"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="248,309,386,336"/>
<area shape="poly" title=" " alt="" coords="141,258,263,301,261,306,139,263"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="660,5,716,32"/>
<area shape="poly" title=" " alt="" coords="335,155,381,124,439,92,493,70,549,51,644,25,646,31,550,57,495,75,441,97,384,128,338,159"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="440,107,558,133"/>
<area shape="poly" title=" " alt="" coords="367,154,433,135,435,141,368,159"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="649,157,727,184"/>
<area shape="poly" title=" " alt="" coords="392,168,634,168,634,173,392,173"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="642,208,734,235"/>
<area shape="poly" title=" " alt="" coords="393,178,628,211,627,216,392,184"/>
<area shape="poly" title=" " alt="" coords="518,104,557,77,605,48,644,31,646,36,608,53,560,81,521,108"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="818,81,877,108"/>
<area shape="poly" title=" " alt="" coords="547,103,606,92,712,86,802,89,802,94,712,92,607,97,549,109"/>
<area shape="poly" title=" " alt="" coords="553,131,635,154,634,159,551,137"/>
<area shape="poly" title=" " alt="" coords="518,132,557,163,608,194,629,203,627,208,605,198,554,167,515,136"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="606,107,770,133"/>
<area shape="poly" title=" " alt="" coords="559,117,591,117,591,123,559,123"/>
<area shape="poly" title=" " alt="" coords="770,104,802,99,803,104,770,110"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="660,259,716,285"/>
<area shape="poly" title=" " alt="" coords="385,309,440,301,644,275,645,280,440,307,386,315"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="649,309,727,336"/>
<area shape="poly" title=" " alt="" coords="386,320,634,320,634,325,386,325"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="446,360,552,387"/>
<area shape="poly" title=" " alt="" coords="368,334,435,353,433,358,367,339"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="642,461,734,488"/>
<area shape="poly" title=" " alt="" coords="338,334,384,365,441,396,539,433,628,458,627,464,537,438,439,401,381,369,335,339"/>
<area shape="poly" title=" " alt="" coords="515,357,554,326,605,295,644,280,646,285,608,300,557,331,518,362"/>
<area shape="poly" title=" " alt="" coords="551,357,634,334,635,339,553,362"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="818,385,877,412"/>
<area shape="poly" title=" " alt="" coords="552,374,803,393,802,398,552,380"/>
<area shape="poly" title=" " alt="" coords="518,385,557,416,608,447,629,456,627,461,605,452,554,420,515,389"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="606,411,770,437"/>
<area shape="poly" title=" " alt="" coords="553,385,622,404,620,409,551,390"/>
<area shape="poly" title=" " alt="" coords="770,408,802,403,803,408,770,414"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_ga65d23685098ebf6b4f8bca89409a90ab_icgraph.png" border="0" usemap="#agroup__driver6_ga65d23685098ebf6b4f8bca89409a90ab_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_ga65d23685098ebf6b4f8bca89409a90ab_icgraph" id="agroup__driver6_ga65d23685098ebf6b4f8bca89409a90ab_icgraph">
<area shape="rect" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="900,351,1088,377"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="710,5,834,32"/>
<area shape="poly" title=" " alt="" coords="986,336,972,276,947,198,929,156,907,116,881,79,850,46,833,35,836,30,854,42,885,75,912,113,934,154,952,196,977,274,991,335"/>
<area shape="rect" href="group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="694,56,850,83"/>
<area shape="poly" title=" " alt="" coords="983,337,967,285,940,221,902,154,878,123,850,97,832,85,835,81,854,93,882,120,906,151,945,218,972,283,988,335"/>
<area shape="rect" href="group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="705,107,839,149"/>
<area shape="poly" title=" " alt="" coords="978,338,958,300,929,253,893,206,850,163,833,152,836,148,854,159,897,202,933,250,962,297,983,336"/>
<area shape="rect" href="group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="692,173,852,200"/>
<area shape="poly" title=" " alt="" coords="973,339,922,277,888,243,851,214,828,203,830,198,853,210,892,239,926,273,977,336"/>
<area shape="rect" href="group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="734,224,810,251"/>
<area shape="poly" title=" " alt="" coords="964,342,913,303,851,265,810,249,812,244,853,260,916,299,967,338"/>
<area shape="rect" href="group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="734,275,810,301"/>
<area shape="poly" title=" " alt="" coords="940,347,851,316,810,302,811,297,853,311,942,342"/>
<area shape="rect" href="group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="710,325,834,352"/>
<area shape="poly" title=" " alt="" coords="884,354,834,348,834,343,885,349"/>
<area shape="rect" href="group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="710,376,834,403"/>
<area shape="poly" title=" " alt="" coords="885,379,834,385,834,380,884,374"/>
<area shape="rect" href="group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="710,427,834,453"/>
<area shape="poly" title=" " alt="" coords="942,386,853,417,818,429,817,424,851,412,940,381"/>
<area shape="rect" href="group__snmp2.html#gaf0d2f8746f0e3ef405ff4c684888a34b" title="Set the state of outlet 4 (relay) based on the input value." alt="" coords="710,477,834,504"/>
<area shape="poly" title=" " alt="" coords="967,390,916,429,853,468,826,479,824,474,851,463,913,425,964,386"/>
<area shape="rect" href="group__snmp2.html#ga06d40e363a3333a7e10223aaa792eef0" title="Set the state of outlet 5 (relay) based on the input value." alt="" coords="710,528,834,555"/>
<area shape="poly" title=" " alt="" coords="977,392,926,455,892,489,853,518,830,530,828,525,851,514,888,485,922,451,973,389"/>
<area shape="rect" href="group__snmp2.html#ga085a305fa41615e4791de5e3884226af" title="Set the state of outlet 6 (relay) based on the input value." alt="" coords="710,579,834,605"/>
<area shape="poly" title=" " alt="" coords="983,392,964,432,935,479,898,527,854,569,833,580,830,576,850,565,894,524,931,476,959,429,979,390"/>
<area shape="rect" href="group__snmp2.html#gac79033b7ad83d07369d0e2b5f4d49b9d" title="Set the state of outlet 7 (relay) based on the input value." alt="" coords="710,629,834,656"/>
<area shape="poly" title=" " alt="" coords="987,393,970,442,943,503,904,565,880,594,854,619,835,631,832,626,850,615,876,590,900,562,938,500,965,440,982,391"/>
<area shape="rect" href="group__snmp2.html#gabee06a703d75e5a63c2bde983c5fab2f" title="Set the state of outlet 8 (relay) based on the input value." alt="" coords="710,680,834,707"/>
<area shape="poly" title=" " alt="" coords="990,394,976,451,950,526,932,565,910,603,884,639,854,670,836,682,833,677,850,666,880,635,905,600,927,562,945,524,971,450,985,392"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="535,5,613,32"/>
<area shape="poly" title=" " alt="" coords="694,21,614,21,614,16,694,16"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="336,5,456,32"/>
<area shape="poly" title=" " alt="" coords="519,21,457,21,457,16,519,16"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="180,5,258,32"/>
<area shape="poly" title=" " alt="" coords="321,21,258,21,258,16,321,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,56,102,83"/>
<area shape="poly" title=" " alt="" coords="166,37,100,58,98,53,165,32"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="504,56,644,83"/>
<area shape="poly" title=" " alt="" coords="679,72,644,72,644,67,679,67"/>
<area shape="rect" href="group__main02.html#gad25e95c5993e865b3f941472b7a328e0" title="Core 1 task for handling SNMP and HTTP server." alt="" coords="354,56,439,83"/>
<area shape="poly" title=" " alt="" coords="489,72,439,72,439,67,489,67"/>
<area shape="poly" title=" " alt="" coords="338,72,102,72,102,67,338,67"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="508,113,640,140"/>
<area shape="poly" title=" " alt="" coords="689,130,640,130,640,124,690,125"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="150,108,288,135"/>
<area shape="poly" title=" " alt="" coords="493,128,289,125,289,120,493,123"/>
<area shape="poly" title=" " alt="" coords="159,105,98,86,99,81,161,100"/>
</map>
</div>

</div>
</div>
<a id="gae49e94d74eefe80449e590bf8798fb17" name="gae49e94d74eefe80449e590bf8798fb17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae49e94d74eefe80449e590bf8798fb17">&#9670;&#160;</a></span>mcp_dual_guardian_poll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_dual_guardian_poll </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Periodic asymmetry guardian for the two MCP23017s. </p>
<p>Reads <a class="el" href="#ga65d23685098ebf6b4f8bca89409a90ab">mcp_dual_asymmetry_mask()</a> on a short interval. If any monitored bit differs (relay != display), it logs once per poll. When <a class="el" href="_c_o_n_f_i_g_8h.html#a60e909b1e096b91aca62c79a0f2dafec">DUAL_GUARD_AUTOHEAL</a> is 1, it sets BOTH chips to the relay’s current value for each mismatched pin via set_relay_state_tag(<a class="el" href="_m_c_p23017__display__driver_8h.html#aa67eba1654d4d6b8e80d5915dcfb6327">GUARDIAN_TAG</a>,...).</p>
<p>Only pins filtered by <a class="el" href="_c_o_n_f_i_g_8h.html#ac50d8aac0cb6f24fb06ba070410b003c">DUAL_GUARD_MASK</a> are considered (default: IO0..7).</p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_gae49e94d74eefe80449e590bf8798fb17_cgraph.png" border="0" usemap="#agroup__driver6_gae49e94d74eefe80449e590bf8798fb17_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_gae49e94d74eefe80449e590bf8798fb17_cgraph" id="agroup__driver6_gae49e94d74eefe80449e590bf8798fb17_cgraph">
<area shape="rect" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="5,284,166,311"/>
<area shape="rect" href="group__driver6.html#ga65d23685098ebf6b4f8bca89409a90ab" title="Compute full&#45;chip asymmetry mask (1 bits where relay!=display)." alt="" coords="428,233,616,260"/>
<area shape="poly" title=" " alt="" coords="166,285,412,257,413,262,166,291"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="672,183,810,209"/>
<area shape="poly" title=" " alt="" coords="122,281,213,252,333,228,454,212,657,196,657,201,454,217,334,233,214,257,124,286"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="214,309,380,336"/>
<area shape="poly" title=" " alt="" coords="167,304,198,308,198,313,166,310"/>
<area shape="rect" href="group__util2.html#gae73b9c33649b5f5f7388f1b4fe42d32d" title="Sets the error state on the display." alt="" coords="263,411,330,437"/>
<area shape="poly" title=" " alt="" coords="111,309,261,400,259,405,108,313"/>
<area shape="rect" href="group__driver5.html#gab5dab0ee57bf9b5391fbf6b96be35677" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="666,385,816,412"/>
<area shape="poly" title=" " alt="" coords="545,258,710,374,706,379,542,263"/>
<area shape="poly" title=" " alt="" coords="583,230,665,211,666,216,584,235"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="1086,360,1142,387"/>
<area shape="poly" title=" " alt="" coords="816,383,865,377,976,371,1070,370,1070,376,976,377,866,383,817,389"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="866,487,984,513"/>
<area shape="poly" title=" " alt="" coords="768,410,887,477,884,481,766,415"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="1075,537,1152,564"/>
<area shape="poly" title=" " alt="" coords="770,410,795,427,820,448,835,469,842,489,850,507,867,523,914,544,965,554,1015,557,1059,555,1059,561,1015,563,964,560,912,549,864,528,846,510,837,491,830,472,816,451,792,431,767,415"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="1068,436,1159,463"/>
<area shape="poly" title=" " alt="" coords="817,406,1053,439,1052,444,816,412"/>
<area shape="poly" title=" " alt="" coords="943,484,1031,422,1075,393,1078,397,1033,426,946,488"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="1243,537,1303,564"/>
<area shape="poly" title=" " alt="" coords="985,499,1084,506,1196,523,1229,532,1228,537,1195,528,1083,511,984,504"/>
<area shape="poly" title=" " alt="" coords="978,511,1061,534,1059,539,977,517"/>
<area shape="poly" title=" " alt="" coords="977,483,1052,463,1054,468,978,489"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="1032,588,1195,615"/>
<area shape="poly" title=" " alt="" coords="944,512,983,543,1033,574,1047,580,1045,585,1031,578,980,547,940,516"/>
<area shape="poly" title=" " alt="" coords="1159,585,1195,573,1227,563,1229,568,1196,579,1160,590"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="1086,5,1142,32"/>
<area shape="poly" title=" " alt="" coords="747,181,764,152,790,115,824,78,864,48,917,27,972,16,1025,12,1070,13,1070,18,1025,18,973,22,918,33,867,53,827,82,794,119,768,155,752,184"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="1075,81,1152,108"/>
<area shape="poly" title=" " alt="" coords="749,180,793,125,826,96,865,74,915,61,967,59,1017,65,1061,75,1059,80,1016,70,967,65,916,66,867,78,829,100,797,129,753,184"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="872,132,978,159"/>
<area shape="poly" title=" " alt="" coords="792,179,858,161,860,166,793,185"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="1068,183,1159,209"/>
<area shape="poly" title=" " alt="" coords="810,193,1052,193,1052,199,810,199"/>
<area shape="poly" title=" " alt="" coords="943,129,1031,67,1075,38,1078,43,1033,72,946,134"/>
<area shape="poly" title=" " alt="" coords="977,129,1059,106,1061,111,978,134"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="1243,183,1303,209"/>
<area shape="poly" title=" " alt="" coords="978,144,1079,151,1196,168,1229,177,1228,182,1195,173,1079,156,978,149"/>
<area shape="poly" title=" " alt="" coords="978,157,1054,177,1052,182,977,162"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="1032,233,1195,260"/>
<area shape="poly" title=" " alt="" coords="944,157,983,188,1033,219,1047,225,1045,230,1031,224,980,192,940,161"/>
<area shape="poly" title=" " alt="" coords="1159,230,1195,219,1227,208,1229,213,1196,224,1160,235"/>
<area shape="poly" title=" " alt="" coords="328,334,374,354,429,371,485,382,544,389,651,396,650,401,543,394,485,387,427,376,373,359,326,339"/>
<area shape="poly" title=" " alt="" coords="380,321,435,318,495,309,557,294,615,270,630,258,639,246,648,233,663,219,672,214,675,219,666,224,652,236,643,249,634,262,618,274,559,299,497,314,436,323,381,327"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="454,335,590,361"/>
<area shape="poly" title=" " alt="" coords="381,329,439,336,438,341,380,335"/>
<area shape="rect" href="group__driver5.html#ga1f2aea8f1cb5fb271e2b68ab119fa503" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="664,461,818,488"/>
<area shape="poly" title=" " alt="" coords="548,359,705,451,702,456,546,364"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="671,233,811,260"/>
<area shape="poly" title=" " alt="" coords="568,332,615,314,704,266,706,271,617,318,570,337"/>
<area shape="poly" title=" " alt="" coords="818,483,850,487,850,492,818,488"/>
<area shape="poly" title=" " alt="" coords="756,486,801,529,832,551,867,567,916,577,968,578,1017,573,1060,564,1061,569,1018,578,968,583,916,583,865,572,830,555,798,533,752,490"/>
<area shape="poly" title=" " alt="" coords="818,467,1052,451,1053,456,818,472"/>
<area shape="poly" title=" " alt="" coords="754,487,799,537,831,564,867,584,903,596,941,604,1017,608,1016,613,941,609,902,601,865,589,828,568,795,541,750,490"/>
<area shape="poly" title=" " alt="" coords="799,231,816,219,827,207,833,195,838,168,844,142,851,130,864,118,887,104,912,94,963,83,1015,81,1060,83,1059,89,1015,86,964,88,913,99,889,109,867,122,856,133,849,144,843,170,838,196,831,210,819,223,802,235"/>
<area shape="poly" title=" " alt="" coords="790,230,816,219,858,193,894,166,898,171,861,198,819,224,792,235"/>
<area shape="poly" title=" " alt="" coords="811,235,1052,202,1053,207,812,240"/>
<area shape="poly" title=" " alt="" coords="812,256,866,263,925,266,984,263,1016,260,1016,265,984,268,925,271,865,268,811,262"/>
<area shape="poly" title=" " alt="" coords="331,425,649,462,649,467,331,430"/>
</map>
</div>

</div>
</div>
<a id="ga7f5d7a9f6239ad2bdd32a6c5bbb2396d" name="ga7f5d7a9f6239ad2bdd32a6c5bbb2396d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7f5d7a9f6239ad2bdd32a6c5bbb2396d">&#9670;&#160;</a></span>mcp_dual_resync_from_hw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_dual_resync_from_hw </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resynchronize both MCP23017 shadow latches from hardware OLAT registers. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_ga7f5d7a9f6239ad2bdd32a6c5bbb2396d_cgraph.png" border="0" usemap="#agroup__driver6_ga7f5d7a9f6239ad2bdd32a6c5bbb2396d_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_ga7f5d7a9f6239ad2bdd32a6c5bbb2396d_cgraph" id="agroup__driver6_ga7f5d7a9f6239ad2bdd32a6c5bbb2396d_cgraph">
<area shape="rect" title="Resynchronize both MCP23017 shadow latches from hardware OLAT registers." alt="" coords="5,233,186,260"/>
<area shape="rect" href="group__driver5.html#ga39af0b095f233b2e5f7cddb401bd4f85" title="Re&#45;sync software shadows from hardware OLAT (optional utility)." alt="" coords="256,149,396,192"/>
<area shape="poly" title=" " alt="" coords="138,230,244,195,245,200,139,235"/>
<area shape="rect" href="group__driver7.html#ga41f24ca3aebfd711c56f11bbb090f640" title="Re&#45;sync software shadows from hardware OLAT (optional utility)." alt="" coords="234,309,418,336"/>
<area shape="poly" title=" " alt="" coords="139,258,269,301,268,306,138,263"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="686,5,742,32"/>
<area shape="poly" title=" " alt="" coords="361,147,409,119,465,92,575,53,670,26,671,31,576,58,467,97,412,124,363,151"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="466,107,584,133"/>
<area shape="poly" title=" " alt="" coords="396,150,454,135,456,140,397,155"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="675,157,753,184"/>
<area shape="poly" title=" " alt="" coords="397,168,660,168,660,173,397,173"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="668,208,760,235"/>
<area shape="poly" title=" " alt="" coords="397,177,653,211,653,216,396,182"/>
<area shape="poly" title=" " alt="" coords="544,104,583,77,631,48,670,31,672,36,634,53,586,81,547,108"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="844,81,903,108"/>
<area shape="poly" title=" " alt="" coords="573,103,632,92,738,86,828,89,828,94,738,92,633,97,575,109"/>
<area shape="poly" title=" " alt="" coords="579,131,661,154,660,159,577,137"/>
<area shape="poly" title=" " alt="" coords="544,132,583,163,634,194,655,203,653,208,631,198,580,167,541,136"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="632,107,796,133"/>
<area shape="poly" title=" " alt="" coords="585,117,617,117,617,123,585,123"/>
<area shape="poly" title=" " alt="" coords="796,104,828,99,829,104,796,110"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="686,259,742,285"/>
<area shape="poly" title=" " alt="" coords="418,308,466,301,670,275,671,280,466,307,419,313"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="675,309,753,336"/>
<area shape="poly" title=" " alt="" coords="419,320,660,320,660,325,419,325"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="472,360,578,387"/>
<area shape="poly" title=" " alt="" coords="382,334,458,354,457,359,381,339"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="668,461,760,488"/>
<area shape="poly" title=" " alt="" coords="350,334,403,365,467,396,565,432,654,458,653,463,563,437,465,401,400,369,348,339"/>
<area shape="poly" title=" " alt="" coords="541,357,580,326,631,295,670,280,672,285,634,300,583,331,544,362"/>
<area shape="poly" title=" " alt="" coords="577,357,660,334,661,339,579,362"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="844,385,903,412"/>
<area shape="poly" title=" " alt="" coords="578,374,829,393,828,398,578,380"/>
<area shape="poly" title=" " alt="" coords="544,385,583,416,634,447,655,456,653,461,631,452,580,420,541,389"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="632,411,796,437"/>
<area shape="poly" title=" " alt="" coords="579,385,648,404,646,409,577,390"/>
<area shape="poly" title=" " alt="" coords="796,408,828,403,829,408,796,414"/>
</map>
</div>

</div>
</div>
<a id="ga0f044ade72bf35d0f080db7ecb4d114c" name="ga0f044ade72bf35d0f080db7ecb4d114c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0f044ade72bf35d0f080db7ecb4d114c">&#9670;&#160;</a></span>mcp_dual_set_direction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_dual_set_direction </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>direction</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure pin direction on both MCP23017 chips. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>Pin number (0-15) </td></tr>
    <tr><td class="paramname">direction</td><td>0 = output, 1 = input </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_ga0f044ade72bf35d0f080db7ecb4d114c_cgraph.png" border="0" usemap="#agroup__driver6_ga0f044ade72bf35d0f080db7ecb4d114c_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_ga0f044ade72bf35d0f080db7ecb4d114c_cgraph" id="agroup__driver6_ga0f044ade72bf35d0f080db7ecb4d114c_cgraph">
<area shape="rect" title="Configure pin direction on both MCP23017 chips." alt="" coords="5,288,164,315"/>
<area shape="rect" href="group__driver5.html#ga9c72d2272fc0f47e7444780804185ce1" title="Sets the direction of a specific MCP23017 pin." alt="" coords="212,160,387,187"/>
<area shape="poly" title=" " alt="" coords="108,285,260,193,263,198,110,290"/>
<area shape="rect" href="group__driver7.html#gab1ef2508fd1f0c02cb7ec65efe0cf682" title="Sets the direction of a specific MCP23017 pin." alt="" coords="218,376,380,403"/>
<area shape="poly" title=" " alt="" coords="120,313,252,367,250,372,118,318"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="655,34,711,60"/>
<area shape="poly" title=" " alt="" coords="335,157,434,120,639,56,641,62,436,125,337,162"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="813,84,872,111"/>
<area shape="poly" title=" " alt="" coords="317,158,364,125,432,84,513,45,557,30,601,19,684,4,721,5,766,19,800,42,826,70,822,73,796,46,764,24,720,11,685,9,602,24,558,35,515,50,434,89,367,129,320,162"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="435,135,553,162"/>
<area shape="poly" title=" " alt="" coords="387,160,419,155,420,161,388,165"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="644,186,722,212"/>
<area shape="poly" title=" " alt="" coords="388,177,629,193,629,198,387,182"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="637,236,729,263"/>
<area shape="poly" title=" " alt="" coords="371,185,623,235,621,240,370,190"/>
<area shape="poly" title=" " alt="" coords="513,132,552,105,600,77,639,59,641,64,603,81,555,109,516,136"/>
<area shape="poly" title=" " alt="" coords="547,132,601,120,706,106,797,98,797,103,707,111,602,126,549,137"/>
<area shape="poly" title=" " alt="" coords="548,160,630,182,629,187,546,165"/>
<area shape="poly" title=" " alt="" coords="513,160,552,191,603,222,624,231,622,236,600,227,549,195,510,164"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="601,135,765,162"/>
<area shape="poly" title=" " alt="" coords="554,146,586,146,586,151,554,151"/>
<area shape="poly" title=" " alt="" coords="727,132,797,109,799,114,728,137"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="655,338,711,364"/>
<area shape="poly" title=" " alt="" coords="381,379,639,353,640,358,381,384"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="813,388,872,415"/>
<area shape="poly" title=" " alt="" coords="329,373,407,342,459,326,517,311,579,302,642,299,705,305,766,323,800,346,826,374,822,377,796,350,764,328,704,311,642,304,579,307,518,317,460,331,408,347,331,378"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="644,490,722,516"/>
<area shape="poly" title=" " alt="" coords="327,401,377,426,436,450,538,477,629,493,629,498,537,482,434,455,374,431,325,406"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="442,414,547,440"/>
<area shape="poly" title=" " alt="" coords="373,401,427,411,426,417,372,406"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="637,540,729,567"/>
<area shape="poly" title=" " alt="" coords="317,401,368,442,401,465,436,485,484,504,533,520,623,541,622,546,531,525,482,509,434,489,398,469,365,447,314,405"/>
<area shape="poly" title=" " alt="" coords="528,410,600,380,639,365,641,370,602,385,530,415"/>
<area shape="poly" title=" " alt="" coords="547,420,797,402,798,407,547,426"/>
<area shape="poly" title=" " alt="" coords="523,438,602,475,630,485,628,490,600,480,521,443"/>
<area shape="poly" title=" " alt="" coords="508,439,547,482,574,506,603,526,624,536,621,541,600,531,570,510,543,486,504,443"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="601,439,765,466"/>
<area shape="poly" title=" " alt="" coords="548,431,586,437,585,442,547,437"/>
<area shape="poly" title=" " alt="" coords="727,436,797,413,799,418,728,441"/>
</map>
</div>

</div>
</div>
<a id="ga881bcc923a6be895363969bbff79dc1e" name="ga881bcc923a6be895363969bbff79dc1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga881bcc923a6be895363969bbff79dc1e">&#9670;&#160;</a></span>mcp_dual_write_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_dual_write_mask </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>port_ab</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>mask</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>value_bits</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically write a masked group of bits on both MCP23017 chips. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port_ab</td><td>0 = Port A, 1 = Port B </td></tr>
    <tr><td class="paramname">mask</td><td>Bit mask to apply </td></tr>
    <tr><td class="paramname">value_bits</td><td>Bits to set </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_ga881bcc923a6be895363969bbff79dc1e_cgraph.png" border="0" usemap="#agroup__driver6_ga881bcc923a6be895363969bbff79dc1e_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_ga881bcc923a6be895363969bbff79dc1e_cgraph" id="agroup__driver6_ga881bcc923a6be895363969bbff79dc1e_cgraph">
<area shape="rect" title="Atomically write a masked group of bits on both MCP23017 chips." alt="" coords="5,259,157,285"/>
<area shape="rect" href="group__driver5.html#gabab90d2661d617d3ea609d7a3a5a9042" title="Atomically set/clear a group of bits on a given port from a mask." alt="" coords="205,157,373,184"/>
<area shape="poly" title=" " alt="" coords="109,256,245,189,248,193,112,261"/>
<area shape="rect" href="group__driver7.html#ga17f51c0f9c1cdb9ed3825af73da10621" title="Atomically set/clear a group of bits on a given port from a mask." alt="" coords="211,360,366,387"/>
<area shape="poly" title=" " alt="" coords="112,283,248,351,245,355,109,288"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="421,107,539,133"/>
<area shape="poly" title=" " alt="" coords="342,154,412,135,413,140,343,159"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="630,157,708,184"/>
<area shape="poly" title=" " alt="" coords="373,168,615,168,615,173,373,173"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="623,208,715,235"/>
<area shape="poly" title=" " alt="" coords="374,179,608,211,608,216,373,184"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="587,5,751,32"/>
<area shape="poly" title=" " alt="" coords="309,154,359,124,420,92,510,59,594,34,596,39,512,64,422,97,361,129,312,159"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="641,56,697,83"/>
<area shape="poly" title=" " alt="" coords="532,103,625,78,627,83,534,109"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="799,56,858,83"/>
<area shape="poly" title=" " alt="" coords="540,116,639,109,750,92,783,83,784,88,751,97,639,114,540,121"/>
<area shape="poly" title=" " alt="" coords="534,131,616,154,615,159,532,137"/>
<area shape="poly" title=" " alt="" coords="499,132,538,163,589,194,610,203,608,208,586,198,535,167,496,136"/>
<area shape="poly" title=" " alt="" coords="496,104,535,73,586,42,600,35,602,40,589,46,538,77,499,108"/>
<area shape="poly" title=" " alt="" coords="716,30,751,41,784,52,783,57,750,47,714,35"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="630,259,708,285"/>
<area shape="poly" title=" " alt="" coords="342,357,615,283,616,289,343,362"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="428,360,533,387"/>
<area shape="poly" title=" " alt="" coords="367,371,412,371,412,376,367,376"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="623,461,715,488"/>
<area shape="poly" title=" " alt="" coords="329,385,422,415,609,460,607,465,420,420,327,390"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="587,411,751,437"/>
<area shape="poly" title=" " alt="" coords="357,385,421,396,572,414,571,419,421,401,356,390"/>
<area shape="poly" title=" " alt="" coords="496,357,535,326,586,295,615,283,617,288,589,300,538,331,499,362"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="641,309,697,336"/>
<area shape="poly" title=" " alt="" coords="532,357,625,331,627,337,534,362"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="799,385,858,412"/>
<area shape="poly" title=" " alt="" coords="533,374,784,393,783,398,533,380"/>
<area shape="poly" title=" " alt="" coords="499,385,538,416,589,447,610,456,608,461,586,452,535,420,496,389"/>
<area shape="poly" title=" " alt="" coords="534,385,603,404,601,409,532,390"/>
<area shape="poly" title=" " alt="" coords="751,408,783,403,784,408,751,414"/>
</map>
</div>

</div>
</div>
<a id="gaea03923bde53674db77e1e4428b0e912" name="gaea03923bde53674db77e1e4428b0e912"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea03923bde53674db77e1e4428b0e912">&#9670;&#160;</a></span>mcp_dual_write_pin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_dual_write_pin </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a digital value to a pin on both MCP23017 chips. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>Pin number (0-15) </td></tr>
    <tr><td class="paramname">value</td><td>0 = low, 1 = high </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_gaea03923bde53674db77e1e4428b0e912_cgraph.png" border="0" usemap="#agroup__driver6_gaea03923bde53674db77e1e4428b0e912_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_gaea03923bde53674db77e1e4428b0e912_cgraph" id="agroup__driver6_gaea03923bde53674db77e1e4428b0e912_cgraph">
<area shape="rect" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="5,259,142,285"/>
<area shape="rect" href="group__driver5.html#ga1f2aea8f1cb5fb271e2b68ab119fa503" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="190,157,343,184"/>
<area shape="poly" title=" " alt="" coords="100,256,225,189,227,194,102,260"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="196,360,336,387"/>
<area shape="poly" title=" " alt="" coords="102,284,227,350,225,355,100,288"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="391,107,509,133"/>
<area shape="poly" title=" " alt="" coords="317,154,384,135,385,141,318,159"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="600,157,678,184"/>
<area shape="poly" title=" " alt="" coords="343,168,585,168,585,173,343,173"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="593,208,685,235"/>
<area shape="poly" title=" " alt="" coords="344,178,578,210,577,216,343,184"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="557,5,721,32"/>
<area shape="poly" title=" " alt="" coords="285,154,332,124,390,92,479,58,563,34,564,39,480,63,392,97,335,128,288,159"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="611,56,667,83"/>
<area shape="poly" title=" " alt="" coords="502,103,595,78,597,83,504,109"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="769,56,828,83"/>
<area shape="poly" title=" " alt="" coords="510,116,609,109,720,92,753,83,754,88,721,97,609,114,510,121"/>
<area shape="poly" title=" " alt="" coords="504,131,586,154,585,159,502,137"/>
<area shape="poly" title=" " alt="" coords="469,132,508,163,559,194,580,203,578,208,556,198,505,167,466,136"/>
<area shape="poly" title=" " alt="" coords="466,104,505,73,556,42,570,35,572,40,559,46,508,77,469,108"/>
<area shape="poly" title=" " alt="" coords="686,30,721,41,754,52,753,57,720,47,684,35"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="600,259,678,285"/>
<area shape="poly" title=" " alt="" coords="318,357,585,284,586,289,319,362"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="398,360,503,387"/>
<area shape="poly" title=" " alt="" coords="337,371,382,371,382,376,337,376"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="593,461,685,488"/>
<area shape="poly" title=" " alt="" coords="303,385,392,416,490,442,579,461,578,466,489,447,390,421,301,390"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="557,411,721,437"/>
<area shape="poly" title=" " alt="" coords="330,385,391,396,542,414,541,419,391,401,329,390"/>
<area shape="poly" title=" " alt="" coords="466,357,505,326,556,295,585,283,587,288,559,300,508,331,469,362"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="611,309,667,336"/>
<area shape="poly" title=" " alt="" coords="502,357,595,331,597,337,504,362"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="769,385,828,412"/>
<area shape="poly" title=" " alt="" coords="503,374,754,393,753,398,503,380"/>
<area shape="poly" title=" " alt="" coords="469,385,508,416,559,447,580,456,578,461,556,452,505,420,466,389"/>
<area shape="poly" title=" " alt="" coords="504,385,573,404,571,409,502,390"/>
<area shape="poly" title=" " alt="" coords="721,408,753,403,754,408,721,414"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_gaea03923bde53674db77e1e4428b0e912_icgraph.png" border="0" usemap="#agroup__driver6_gaea03923bde53674db77e1e4428b0e912_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_gaea03923bde53674db77e1e4428b0e912_icgraph" id="agroup__driver6_gaea03923bde53674db77e1e4428b0e912_icgraph">
<area shape="rect" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="1079,325,1216,352"/>
<area shape="rect" href="group__driver6.html#ga889bb68e8929772801ed4cf4836a801d" title="Write both MCPs for one pin only if needed, and report asymmetry." alt="" coords="893,300,1003,327"/>
<area shape="poly" title=" " alt="" coords="1063,331,1004,323,1004,318,1064,325"/>
<area shape="rect" href="group__driver6.html#gace05145c93133aa7e479bec6c0613677" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="865,351,1031,377"/>
<area shape="poly" title=" " alt="" coords="1064,352,1032,356,1032,351,1064,347"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="675,5,799,32"/>
<area shape="poly" title=" " alt="" coords="865,343,863,340,839,302,830,265,832,228,838,191,845,155,846,119,838,82,815,46,798,33,801,29,819,42,843,80,851,118,850,155,843,192,837,228,836,264,844,300,867,337,869,339"/>
<area shape="rect" href="group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="659,56,814,83"/>
<area shape="poly" title=" " alt="" coords="865,343,863,340,842,309,834,278,834,247,838,216,842,186,842,156,835,127,815,96,801,85,804,81,819,93,840,124,848,156,848,187,843,217,839,247,839,277,847,307,867,337,869,339"/>
<area shape="rect" href="group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="670,107,804,149"/>
<area shape="poly" title=" " alt="" coords="866,343,863,340,847,318,839,295,837,251,837,207,830,185,815,163,802,152,806,148,819,160,835,183,842,206,843,251,844,294,851,315,867,337,870,340"/>
<area shape="rect" href="group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="657,173,817,200"/>
<area shape="poly" title=" " alt="" coords="867,344,863,341,850,324,843,308,838,276,834,244,828,229,815,214,799,203,802,198,819,210,832,226,839,243,844,275,848,307,854,322,867,337,871,340"/>
<area shape="rect" href="group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="699,224,775,251"/>
<area shape="poly" title=" " alt="" coords="870,345,863,341,846,321,838,302,831,283,815,265,796,254,775,246,777,241,798,249,819,261,836,280,843,300,851,319,867,337,873,341"/>
<area shape="rect" href="group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="699,275,775,301"/>
<area shape="poly" title=" " alt="" coords="881,348,864,341,816,316,775,301,776,296,818,311,866,336,883,343"/>
<area shape="rect" href="group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="675,325,798,352"/>
<area shape="poly" title=" " alt="" coords="849,355,798,349,799,343,850,350"/>
<area shape="rect" href="group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="675,376,798,403"/>
<area shape="poly" title=" " alt="" coords="850,378,799,385,798,379,849,373"/>
<area shape="rect" href="group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="675,427,798,453"/>
<area shape="poly" title=" " alt="" coords="900,386,818,417,784,429,782,423,816,412,898,381"/>
<area shape="rect" href="group__snmp2.html#gaf0d2f8746f0e3ef405ff4c684888a34b" title="Set the state of outlet 4 (relay) based on the input value." alt="" coords="675,477,798,504"/>
<area shape="poly" title=" " alt="" coords="923,390,876,429,818,468,792,479,789,474,816,463,873,425,920,386"/>
<area shape="rect" href="group__snmp2.html#ga06d40e363a3333a7e10223aaa792eef0" title="Set the state of outlet 5 (relay) based on the input value." alt="" coords="675,528,798,555"/>
<area shape="poly" title=" " alt="" coords="933,392,887,455,855,489,818,518,796,530,793,525,816,514,851,485,883,452,929,389"/>
<area shape="rect" href="group__snmp2.html#ga085a305fa41615e4791de5e3884226af" title="Set the state of outlet 6 (relay) based on the input value." alt="" coords="675,579,798,605"/>
<area shape="poly" title=" " alt="" coords="939,393,921,432,895,479,861,527,819,569,799,580,796,576,815,565,857,524,891,476,916,430,934,391"/>
<area shape="rect" href="group__snmp2.html#gac79033b7ad83d07369d0e2b5f4d49b9d" title="Set the state of outlet 7 (relay) based on the input value." alt="" coords="675,629,798,656"/>
<area shape="poly" title=" " alt="" coords="943,393,927,442,903,503,867,565,844,594,819,619,800,631,797,626,815,615,840,590,862,562,898,500,922,440,937,392"/>
<area shape="rect" href="group__snmp2.html#gabee06a703d75e5a63c2bde983c5fab2f" title="Set the state of outlet 8 (relay) based on the input value." alt="" coords="675,680,798,707"/>
<area shape="poly" title=" " alt="" coords="945,393,933,451,910,525,893,564,873,603,848,638,819,670,800,682,797,678,815,666,844,635,868,600,888,562,905,523,928,450,940,392"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="500,5,578,32"/>
<area shape="poly" title=" " alt="" coords="659,21,579,21,579,16,659,16"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="292,5,412,32"/>
<area shape="poly" title=" " alt="" coords="485,21,413,21,413,16,485,16"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="154,5,231,32"/>
<area shape="poly" title=" " alt="" coords="277,21,231,21,231,16,277,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,56,102,83"/>
<area shape="poly" title=" " alt="" coords="140,40,93,58,91,53,139,35"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="469,56,609,83"/>
<area shape="poly" title=" " alt="" coords="644,72,609,72,609,67,644,67"/>
<area shape="rect" href="group__main02.html#gad25e95c5993e865b3f941472b7a328e0" title="Core 1 task for handling SNMP and HTTP server." alt="" coords="150,56,235,83"/>
<area shape="poly" title=" " alt="" coords="454,72,235,72,235,67,454,67"/>
<area shape="poly" title=" " alt="" coords="134,72,102,72,102,67,134,67"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="473,113,605,140"/>
<area shape="poly" title=" " alt="" coords="654,130,605,130,605,124,655,125"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="283,109,421,136"/>
<area shape="poly" title=" " alt="" coords="458,128,422,127,422,121,458,122"/>
<area shape="poly" title=" " alt="" coords="267,116,149,97,102,86,103,81,150,92,268,111"/>
</map>
</div>

</div>
</div>
<a id="gac00aa0678cb81d6bb6add9d0f8ab0de4" name="gac00aa0678cb81d6bb6add9d0f8ab0de4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac00aa0678cb81d6bb6add9d0f8ab0de4">&#9670;&#160;</a></span>mcp_dual_write_reg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcp_dual_write_reg </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>reg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a value to a register on both MCP23017 chips. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>Register address </td></tr>
    <tr><td class="paramname">value</td><td>Value to write </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_gac00aa0678cb81d6bb6add9d0f8ab0de4_cgraph.png" border="0" usemap="#agroup__driver6_gac00aa0678cb81d6bb6add9d0f8ab0de4_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_gac00aa0678cb81d6bb6add9d0f8ab0de4_cgraph" id="agroup__driver6_gac00aa0678cb81d6bb6add9d0f8ab0de4_cgraph">
<area shape="rect" title="Write a value to a register on both MCP23017 chips." alt="" coords="5,236,143,263"/>
<area shape="rect" href="group__driver5.html#ga125dff7e60af78727ec7d4377c472499" title="Writes a value to a specified MCP23017 register (guarded)." alt="" coords="191,160,345,187"/>
<area shape="poly" title=" " alt="" coords="109,233,217,191,219,196,111,238"/>
<area shape="rect" href="group__driver7.html#gaf73b2d26f4d7ccd1f537fe726ba1f462" title="Writes a value to a specified MCP23017 register (guarded)." alt="" coords="197,312,338,339"/>
<area shape="poly" title=" " alt="" coords="111,261,219,304,217,309,109,266"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="771,8,830,35"/>
<area shape="poly" title=" " alt="" coords="285,158,329,125,395,83,473,42,516,25,559,12,611,4,664,3,756,11,755,16,664,8,612,10,560,18,517,30,476,47,397,87,332,129,288,162"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="393,110,511,136"/>
<area shape="poly" title=" " alt="" coords="319,157,385,138,387,144,320,162"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="602,160,680,187"/>
<area shape="poly" title=" " alt="" coords="345,171,587,171,587,176,345,176"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="595,211,687,238"/>
<area shape="poly" title=" " alt="" coords="346,181,580,213,580,219,345,187"/>
<area shape="poly" title=" " alt="" coords="465,107,505,75,531,58,558,44,610,29,663,21,755,17,756,22,664,26,611,35,560,49,533,62,508,79,469,111"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="613,59,669,86"/>
<area shape="poly" title=" " alt="" coords="504,106,597,81,599,86,506,111"/>
<area shape="poly" title=" " alt="" coords="506,134,588,157,587,162,504,139"/>
<area shape="poly" title=" " alt="" coords="471,135,510,165,561,197,582,206,580,211,558,201,507,170,468,139"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="559,110,723,136"/>
<area shape="poly" title=" " alt="" coords="512,120,544,120,544,126,512,126"/>
<area shape="poly" title=" " alt="" coords="698,107,721,95,752,71,777,45,781,49,756,75,724,100,700,111"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="771,363,830,390"/>
<area shape="poly" title=" " alt="" coords="310,309,389,289,494,272,552,269,610,271,668,280,724,298,758,320,784,349,780,352,754,324,722,303,667,285,610,276,552,274,495,277,390,294,311,314"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="602,312,680,339"/>
<area shape="poly" title=" " alt="" coords="339,323,587,323,587,328,339,328"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="400,388,505,415"/>
<area shape="poly" title=" " alt="" coords="304,337,405,379,403,384,301,342"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="595,515,687,542"/>
<area shape="poly" title=" " alt="" coords="285,337,332,379,394,425,475,468,560,500,581,508,579,513,558,505,472,473,392,429,329,383,282,341"/>
<area shape="poly" title=" " alt="" coords="505,395,755,377,756,382,505,400"/>
<area shape="poly" title=" " alt="" coords="486,385,558,355,589,343,591,348,560,360,488,390"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="613,414,669,440"/>
<area shape="poly" title=" " alt="" coords="506,406,598,418,597,424,505,411"/>
<area shape="poly" title=" " alt="" coords="466,414,505,456,532,480,561,501,582,511,579,515,558,505,528,484,501,460,462,417"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="559,464,723,491"/>
<area shape="poly" title=" " alt="" coords="481,413,560,450,578,456,576,461,558,455,479,418"/>
<area shape="poly" title=" " alt="" coords="698,461,721,450,752,426,777,400,781,403,756,430,724,455,700,466"/>
</map>
</div>

</div>
</div>
<a id="ga889bb68e8929772801ed4cf4836a801d" name="ga889bb68e8929772801ed4cf4836a801d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga889bb68e8929772801ed4cf4836a801d">&#9670;&#160;</a></span>set_relay_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t set_relay_state </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>asym_before_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>asym_after_out</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write both MCPs for one pin only if needed, and report asymmetry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>Pin number (0–15). </td></tr>
    <tr><td class="paramname">value</td><td>Desired state: 0 = low, 1 = high. </td></tr>
    <tr><td class="paramname">asym_before_out</td><td>Optional pointer; set to 1 if relay!=display BEFORE, else 0. </td></tr>
    <tr><td class="paramname">asym_after_out</td><td>Optional pointer; set to 1 if relay!=display AFTER, else 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint8_t 1 if a write was performed; 0 if no change was needed.</dd></dl>
<p>Reads the current state of the selected pin on both Relay and Display chips. If either chip's pin state differs from <code class="param">value</code>, writes <code class="param">value</code> to BOTH chips. Also reports whether the two chips were asymmetric before and after the operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>Pin number (0–15). </td></tr>
    <tr><td class="paramname">value</td><td>Desired state: 0 = low, 1 = high. </td></tr>
    <tr><td class="paramname">asym_before_out</td><td>Optional pointer; set to 1 if relay!=display BEFORE, else 0. </td></tr>
    <tr><td class="paramname">asym_after_out</td><td>Optional pointer; set to 1 if relay!=display AFTER, else 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint8_t 1 if a write was performed; 0 if no change was needed. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_ga889bb68e8929772801ed4cf4836a801d_cgraph.png" border="0" usemap="#agroup__driver6_ga889bb68e8929772801ed4cf4836a801d_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_ga889bb68e8929772801ed4cf4836a801d_cgraph" id="agroup__driver6_ga889bb68e8929772801ed4cf4836a801d_cgraph">
<area shape="rect" title="Write both MCPs for one pin only if needed, and report asymmetry." alt="" coords="5,309,116,336"/>
<area shape="rect" href="group__driver5.html#gab5dab0ee57bf9b5391fbf6b96be35677" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="350,132,500,159"/>
<area shape="poly" title=" " alt="" coords="89,306,381,163,383,168,91,311"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="164,309,300,336"/>
<area shape="poly" title=" " alt="" coords="116,320,148,320,148,325,116,325"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="356,487,493,513"/>
<area shape="poly" title=" " alt="" coords="91,334,383,477,381,482,89,339"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="769,5,826,32"/>
<area shape="poly" title=" " alt="" coords="438,129,484,89,515,68,548,51,602,34,657,23,753,16,754,21,658,28,603,39,550,56,518,73,487,94,441,133"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="549,132,668,159"/>
<area shape="poly" title=" " alt="" coords="500,143,534,143,534,148,500,148"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="759,183,836,209"/>
<area shape="poly" title=" " alt="" coords="488,157,550,168,653,181,743,189,743,195,652,186,549,173,487,162"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="752,81,843,108"/>
<area shape="poly" title=" " alt="" coords="442,129,488,99,518,84,549,73,597,66,647,65,695,69,737,77,736,82,694,75,647,70,598,71,550,79,520,89,491,104,445,134"/>
<area shape="poly" title=" " alt="" coords="627,129,714,67,759,38,762,43,717,72,630,134"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="927,183,986,209"/>
<area shape="poly" title=" " alt="" coords="668,144,768,151,880,168,913,177,911,182,878,173,767,157,668,150"/>
<area shape="poly" title=" " alt="" coords="662,157,745,179,743,184,660,162"/>
<area shape="poly" title=" " alt="" coords="660,129,736,108,737,113,662,134"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="716,233,879,260"/>
<area shape="poly" title=" " alt="" coords="627,157,667,188,717,219,730,225,728,230,714,224,664,192,624,161"/>
<area shape="poly" title=" " alt="" coords="843,230,878,219,911,208,913,213,880,224,844,235"/>
<area shape="rect" href="group__driver5.html#ga1f2aea8f1cb5fb271e2b68ab119fa503" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="348,233,501,260"/>
<area shape="poly" title=" " alt="" coords="267,306,374,264,376,269,269,311"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="354,385,495,412"/>
<area shape="poly" title=" " alt="" coords="269,334,376,377,374,382,267,339"/>
<area shape="poly" title=" " alt="" coords="450,230,568,164,571,169,452,235"/>
<area shape="poly" title=" " alt="" coords="501,234,743,201,743,206,502,239"/>
<area shape="poly" title=" " alt="" coords="438,231,499,169,521,140,531,129,548,118,595,100,645,91,693,87,736,87,736,92,693,92,645,96,597,105,551,122,535,133,525,144,503,172,442,235"/>
<area shape="poly" title=" " alt="" coords="502,257,550,263,608,266,667,263,700,260,700,265,668,268,608,271,549,268,501,263"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="759,436,836,463"/>
<area shape="poly" title=" " alt="" coords="496,405,668,428,744,439,743,444,667,433,495,410"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="556,487,661,513"/>
<area shape="poly" title=" " alt="" coords="452,410,571,477,568,481,450,415"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="752,537,843,564"/>
<area shape="poly" title=" " alt="" coords="442,411,503,473,525,502,535,513,551,523,597,540,645,549,693,553,736,553,736,559,693,559,645,555,595,545,548,528,531,517,521,505,499,476,438,414"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="716,385,879,412"/>
<area shape="poly" title=" " alt="" coords="495,384,549,377,608,374,668,377,700,380,700,386,667,383,608,380,550,383,495,389"/>
<area shape="poly" title=" " alt="" coords="660,483,743,461,745,466,662,489"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="769,613,826,640"/>
<area shape="poly" title=" " alt="" coords="630,512,717,574,762,603,759,607,714,578,627,516"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="927,436,986,463"/>
<area shape="poly" title=" " alt="" coords="661,496,762,489,878,472,911,463,913,468,880,477,763,494,662,501"/>
<area shape="poly" title=" " alt="" coords="662,511,737,532,736,537,660,517"/>
<area shape="poly" title=" " alt="" coords="624,484,664,453,714,422,728,415,730,420,717,426,667,457,627,488"/>
<area shape="poly" title=" " alt="" coords="844,410,880,421,913,432,911,437,878,427,843,415"/>
<area shape="poly" title=" " alt="" coords="487,483,549,472,652,459,743,451,743,456,653,464,550,477,488,489"/>
<area shape="poly" title=" " alt="" coords="494,497,540,497,540,503,494,503"/>
<area shape="poly" title=" " alt="" coords="443,512,489,547,519,566,550,582,604,599,659,611,754,622,753,627,658,616,602,604,548,586,516,571,486,552,440,516"/>
<area shape="poly" title=" " alt="" coords="445,512,491,542,520,556,550,567,598,575,647,575,694,571,736,563,737,569,695,576,647,580,597,580,549,572,518,561,488,546,442,516"/>
</map>
</div>

</div>
</div>
<a id="gace05145c93133aa7e479bec6c0613677" name="gace05145c93133aa7e479bec6c0613677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gace05145c93133aa7e479bec6c0613677">&#9670;&#160;</a></span>set_relay_state_with_tag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t set_relay_state_with_tag </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>caller_tag</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>asym_before_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>asym_after_out</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write both MCPs for one pin only if needed, and report asymmetry, with logging. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">caller_tag</td><td>Text label of the caller (e.g. "uart", "fsm", <b>func</b>). </td></tr>
    <tr><td class="paramname">pin</td><td>Pin number (0–15). </td></tr>
    <tr><td class="paramname">value</td><td>Desired state: 0 = low, 1 = high. </td></tr>
    <tr><td class="paramname">asym_before_out</td><td>Optional pointer; set to 1 if relay!=display BEFORE, else 0. </td></tr>
    <tr><td class="paramname">asym_after_out</td><td>Optional pointer; set to 1 if relay!=display AFTER, else 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint8_t 1 if a write was performed; 0 if no change was needed. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_gace05145c93133aa7e479bec6c0613677_cgraph.png" border="0" usemap="#agroup__driver6_gace05145c93133aa7e479bec6c0613677_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_gace05145c93133aa7e479bec6c0613677_cgraph" id="agroup__driver6_gace05145c93133aa7e479bec6c0613677_cgraph">
<area shape="rect" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="5,309,172,336"/>
<area shape="rect" href="group__driver5.html#gab5dab0ee57bf9b5391fbf6b96be35677" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="406,132,556,159"/>
<area shape="poly" title=" " alt="" coords="119,306,434,163,436,168,122,311"/>
<area shape="rect" href="group__driver6.html#gaea03923bde53674db77e1e4428b0e912" title="Write a digital value to a pin on both MCP23017 chips." alt="" coords="220,309,356,336"/>
<area shape="poly" title=" " alt="" coords="172,320,204,320,204,325,172,325"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="412,487,549,513"/>
<area shape="poly" title=" " alt="" coords="122,334,436,477,434,482,119,339"/>
<area shape="rect" href="group__driver5.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="825,5,882,32"/>
<area shape="poly" title=" " alt="" coords="494,129,540,89,571,68,604,51,658,34,713,23,809,16,810,21,714,28,659,39,606,56,574,73,543,94,497,133"/>
<area shape="rect" href="group__driver5.html#gad23a5248f3f3fc671c373a437e16e985" title="Initializes the relay board&#39;s MCP23017." alt="" coords="605,132,724,159"/>
<area shape="poly" title=" " alt="" coords="556,143,590,143,590,148,556,148"/>
<area shape="rect" href="group__driver5.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="815,183,892,209"/>
<area shape="poly" title=" " alt="" coords="544,157,606,168,709,181,799,189,799,195,708,186,605,173,543,162"/>
<area shape="rect" href="group__driver5.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="808,81,899,108"/>
<area shape="poly" title=" " alt="" coords="498,129,544,99,574,84,605,73,653,66,703,65,751,69,793,77,792,82,750,75,703,70,654,71,606,79,576,89,547,104,501,134"/>
<area shape="poly" title=" " alt="" coords="683,129,770,67,815,38,818,43,773,72,686,134"/>
<area shape="rect" href="group__driver5.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="983,183,1042,209"/>
<area shape="poly" title=" " alt="" coords="724,144,824,151,936,168,969,177,967,182,934,173,823,157,724,150"/>
<area shape="poly" title=" " alt="" coords="718,157,801,179,799,184,716,162"/>
<area shape="poly" title=" " alt="" coords="716,129,792,108,793,113,718,134"/>
<area shape="rect" href="group__driver5.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="772,233,935,260"/>
<area shape="poly" title=" " alt="" coords="683,157,723,188,773,219,786,225,784,230,770,224,720,192,680,161"/>
<area shape="poly" title=" " alt="" coords="899,230,934,219,967,208,969,213,936,224,900,235"/>
<area shape="rect" href="group__driver5.html#ga1f2aea8f1cb5fb271e2b68ab119fa503" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="404,233,557,260"/>
<area shape="poly" title=" " alt="" coords="323,306,430,264,432,269,325,311"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="410,385,551,412"/>
<area shape="poly" title=" " alt="" coords="325,334,432,377,430,382,323,339"/>
<area shape="poly" title=" " alt="" coords="506,230,624,164,627,169,508,235"/>
<area shape="poly" title=" " alt="" coords="557,234,799,201,799,206,558,239"/>
<area shape="poly" title=" " alt="" coords="494,231,555,169,577,140,587,129,604,118,651,100,701,91,749,87,792,87,792,92,749,92,701,96,653,105,607,122,591,133,581,144,559,172,498,235"/>
<area shape="poly" title=" " alt="" coords="558,257,606,263,664,266,723,263,756,260,756,265,724,268,664,271,605,268,557,263"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="815,436,892,463"/>
<area shape="poly" title=" " alt="" coords="552,405,724,428,800,439,799,444,723,433,551,410"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="612,487,717,513"/>
<area shape="poly" title=" " alt="" coords="508,410,627,477,624,481,506,415"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="808,537,899,564"/>
<area shape="poly" title=" " alt="" coords="498,411,559,473,581,502,591,513,607,523,653,540,701,549,749,553,792,553,792,559,749,559,701,555,651,545,604,528,587,517,577,505,555,476,494,414"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="772,385,935,412"/>
<area shape="poly" title=" " alt="" coords="551,384,605,377,664,374,724,377,756,380,756,386,723,383,664,380,606,383,551,389"/>
<area shape="poly" title=" " alt="" coords="716,483,799,461,801,466,718,489"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="825,613,882,640"/>
<area shape="poly" title=" " alt="" coords="686,512,773,574,818,603,815,607,770,578,683,516"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="983,436,1042,463"/>
<area shape="poly" title=" " alt="" coords="717,496,818,489,934,472,967,463,969,468,936,477,819,494,718,501"/>
<area shape="poly" title=" " alt="" coords="718,511,793,532,792,537,716,517"/>
<area shape="poly" title=" " alt="" coords="680,484,720,453,770,422,784,415,786,420,773,426,723,457,683,488"/>
<area shape="poly" title=" " alt="" coords="900,410,936,421,969,432,967,437,934,427,899,415"/>
<area shape="poly" title=" " alt="" coords="543,483,605,472,708,459,799,451,799,456,709,464,606,477,544,489"/>
<area shape="poly" title=" " alt="" coords="550,497,596,497,596,503,550,503"/>
<area shape="poly" title=" " alt="" coords="499,512,545,547,575,566,606,582,660,599,715,611,810,622,809,627,714,616,658,604,604,586,572,571,542,552,496,516"/>
<area shape="poly" title=" " alt="" coords="501,512,547,542,576,556,606,567,654,575,703,575,750,571,792,563,793,569,751,576,703,580,653,580,605,572,574,561,544,546,498,516"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver6_gace05145c93133aa7e479bec6c0613677_icgraph.png" border="0" usemap="#agroup__driver6_gace05145c93133aa7e479bec6c0613677_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver6_gace05145c93133aa7e479bec6c0613677_icgraph" id="agroup__driver6_gace05145c93133aa7e479bec6c0613677_icgraph">
<area shape="rect" title="Write both MCPs for one pin only if needed, and report asymmetry, with logging." alt="" coords="900,351,1066,377"/>
<area shape="rect" href="group__driver1.html#ga81a3ea6eb9a8a16aa49da9543e4f3bd4" title="Execute SET short&#45;press action: toggle the selected relay." alt="" coords="710,5,834,32"/>
<area shape="poly" title=" " alt="" coords="976,335,964,275,942,197,925,156,905,116,880,79,850,46,833,34,836,30,854,42,884,76,910,113,930,154,947,196,970,274,981,334"/>
<area shape="rect" href="group__webui1.html#ga204196bd085f7a778067392b56920c59" title="Handles the HTTP request for the control page. Uses set_relay_state_tag() for idempotent writes + log..." alt="" coords="694,56,850,83"/>
<area shape="poly" title=" " alt="" coords="973,337,959,285,935,221,899,154,877,124,850,97,833,85,835,81,854,93,881,120,904,151,940,218,965,284,979,335"/>
<area shape="rect" href="group__uart.html#gaba75c17603725c8ac0d758f31229b240" title="Handle UART SET_CH command. Uses set_relay_state_tag(&quot;UART&quot;, ...) to log who wrote." alt="" coords="705,107,839,149"/>
<area shape="poly" title=" " alt="" coords="968,337,950,299,924,253,891,205,850,163,834,152,837,148,854,159,895,202,929,250,955,297,973,335"/>
<area shape="rect" href="group__driver6.html#gae49e94d74eefe80449e590bf8798fb17" title="Periodic asymmetry guardian for the two MCP23017s." alt="" coords="692,173,852,200"/>
<area shape="poly" title=" " alt="" coords="964,339,918,276,886,243,851,214,828,203,831,198,853,210,890,239,922,273,968,336"/>
<area shape="rect" href="group__snmp2.html#gab580ecbc111f7cd62a6221c8c3cb2097" title="Set the state of all outlets (relays) OFF when val == 1." alt="" coords="734,224,810,251"/>
<area shape="poly" title=" " alt="" coords="955,342,908,303,851,265,809,249,811,244,853,260,911,299,958,338"/>
<area shape="rect" href="group__snmp2.html#ga02b1776dfb345252500b75e80306e42e" title="Turn all outlets on when val != 0." alt="" coords="734,275,810,301"/>
<area shape="poly" title=" " alt="" coords="933,347,851,316,810,302,811,297,853,311,935,342"/>
<area shape="rect" href="group__snmp2.html#gade035c518f601160052fdb2b9a9e07d8" title="Set the state of the outlet (relay) based on the input value." alt="" coords="710,325,834,352"/>
<area shape="poly" title=" " alt="" coords="884,355,833,349,834,343,885,350"/>
<area shape="rect" href="group__snmp2.html#gaaf4b3c8e88f82cff6c131736426720d2" title="Set the state of outlet 2 (relay) based on the input value." alt="" coords="710,376,834,403"/>
<area shape="poly" title=" " alt="" coords="885,378,834,385,833,379,884,373"/>
<area shape="rect" href="group__snmp2.html#gaba61710e5dc590d5c862562112d59338" title="Set the state of outlet 3 (relay) based on the input value." alt="" coords="710,427,834,453"/>
<area shape="poly" title=" " alt="" coords="935,386,853,417,819,429,817,423,851,412,933,381"/>
<area shape="rect" href="group__snmp2.html#gaf0d2f8746f0e3ef405ff4c684888a34b" title="Set the state of outlet 4 (relay) based on the input value." alt="" coords="710,477,834,504"/>
<area shape="poly" title=" " alt="" coords="958,390,911,429,853,468,827,479,824,474,851,463,908,425,955,386"/>
<area shape="rect" href="group__snmp2.html#ga06d40e363a3333a7e10223aaa792eef0" title="Set the state of outlet 5 (relay) based on the input value." alt="" coords="710,528,834,555"/>
<area shape="poly" title=" " alt="" coords="968,392,922,455,890,489,853,518,831,530,828,525,851,514,886,485,918,452,964,389"/>
<area shape="rect" href="group__snmp2.html#ga085a305fa41615e4791de5e3884226af" title="Set the state of outlet 6 (relay) based on the input value." alt="" coords="710,579,834,605"/>
<area shape="poly" title=" " alt="" coords="974,393,956,432,930,479,896,527,854,569,834,580,831,576,850,565,892,524,926,476,951,430,969,391"/>
<area shape="rect" href="group__snmp2.html#gac79033b7ad83d07369d0e2b5f4d49b9d" title="Set the state of outlet 7 (relay) based on the input value." alt="" coords="710,629,834,656"/>
<area shape="poly" title=" " alt="" coords="978,393,962,442,938,503,902,565,879,594,854,619,835,631,832,626,850,615,875,590,897,562,933,500,957,440,972,392"/>
<area shape="rect" href="group__snmp2.html#gabee06a703d75e5a63c2bde983c5fab2f" title="Set the state of outlet 8 (relay) based on the input value." alt="" coords="710,680,834,707"/>
<area shape="poly" title=" " alt="" coords="980,393,968,451,945,525,928,564,908,603,883,638,854,670,835,682,832,678,850,666,879,635,903,600,923,562,940,523,963,450,975,392"/>
<area shape="rect" href="group__driver1.html#ga60c16d2b5323dc486ad6208a244ed7ae" title="Unified GPIO interrupt handler for PLUS, MINUS, and SET buttons." alt="" coords="535,5,613,32"/>
<area shape="poly" title=" " alt="" coords="694,21,614,21,614,16,694,16"/>
<area shape="rect" href="group__driver1.html#ga71b68eb02e1df1dada387c9fbb7bbb37" title="Initialize button GPIO interrupts and synchronize UI selection." alt="" coords="336,5,456,32"/>
<area shape="poly" title=" " alt="" coords="519,21,457,21,457,16,519,16"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="180,5,258,32"/>
<area shape="poly" title=" " alt="" coords="321,21,258,21,258,16,321,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,56,102,83"/>
<area shape="poly" title=" " alt="" coords="166,37,100,58,98,53,165,32"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="504,56,644,83"/>
<area shape="poly" title=" " alt="" coords="679,72,644,72,644,67,679,67"/>
<area shape="rect" href="group__main02.html#gad25e95c5993e865b3f941472b7a328e0" title="Core 1 task for handling SNMP and HTTP server." alt="" coords="354,56,439,83"/>
<area shape="poly" title=" " alt="" coords="489,72,439,72,439,67,489,67"/>
<area shape="poly" title=" " alt="" coords="338,72,102,72,102,67,338,67"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="508,113,640,140"/>
<area shape="poly" title=" " alt="" coords="689,130,640,130,640,124,690,125"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="150,108,288,135"/>
<area shape="poly" title=" " alt="" coords="493,128,289,125,289,120,493,123"/>
<area shape="poly" title=" " alt="" coords="159,105,98,86,99,81,161,100"/>
</map>
</div>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="gaef34900fa66f22b10508520bf1f4e9f0" name="gaef34900fa66f22b10508520bf1f4e9f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaef34900fa66f22b10508520bf1f4e9f0">&#9670;&#160;</a></span>g_set_relay_write_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">atomic_uint_fast32_t g_set_relay_write_count = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ENERGIS - 8 Channel Managed PDU for 10 Inch Racks: 3. HLW8032 Energy Measurement Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ENERGIS - 8 Channel Managed PDU for 10 Inch Racks
   </div>
   <div id="projectbrief">A comprehensive power distribution unit for efficient energy management.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__driver3.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title"><ol type="1">
<li>HLW8032 Energy Measurement Driver </li>
</ol>
<div class="ingroups"><a class="el" href="group__drivers.html">Drivers</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>HLW8032 Power Measurement Driver Source.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for 3. HLW8032 Energy Measurement Driver:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3.png" border="0" usemap="#agroup____driver3" loading="lazy" alt=""/></div>
<map name="agroup____driver3" id="agroup____driver3">
<area shape="rect" title="HLW8032 Power Measurement Driver Source." alt="" coords="117,5,338,48"/>
<area shape="rect" href="group__drivers.html" title="All hardware drivers for the Energis PDU." alt="" coords="5,13,69,40"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga317577d37ad844a15b55a8f5e55126f3" id="r_ga317577d37ad844a15b55a8f5e55126f3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga317577d37ad844a15b55a8f5e55126f3">mux_select</a> (uint8_t ch)</td></tr>
<tr class="memdesc:ga317577d37ad844a15b55a8f5e55126f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select a channel on the multiplexer.  <br /></td></tr>
<tr class="memitem:ga8c3364fbeb1899ae2c744c1c78ea30be" id="r_ga8c3364fbeb1899ae2c744c1c78ea30be"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8c3364fbeb1899ae2c744c1c78ea30be">checksum_ok</a> (const uint8_t *f)</td></tr>
<tr class="memdesc:ga8c3364fbeb1899ae2c744c1c78ea30be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate the checksum of a HLW8032 frame.  <br /></td></tr>
<tr class="memitem:ga1cdae985fb0d22061b8e24fa8c175acc" id="r_ga1cdae985fb0d22061b8e24fa8c175acc"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1cdae985fb0d22061b8e24fa8c175acc">read_frame</a> (void)</td></tr>
<tr class="memdesc:ga1cdae985fb0d22061b8e24fa8c175acc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read one valid 24-byte frame from the UART.  <br /></td></tr>
<tr class="memitem:gac1bd84c5a254283faacc776489f36625" id="r_gac1bd84c5a254283faacc776489f36625"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac1bd84c5a254283faacc776489f36625">hlw8032_init</a> (void)</td></tr>
<tr class="memdesc:gac1bd84c5a254283faacc776489f36625"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the HLW8032 power measurement interface.  <br /></td></tr>
<tr class="memitem:ga204d3cdc833db3ce315ff247e3f79400" id="r_ga204d3cdc833db3ce315ff247e3f79400"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga204d3cdc833db3ce315ff247e3f79400">hlw8032_read</a> (uint8_t channel)</td></tr>
<tr class="memdesc:ga204d3cdc833db3ce315ff247e3f79400"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read power measurements from the specified channel.  <br /></td></tr>
<tr class="memitem:ga6fb634639b04ca4cfd297f7c48a0c181" id="r_ga6fb634639b04ca4cfd297f7c48a0c181"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6fb634639b04ca4cfd297f7c48a0c181">hlw8032_get_voltage</a> (void)</td></tr>
<tr class="memdesc:ga6fb634639b04ca4cfd297f7c48a0c181"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the most recently measured voltage.  <br /></td></tr>
<tr class="memitem:ga2688ff6d07f74455d95d323ff3c2a0dd" id="r_ga2688ff6d07f74455d95d323ff3c2a0dd"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2688ff6d07f74455d95d323ff3c2a0dd">hlw8032_get_current</a> (void)</td></tr>
<tr class="memdesc:ga2688ff6d07f74455d95d323ff3c2a0dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the most recently measured current.  <br /></td></tr>
<tr class="memitem:gaaa960776be4d3e02a4606c524dc5316b" id="r_gaaa960776be4d3e02a4606c524dc5316b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaaa960776be4d3e02a4606c524dc5316b">hlw8032_get_power</a> (void)</td></tr>
<tr class="memdesc:gaaa960776be4d3e02a4606c524dc5316b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the most recently measured power.  <br /></td></tr>
<tr class="memitem:ga3a21e794f2114fb509dd0da98ee942cc" id="r_ga3a21e794f2114fb509dd0da98ee942cc"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3a21e794f2114fb509dd0da98ee942cc">hlw8032_get_power_inspect</a> (void)</td></tr>
<tr class="memdesc:ga3a21e794f2114fb509dd0da98ee942cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get power value calculated from voltage and current measurements.  <br /></td></tr>
<tr class="memitem:gaa7854260caacda8a089ed5efc9f76d3a" id="r_gaa7854260caacda8a089ed5efc9f76d3a"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa7854260caacda8a089ed5efc9f76d3a">hlw8032_get_power_factor</a> (void)</td></tr>
<tr class="memdesc:gaa7854260caacda8a089ed5efc9f76d3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the power factor from the most recent measurements.  <br /></td></tr>
<tr class="memitem:ga51e49b503d3ac1efe83fe87fae5d1dc5" id="r_ga51e49b503d3ac1efe83fe87fae5d1dc5"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga51e49b503d3ac1efe83fe87fae5d1dc5">hlw8032_get_kwh</a> (void)</td></tr>
<tr class="memdesc:ga51e49b503d3ac1efe83fe87fae5d1dc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the accumulated energy consumption.  <br /></td></tr>
<tr class="memitem:gacfd84777ef919c041f40ea955f672d5e" id="r_gacfd84777ef919c041f40ea955f672d5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacfd84777ef919c041f40ea955f672d5e">hlw8032_update_uptime</a> (uint8_t ch, bool state)</td></tr>
<tr class="memdesc:gacfd84777ef919c041f40ea955f672d5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the uptime counter for a channel based on its state.  <br /></td></tr>
<tr class="memitem:ga3e3e299137c4b5355cd17f94ddc24899" id="r_ga3e3e299137c4b5355cd17f94ddc24899"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3e3e299137c4b5355cd17f94ddc24899">hlw8032_get_uptime</a> (uint8_t ch)</td></tr>
<tr class="memdesc:ga3e3e299137c4b5355cd17f94ddc24899"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the accumulated uptime for a channel.  <br /></td></tr>
<tr class="memitem:ga0b3a5c410541deaf144c3e33d4b65175" id="r_ga0b3a5c410541deaf144c3e33d4b65175"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0b3a5c410541deaf144c3e33d4b65175">hlw8032_poll_once</a> (void)</td></tr>
<tr class="memdesc:ga0b3a5c410541deaf144c3e33d4b65175"><td class="mdescLeft">&#160;</td><td class="mdescRight">Poll a single channel for power measurements.  <br /></td></tr>
<tr class="memitem:ga76f09e4482db113563628126492d3200" id="r_ga76f09e4482db113563628126492d3200"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga76f09e4482db113563628126492d3200">hlw8032_refresh_all</a> (void)</td></tr>
<tr class="memdesc:ga76f09e4482db113563628126492d3200"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refresh power measurements for all channels.  <br /></td></tr>
<tr class="memitem:ga3fd1465bd8f5106879ee5677d0d551da" id="r_ga3fd1465bd8f5106879ee5677d0d551da"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3fd1465bd8f5106879ee5677d0d551da">hlw8032_cached_voltage</a> (uint8_t ch)</td></tr>
<tr class="memdesc:ga3fd1465bd8f5106879ee5677d0d551da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the cached voltage for a channel.  <br /></td></tr>
<tr class="memitem:gad2a10b704d2588035bde43ff6b941ea7" id="r_gad2a10b704d2588035bde43ff6b941ea7"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad2a10b704d2588035bde43ff6b941ea7">hlw8032_cached_current</a> (uint8_t ch)</td></tr>
<tr class="memdesc:gad2a10b704d2588035bde43ff6b941ea7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the cached current for a channel.  <br /></td></tr>
<tr class="memitem:ga5b03a8561efc81ded185e88ffc1574a9" id="r_ga5b03a8561efc81ded185e88ffc1574a9"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5b03a8561efc81ded185e88ffc1574a9">hlw8032_cached_power</a> (uint8_t ch)</td></tr>
<tr class="memdesc:ga5b03a8561efc81ded185e88ffc1574a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the cached power for a channel.  <br /></td></tr>
<tr class="memitem:ga33d4652f0a85150f7dcba9f702b9893b" id="r_ga33d4652f0a85150f7dcba9f702b9893b"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga33d4652f0a85150f7dcba9f702b9893b">hlw8032_cached_uptime</a> (uint8_t ch)</td></tr>
<tr class="memdesc:ga33d4652f0a85150f7dcba9f702b9893b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the cached uptime for a channel.  <br /></td></tr>
<tr class="memitem:ga01cdcd0497f8134e1ecb93331474dbdb" id="r_ga01cdcd0497f8134e1ecb93331474dbdb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga01cdcd0497f8134e1ecb93331474dbdb">hlw8032_cached_state</a> (uint8_t ch)</td></tr>
<tr class="memdesc:ga01cdcd0497f8134e1ecb93331474dbdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the cached state for a channel.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gae5eff8c0847716df84bebd4b4eed4ce0" id="r_gae5eff8c0847716df84bebd4b4eed4ce0"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae5eff8c0847716df84bebd4b4eed4ce0">frame</a> [<a class="el" href="_c_o_n_f_i_g_8h.html#ada5ed028f3ce7bdfbe8fe23827b9b493">HLW8032_FRAME_LENGTH</a>]</td></tr>
<tr class="memitem:ga71f9c126ad863dbe69877813ad1a3092" id="r_ga71f9c126ad863dbe69877813ad1a3092"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga71f9c126ad863dbe69877813ad1a3092">rx_buf</a> [<a class="el" href="_h_l_w8032__driver_8h.html#ae2ffdc964c3e8df6a8ebf772f03fba13">MAX_RX_BYTES</a>]</td></tr>
<tr class="memitem:ga790cd8552c0d4039453fb0afa09aba81" id="r_ga790cd8552c0d4039453fb0afa09aba81"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga790cd8552c0d4039453fb0afa09aba81">channel_uptime</a> [8] = {0}</td></tr>
<tr class="memitem:ga433a3ce956516f75006c888ead72e00d" id="r_ga433a3ce956516f75006c888ead72e00d"><td class="memItemLeft" align="right" valign="top">static absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga433a3ce956516f75006c888ead72e00d">channel_last_on</a> [8]</td></tr>
<tr class="memitem:ga08cd0fc8d7d9c5e3a71ebb2b5caed1fc" id="r_ga08cd0fc8d7d9c5e3a71ebb2b5caed1fc"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga08cd0fc8d7d9c5e3a71ebb2b5caed1fc">VolPar</a></td></tr>
<tr class="memitem:ga97815d40a4bc549e6a9fa18ce1808c0f" id="r_ga97815d40a4bc549e6a9fa18ce1808c0f"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga97815d40a4bc549e6a9fa18ce1808c0f">VolData</a></td></tr>
<tr class="memitem:gad1c36e17e4c59087ed7b441f725ca823" id="r_gad1c36e17e4c59087ed7b441f725ca823"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad1c36e17e4c59087ed7b441f725ca823">CurPar</a></td></tr>
<tr class="memitem:ga1c169957ef1dfebca639a0eafcf9ecb7" id="r_ga1c169957ef1dfebca639a0eafcf9ecb7"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1c169957ef1dfebca639a0eafcf9ecb7">CurData</a></td></tr>
<tr class="memitem:ga0c7c518bf278f337eb58dd7d25928352" id="r_ga0c7c518bf278f337eb58dd7d25928352"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0c7c518bf278f337eb58dd7d25928352">PowPar</a></td></tr>
<tr class="memitem:ga9eef43327283b572dd7b4582dc30a10f" id="r_ga9eef43327283b572dd7b4582dc30a10f"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9eef43327283b572dd7b4582dc30a10f">PowData</a></td></tr>
<tr class="memitem:ga0e83257fc55bfbfd29f0b1e8dfa46258" id="r_ga0e83257fc55bfbfd29f0b1e8dfa46258"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0e83257fc55bfbfd29f0b1e8dfa46258">PF</a></td></tr>
<tr class="memitem:ga93bc4334bbc37e441ce5ad4618ebfef1" id="r_ga93bc4334bbc37e441ce5ad4618ebfef1"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga93bc4334bbc37e441ce5ad4618ebfef1">PF_Count</a> = 1</td></tr>
<tr class="memitem:gabe6c80c69a1c9865acdd7844392d2d97" id="r_gabe6c80c69a1c9865acdd7844392d2d97"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabe6c80c69a1c9865acdd7844392d2d97">last_voltage</a> = 0.0f</td></tr>
<tr class="memitem:ga98c848a20dba7cc003020b1c42cd742c" id="r_ga98c848a20dba7cc003020b1c42cd742c"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga98c848a20dba7cc003020b1c42cd742c">last_current</a> = 0.0f</td></tr>
<tr class="memitem:gad3c020358ff7347ff2efff64b793bf3d" id="r_gad3c020358ff7347ff2efff64b793bf3d"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad3c020358ff7347ff2efff64b793bf3d">last_power</a> = 0.0f</td></tr>
<tr class="memitem:ga80aeccbfd233d006354952af7ff66665" id="r_ga80aeccbfd233d006354952af7ff66665"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga80aeccbfd233d006354952af7ff66665">cached_voltage</a> [8]</td></tr>
<tr class="memitem:ga1d7a96191316d9fa9bdc443ec4543c7c" id="r_ga1d7a96191316d9fa9bdc443ec4543c7c"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1d7a96191316d9fa9bdc443ec4543c7c">cached_current</a> [8]</td></tr>
<tr class="memitem:ga910c659dfcdb6bf3d2b0250cf86bdcc0" id="r_ga910c659dfcdb6bf3d2b0250cf86bdcc0"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga910c659dfcdb6bf3d2b0250cf86bdcc0">cached_power</a> [8]</td></tr>
<tr class="memitem:ga6edc82babd1a9ad7d9adbdf6a17e2ca7" id="r_ga6edc82babd1a9ad7d9adbdf6a17e2ca7"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6edc82babd1a9ad7d9adbdf6a17e2ca7">cached_uptime</a> [8]</td></tr>
<tr class="memitem:ga0575226af452d6c350688e398738bbb7" id="r_ga0575226af452d6c350688e398738bbb7"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0575226af452d6c350688e398738bbb7">cached_state</a> [8]</td></tr>
<tr class="memitem:gac73022164f169c2d9d5a0798cdc65795" id="r_gac73022164f169c2d9d5a0798cdc65795"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac73022164f169c2d9d5a0798cdc65795">poll_channel</a> = 0</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>HLW8032 Power Measurement Driver Source. </p>
<dl class="section date"><dt>Date</dt><dd>2025-08-21</dd></dl>
<p>Provides API for interfacing with the HLW8032 power measurement chip. Includes functions for initialization, reading measurements, uptime tracking, and cached access for multi-core systems.</p>
<p>@project ENERGIS - The Managed PDU Project for 10-Inch Rack @github <a href="https://github.com/DvidMakesThings/HW_10-In-Rack_PDU">https://github.com/DvidMakesThings/HW_10-In-Rack_PDU</a> </p>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga8c3364fbeb1899ae2c744c1c78ea30be" name="ga8c3364fbeb1899ae2c744c1c78ea30be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8c3364fbeb1899ae2c744c1c78ea30be">&#9670;&#160;</a></span>checksum_ok()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool checksum_ok </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>f</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validate the checksum of a HLW8032 frame. </p>
<p>This function verifies that the checksum in the frame (byte 23) matches the calculated sum of bytes 2-22.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>Pointer to the frame buffer containing the 24-byte frame </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if checksum is valid, false otherwise </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga8c3364fbeb1899ae2c744c1c78ea30be_icgraph.png" border="0" usemap="#agroup__driver3_ga8c3364fbeb1899ae2c744c1c78ea30be_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga8c3364fbeb1899ae2c744c1c78ea30be_icgraph" id="agroup__driver3_ga8c3364fbeb1899ae2c744c1c78ea30be_icgraph">
<area shape="rect" title="Validate the checksum of a HLW8032 frame." alt="" coords="1000,81,1103,108"/>
<area shape="rect" href="group__driver3.html#ga1cdae985fb0d22061b8e24fa8c175acc" title="Read one valid 24&#45;byte frame from the UART." alt="" coords="866,81,952,108"/>
<area shape="poly" title=" " alt="" coords="985,97,953,97,953,92,985,92"/>
<area shape="rect" href="group__driver3.html#ga204d3cdc833db3ce315ff247e3f79400" title="Read power measurements from the specified channel." alt="" coords="717,81,818,108"/>
<area shape="poly" title=" " alt="" coords="851,97,818,97,818,92,851,92"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="336,5,467,32"/>
<area shape="poly" title=" " alt="" coords="731,75,701,59,668,47,616,34,563,27,467,21,468,15,564,21,617,29,669,41,703,55,733,71"/>
<area shape="rect" href="group__uart.html#gaa0cfe9fea91a783744a3ef36f146da0a" title="Read and print HLW8032 sensor values for a specific channel." alt="" coords="515,56,669,83"/>
<area shape="poly" title=" " alt="" coords="701,88,668,83,669,78,701,83"/>
<area shape="rect" href="group__uart.html#ga900a7219fe90e05fa69922b219cd6cfd" title="Read and print HLW8032 sensor values for all channels." alt="" coords="529,107,655,133"/>
<area shape="poly" title=" " alt="" coords="702,107,655,114,654,108,701,102"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="524,157,660,184"/>
<area shape="poly" title=" " alt="" coords="730,118,670,148,639,159,637,154,668,143,727,114"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,31,102,57"/>
<area shape="poly" title=" " alt="" coords="320,27,103,43,102,38,320,22"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="336,56,467,83"/>
<area shape="poly" title=" " alt="" coords="500,72,468,72,468,67,500,67"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="150,56,288,83"/>
<area shape="poly" title=" " alt="" coords="321,72,289,72,289,67,321,67"/>
<area shape="poly" title=" " alt="" coords="134,59,101,54,102,49,135,54"/>
<area shape="poly" title=" " alt="" coords="524,105,454,86,455,81,525,99"/>
</map>
</div>

</div>
</div>
<a id="gad2a10b704d2588035bde43ff6b941ea7" name="gad2a10b704d2588035bde43ff6b941ea7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad2a10b704d2588035bde43ff6b941ea7">&#9670;&#160;</a></span>hlw8032_cached_current()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float hlw8032_cached_current </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the cached current for a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Channel index (0-7) to query </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Cached current in amperes (A) for the specified channel </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_gad2a10b704d2588035bde43ff6b941ea7_icgraph.png" border="0" usemap="#agroup__driver3_gad2a10b704d2588035bde43ff6b941ea7_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_gad2a10b704d2588035bde43ff6b941ea7_icgraph" id="agroup__driver3_gad2a10b704d2588035bde43ff6b941ea7_icgraph">
<area shape="rect" title="Get the cached current for a channel." alt="" coords="671,5,836,32"/>
<area shape="rect" href="group__webui5.html#gabec26dab8e118ff845c2fde12dc885cf" title="Handles the HTTP request for the status page." alt="" coords="470,5,623,32"/>
<area shape="poly" title=" " alt="" coords="655,21,623,21,623,16,655,16"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="283,5,422,32"/>
<area shape="poly" title=" " alt="" coords="455,21,423,21,423,16,455,16"/>
<area shape="rect" href="group__main02.html#gad25e95c5993e865b3f941472b7a328e0" title="Core 1 task for handling SNMP and HTTP server." alt="" coords="150,5,235,32"/>
<area shape="poly" title=" " alt="" coords="267,21,235,21,235,16,267,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga5b03a8561efc81ded185e88ffc1574a9" name="ga5b03a8561efc81ded185e88ffc1574a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5b03a8561efc81ded185e88ffc1574a9">&#9670;&#160;</a></span>hlw8032_cached_power()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float hlw8032_cached_power </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the cached power for a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Channel index (0-7) to query </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Cached power in watts (W) for the specified channel </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga5b03a8561efc81ded185e88ffc1574a9_icgraph.png" border="0" usemap="#agroup__driver3_ga5b03a8561efc81ded185e88ffc1574a9_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga5b03a8561efc81ded185e88ffc1574a9_icgraph" id="agroup__driver3_ga5b03a8561efc81ded185e88ffc1574a9_icgraph">
<area shape="rect" title="Get the cached power for a channel." alt="" coords="671,5,831,32"/>
<area shape="rect" href="group__webui5.html#gabec26dab8e118ff845c2fde12dc885cf" title="Handles the HTTP request for the status page." alt="" coords="470,5,623,32"/>
<area shape="poly" title=" " alt="" coords="655,21,623,21,623,16,655,16"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="283,5,422,32"/>
<area shape="poly" title=" " alt="" coords="455,21,423,21,423,16,455,16"/>
<area shape="rect" href="group__main02.html#gad25e95c5993e865b3f941472b7a328e0" title="Core 1 task for handling SNMP and HTTP server." alt="" coords="150,5,235,32"/>
<area shape="poly" title=" " alt="" coords="267,21,235,21,235,16,267,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga01cdcd0497f8134e1ecb93331474dbdb" name="ga01cdcd0497f8134e1ecb93331474dbdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga01cdcd0497f8134e1ecb93331474dbdb">&#9670;&#160;</a></span>hlw8032_cached_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hlw8032_cached_state </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the cached state for a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Channel index (0-7) to query </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Cached state (true = ON, false = OFF) for the specified channel </dd></dl>

</div>
</div>
<a id="ga33d4652f0a85150f7dcba9f702b9893b" name="ga33d4652f0a85150f7dcba9f702b9893b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga33d4652f0a85150f7dcba9f702b9893b">&#9670;&#160;</a></span>hlw8032_cached_uptime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t hlw8032_cached_uptime </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the cached uptime for a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Channel index (0-7) to query </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Cached uptime in seconds for the specified channel </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga33d4652f0a85150f7dcba9f702b9893b_icgraph.png" border="0" usemap="#agroup__driver3_ga33d4652f0a85150f7dcba9f702b9893b_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga33d4652f0a85150f7dcba9f702b9893b_icgraph" id="agroup__driver3_ga33d4652f0a85150f7dcba9f702b9893b_icgraph">
<area shape="rect" title="Get the cached uptime for a channel." alt="" coords="671,5,835,32"/>
<area shape="rect" href="group__webui5.html#gabec26dab8e118ff845c2fde12dc885cf" title="Handles the HTTP request for the status page." alt="" coords="470,5,623,32"/>
<area shape="poly" title=" " alt="" coords="655,21,623,21,623,16,655,16"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="283,5,422,32"/>
<area shape="poly" title=" " alt="" coords="455,21,423,21,423,16,455,16"/>
<area shape="rect" href="group__main02.html#gad25e95c5993e865b3f941472b7a328e0" title="Core 1 task for handling SNMP and HTTP server." alt="" coords="150,5,235,32"/>
<area shape="poly" title=" " alt="" coords="267,21,235,21,235,16,267,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga3fd1465bd8f5106879ee5677d0d551da" name="ga3fd1465bd8f5106879ee5677d0d551da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3fd1465bd8f5106879ee5677d0d551da">&#9670;&#160;</a></span>hlw8032_cached_voltage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float hlw8032_cached_voltage </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the cached voltage for a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Channel index (0-7) to query </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Cached voltage in volts (V) for the specified channel </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga3fd1465bd8f5106879ee5677d0d551da_icgraph.png" border="0" usemap="#agroup__driver3_ga3fd1465bd8f5106879ee5677d0d551da_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga3fd1465bd8f5106879ee5677d0d551da_icgraph" id="agroup__driver3_ga3fd1465bd8f5106879ee5677d0d551da_icgraph">
<area shape="rect" title="Get the cached voltage for a channel." alt="" coords="671,5,838,32"/>
<area shape="rect" href="group__webui5.html#gabec26dab8e118ff845c2fde12dc885cf" title="Handles the HTTP request for the status page." alt="" coords="470,5,623,32"/>
<area shape="poly" title=" " alt="" coords="655,21,623,21,623,16,655,16"/>
<area shape="rect" href="group__webui3.html#ga52702a4dcaff4540a9ddd10e4d5f4525" title="Processes incoming HTTP requests." alt="" coords="283,5,422,32"/>
<area shape="poly" title=" " alt="" coords="455,21,423,21,423,16,455,16"/>
<area shape="rect" href="group__main02.html#gad25e95c5993e865b3f941472b7a328e0" title="Core 1 task for handling SNMP and HTTP server." alt="" coords="150,5,235,32"/>
<area shape="poly" title=" " alt="" coords="267,21,235,21,235,16,267,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga2688ff6d07f74455d95d323ff3c2a0dd" name="ga2688ff6d07f74455d95d323ff3c2a0dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2688ff6d07f74455d95d323ff3c2a0dd">&#9670;&#160;</a></span>hlw8032_get_current()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float hlw8032_get_current </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the most recently measured current. </p>
<dl class="section return"><dt>Returns</dt><dd>Current in amperes (A) from the last successful measurement </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga2688ff6d07f74455d95d323ff3c2a0dd_icgraph.png" border="0" usemap="#agroup__driver3_ga2688ff6d07f74455d95d323ff3c2a0dd_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga2688ff6d07f74455d95d323ff3c2a0dd_icgraph" id="agroup__driver3_ga2688ff6d07f74455d95d323ff3c2a0dd_icgraph">
<area shape="rect" title="Get the most recently measured current." alt="" coords="717,81,858,108"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="336,5,467,32"/>
<area shape="poly" title=" " alt="" coords="746,76,708,60,668,47,616,36,563,28,468,22,468,17,564,23,617,30,669,41,710,55,748,72"/>
<area shape="rect" href="group__uart.html#gaa0cfe9fea91a783744a3ef36f146da0a" title="Read and print HLW8032 sensor values for a specific channel." alt="" coords="515,56,669,83"/>
<area shape="poly" title=" " alt="" coords="701,86,669,82,670,77,702,81"/>
<area shape="rect" href="group__uart.html#ga900a7219fe90e05fa69922b219cd6cfd" title="Read and print HLW8032 sensor values for all channels." alt="" coords="529,107,655,133"/>
<area shape="poly" title=" " alt="" coords="702,108,655,115,655,109,701,103"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="524,157,660,184"/>
<area shape="poly" title=" " alt="" coords="743,117,670,148,638,159,636,154,668,143,741,112"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,31,102,57"/>
<area shape="poly" title=" " alt="" coords="320,27,103,43,102,38,320,22"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="336,56,467,83"/>
<area shape="poly" title=" " alt="" coords="500,72,468,72,468,67,500,67"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="150,56,288,83"/>
<area shape="poly" title=" " alt="" coords="321,72,289,72,289,67,321,67"/>
<area shape="poly" title=" " alt="" coords="134,59,101,54,102,49,135,54"/>
<area shape="poly" title=" " alt="" coords="524,105,454,86,455,81,525,99"/>
</map>
</div>

</div>
</div>
<a id="ga51e49b503d3ac1efe83fe87fae5d1dc5" name="ga51e49b503d3ac1efe83fe87fae5d1dc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51e49b503d3ac1efe83fe87fae5d1dc5">&#9670;&#160;</a></span>hlw8032_get_kwh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float hlw8032_get_kwh </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the accumulated energy consumption. </p>
<dl class="section return"><dt>Returns</dt><dd>Energy in kilowatt-hours (kWh) based on power measurements and pulse counts </dd></dl>

</div>
</div>
<a id="gaaa960776be4d3e02a4606c524dc5316b" name="gaaa960776be4d3e02a4606c524dc5316b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaa960776be4d3e02a4606c524dc5316b">&#9670;&#160;</a></span>hlw8032_get_power()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float hlw8032_get_power </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the most recently measured power. </p>
<dl class="section return"><dt>Returns</dt><dd>Power in watts (W) from the last successful measurement </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_gaaa960776be4d3e02a4606c524dc5316b_icgraph.png" border="0" usemap="#agroup__driver3_gaaa960776be4d3e02a4606c524dc5316b_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_gaaa960776be4d3e02a4606c524dc5316b_icgraph" id="agroup__driver3_gaaa960776be4d3e02a4606c524dc5316b_icgraph">
<area shape="rect" title="Get the most recently measured power." alt="" coords="717,81,853,108"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="336,5,467,32"/>
<area shape="poly" title=" " alt="" coords="744,76,708,60,668,47,616,36,563,28,468,22,468,16,564,23,617,30,669,41,710,55,746,72"/>
<area shape="rect" href="group__uart.html#gaa0cfe9fea91a783744a3ef36f146da0a" title="Read and print HLW8032 sensor values for a specific channel." alt="" coords="515,56,669,83"/>
<area shape="poly" title=" " alt="" coords="701,86,668,82,669,77,702,81"/>
<area shape="rect" href="group__uart.html#ga900a7219fe90e05fa69922b219cd6cfd" title="Read and print HLW8032 sensor values for all channels." alt="" coords="529,107,655,133"/>
<area shape="poly" title=" " alt="" coords="702,108,656,114,655,109,701,103"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="524,157,660,184"/>
<area shape="poly" title=" " alt="" coords="741,117,670,148,638,159,636,154,668,143,739,112"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,31,102,57"/>
<area shape="poly" title=" " alt="" coords="320,27,103,43,102,38,320,22"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="336,56,467,83"/>
<area shape="poly" title=" " alt="" coords="500,72,468,72,468,67,500,67"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="150,56,288,83"/>
<area shape="poly" title=" " alt="" coords="321,72,289,72,289,67,321,67"/>
<area shape="poly" title=" " alt="" coords="134,59,101,54,102,49,135,54"/>
<area shape="poly" title=" " alt="" coords="524,105,454,86,455,81,525,99"/>
</map>
</div>

</div>
</div>
<a id="gaa7854260caacda8a089ed5efc9f76d3a" name="gaa7854260caacda8a089ed5efc9f76d3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa7854260caacda8a089ed5efc9f76d3a">&#9670;&#160;</a></span>hlw8032_get_power_factor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float hlw8032_get_power_factor </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the power factor from the most recent measurements. </p>
<dl class="section return"><dt>Returns</dt><dd>Power factor (0.0-1.0) calculated as actual power / apparent power </dd></dl>

</div>
</div>
<a id="ga3a21e794f2114fb509dd0da98ee942cc" name="ga3a21e794f2114fb509dd0da98ee942cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a21e794f2114fb509dd0da98ee942cc">&#9670;&#160;</a></span>hlw8032_get_power_inspect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float hlw8032_get_power_inspect </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get power value calculated from voltage and current measurements. </p>
<dl class="section return"><dt>Returns</dt><dd>Power in watts (W) calculated as voltage * current </dd></dl>

</div>
</div>
<a id="ga3e3e299137c4b5355cd17f94ddc24899" name="ga3e3e299137c4b5355cd17f94ddc24899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3e3e299137c4b5355cd17f94ddc24899">&#9670;&#160;</a></span>hlw8032_get_uptime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t hlw8032_get_uptime </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the accumulated uptime for a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Channel index (0-7) to query </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Total uptime in seconds for the specified channel </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga3e3e299137c4b5355cd17f94ddc24899_icgraph.png" border="0" usemap="#agroup__driver3_ga3e3e299137c4b5355cd17f94ddc24899_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga3e3e299137c4b5355cd17f94ddc24899_icgraph" id="agroup__driver3_ga3e3e299137c4b5355cd17f94ddc24899_icgraph">
<area shape="rect" title="Get the accumulated uptime for a channel." alt="" coords="334,31,474,57"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="152,5,284,32"/>
<area shape="poly" title=" " alt="" coords="318,35,283,30,284,25,319,30"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="150,56,286,83"/>
<area shape="poly" title=" " alt="" coords="319,58,287,63,286,57,318,53"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="136,21,102,21,102,16,136,16"/>
</map>
</div>

</div>
</div>
<a id="ga6fb634639b04ca4cfd297f7c48a0c181" name="ga6fb634639b04ca4cfd297f7c48a0c181"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6fb634639b04ca4cfd297f7c48a0c181">&#9670;&#160;</a></span>hlw8032_get_voltage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float hlw8032_get_voltage </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the most recently measured voltage. </p>
<dl class="section return"><dt>Returns</dt><dd>Voltage in volts (V) from the last successful measurement </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga6fb634639b04ca4cfd297f7c48a0c181_icgraph.png" border="0" usemap="#agroup__driver3_ga6fb634639b04ca4cfd297f7c48a0c181_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga6fb634639b04ca4cfd297f7c48a0c181_icgraph" id="agroup__driver3_ga6fb634639b04ca4cfd297f7c48a0c181_icgraph">
<area shape="rect" title="Get the most recently measured voltage." alt="" coords="717,81,860,108"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="336,5,467,32"/>
<area shape="poly" title=" " alt="" coords="746,76,709,60,668,47,616,36,563,29,468,22,468,17,564,23,617,31,669,41,711,55,748,72"/>
<area shape="rect" href="group__uart.html#gaa0cfe9fea91a783744a3ef36f146da0a" title="Read and print HLW8032 sensor values for a specific channel." alt="" coords="515,56,669,83"/>
<area shape="poly" title=" " alt="" coords="701,86,669,82,670,77,702,81"/>
<area shape="rect" href="group__uart.html#ga900a7219fe90e05fa69922b219cd6cfd" title="Read and print HLW8032 sensor values for all channels." alt="" coords="529,107,655,133"/>
<area shape="poly" title=" " alt="" coords="702,108,655,115,655,109,701,103"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="524,157,660,184"/>
<area shape="poly" title=" " alt="" coords="744,117,670,148,637,159,636,154,668,143,742,112"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,31,102,57"/>
<area shape="poly" title=" " alt="" coords="320,27,103,43,102,38,320,22"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="336,56,467,83"/>
<area shape="poly" title=" " alt="" coords="500,72,468,72,468,67,500,67"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="150,56,288,83"/>
<area shape="poly" title=" " alt="" coords="321,72,289,72,289,67,321,67"/>
<area shape="poly" title=" " alt="" coords="134,59,101,54,102,49,135,54"/>
<area shape="poly" title=" " alt="" coords="524,105,454,86,455,81,525,99"/>
</map>
</div>

</div>
</div>
<a id="gac1bd84c5a254283faacc776489f36625" name="gac1bd84c5a254283faacc776489f36625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac1bd84c5a254283faacc776489f36625">&#9670;&#160;</a></span>hlw8032_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hlw8032_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the HLW8032 power measurement interface. </p>
<p>This function initializes the UART interface for the HLW8032 power measurement chip. It configures the UART with 8 data bits, 1 stop bit, and even parity. It also activates the multiplexer by setting the MUX_ENABLE pin low. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_gac1bd84c5a254283faacc776489f36625_cgraph.png" border="0" usemap="#agroup__driver3_gac1bd84c5a254283faacc776489f36625_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_gac1bd84c5a254283faacc776489f36625_cgraph" id="agroup__driver3_gac1bd84c5a254283faacc776489f36625_cgraph">
<area shape="rect" title="Initialize the HLW8032 power measurement interface." alt="" coords="5,132,99,159"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="147,132,287,159"/>
<area shape="poly" title=" " alt="" coords="99,143,131,143,131,148,99,148"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="531,5,609,32"/>
<area shape="poly" title=" " alt="" coords="247,129,334,92,516,32,517,37,336,97,249,134"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="335,107,440,133"/>
<area shape="poly" title=" " alt="" coords="287,132,319,127,320,133,288,138"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="524,208,616,235"/>
<area shape="poly" title=" " alt="" coords="283,157,509,206,508,211,282,162"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="488,157,652,184"/>
<area shape="poly" title=" " alt="" coords="288,148,473,161,473,166,287,153"/>
<area shape="poly" title=" " alt="" coords="405,104,441,77,487,48,516,35,518,40,490,53,444,81,408,108"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="542,107,598,133"/>
<area shape="poly" title=" " alt="" coords="441,117,526,117,526,123,441,123"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="700,107,759,133"/>
<area shape="poly" title=" " alt="" coords="433,104,488,92,570,84,652,92,685,100,684,106,651,97,570,90,489,97,434,109"/>
<area shape="poly" title=" " alt="" coords="405,132,442,162,490,194,511,203,509,208,487,198,439,167,402,136"/>
<area shape="poly" title=" " alt="" coords="439,131,505,150,504,155,438,137"/>
<area shape="poly" title=" " alt="" coords="615,154,651,143,684,132,685,137,652,148,617,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_gac1bd84c5a254283faacc776489f36625_icgraph.png" border="0" usemap="#agroup__driver3_gac1bd84c5a254283faacc776489f36625_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_gac1bd84c5a254283faacc776489f36625_icgraph" id="agroup__driver3_gac1bd84c5a254283faacc776489f36625_icgraph">
<area shape="rect" title="Initialize the HLW8032 power measurement interface." alt="" coords="275,5,368,32"/>
<area shape="rect" href="group__main03.html#gafe3a0b770057ac7103be4185e393395f" title="Initializes Core 0." alt="" coords="150,5,227,32"/>
<area shape="poly" title=" " alt="" coords="259,21,227,21,227,16,259,16"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga0b3a5c410541deaf144c3e33d4b65175" name="ga0b3a5c410541deaf144c3e33d4b65175"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0b3a5c410541deaf144c3e33d4b65175">&#9670;&#160;</a></span>hlw8032_poll_once()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hlw8032_poll_once </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Poll a single channel for power measurements. </p>
<p>This function reads the current state and power measurements for one channel in a round-robin fashion. It updates cached values for the current channel and increments to the next channel for the next call. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga0b3a5c410541deaf144c3e33d4b65175_cgraph.png" border="0" usemap="#agroup__driver3_ga0b3a5c410541deaf144c3e33d4b65175_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga0b3a5c410541deaf144c3e33d4b65175_cgraph" id="agroup__driver3_ga0b3a5c410541deaf144c3e33d4b65175_cgraph">
<area shape="rect" title="Poll a single channel for power measurements." alt="" coords="5,157,137,184"/>
<area shape="rect" href="group__driver3.html#ga2688ff6d07f74455d95d323ff3c2a0dd" title="Get the most recently measured current." alt="" coords="195,5,336,32"/>
<area shape="poly" title=" " alt="" coords="79,155,119,101,149,69,183,42,192,37,195,41,186,46,153,73,123,104,83,159"/>
<area shape="rect" href="group__driver3.html#gaaa960776be4d3e02a4606c524dc5316b" title="Get the most recently measured power." alt="" coords="197,56,334,83"/>
<area shape="poly" title=" " alt="" coords="88,155,130,124,183,92,197,86,200,91,186,97,133,128,91,159"/>
<area shape="rect" href="group__driver3.html#ga3e3e299137c4b5355cd17f94ddc24899" title="Get the accumulated uptime for a channel." alt="" coords="195,107,336,133"/>
<area shape="poly" title=" " alt="" coords="125,154,196,135,198,140,126,159"/>
<area shape="rect" href="group__driver3.html#ga6fb634639b04ca4cfd297f7c48a0c181" title="Get the most recently measured voltage." alt="" coords="194,157,337,184"/>
<area shape="poly" title=" " alt="" coords="137,168,178,168,178,173,137,173"/>
<area shape="rect" href="group__driver3.html#ga204d3cdc833db3ce315ff247e3f79400" title="Read power measurements from the specified channel." alt="" coords="215,208,316,235"/>
<area shape="poly" title=" " alt="" coords="126,182,201,202,199,207,125,187"/>
<area shape="rect" href="group__driver3.html#gacfd84777ef919c041f40ea955f672d5e" title="Update the uptime counter for a channel based on its state." alt="" coords="185,309,346,336"/>
<area shape="poly" title=" " alt="" coords="84,183,125,233,154,263,186,288,208,301,205,305,183,293,150,267,121,237,80,186"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="532,259,669,285"/>
<area shape="poly" title=" " alt="" coords="89,182,130,215,157,231,186,244,272,266,360,276,444,279,516,277,517,282,444,284,360,282,271,271,184,249,154,236,127,219,85,186"/>
<area shape="rect" href="group__driver3.html#ga317577d37ad844a15b55a8f5e55126f3" title="Select a channel on the multiplexer." alt="" coords="394,208,482,235"/>
<area shape="poly" title=" " alt="" coords="316,219,379,219,379,224,316,224"/>
<area shape="rect" href="group__driver3.html#ga1cdae985fb0d22061b8e24fa8c175acc" title="Read one valid 24&#45;byte frame from the UART." alt="" coords="395,157,481,184"/>
<area shape="poly" title=" " alt="" coords="313,205,379,185,381,190,314,210"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="530,208,671,235"/>
<area shape="poly" title=" " alt="" coords="483,219,515,219,515,224,483,224"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="915,284,992,311"/>
<area shape="poly" title=" " alt="" coords="644,233,672,244,696,258,720,269,766,281,814,288,899,295,899,300,813,294,765,286,718,275,693,263,669,249,642,238"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="719,233,824,260"/>
<area shape="poly" title=" " alt="" coords="672,229,704,234,703,239,671,234"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="908,183,999,209"/>
<area shape="poly" title=" " alt="" coords="639,205,670,194,693,183,718,175,764,170,810,170,893,180,893,185,810,175,764,175,719,180,695,188,672,198,641,210"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="872,132,1035,159"/>
<area shape="poly" title=" " alt="" coords="645,205,669,194,683,183,692,173,702,162,718,154,752,143,787,137,857,133,857,139,788,142,753,148,720,158,705,167,696,176,686,187,672,198,648,210"/>
<area shape="poly" title=" " alt="" coords="823,258,901,280,900,285,822,263"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="926,360,982,387"/>
<area shape="poly" title=" " alt="" coords="792,258,874,320,918,349,915,354,870,325,788,263"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="1083,183,1143,209"/>
<area shape="poly" title=" " alt="" coords="824,242,923,235,1035,219,1068,210,1069,215,1036,224,923,241,825,248"/>
<area shape="poly" title=" " alt="" coords="822,230,893,210,894,215,823,235"/>
<area shape="poly" title=" " alt="" coords="785,231,822,200,871,168,884,162,886,167,873,173,826,204,789,235"/>
<area shape="poly" title=" " alt="" coords="1000,157,1036,168,1069,179,1067,184,1035,173,999,162"/>
<area shape="rect" href="group__driver3.html#ga8c3364fbeb1899ae2c744c1c78ea30be" title="Validate the checksum of a HLW8032 frame." alt="" coords="549,157,652,184"/>
<area shape="poly" title=" " alt="" coords="482,168,534,168,534,173,482,173"/>
<area shape="poly" title=" " alt="" coords="631,283,672,300,719,313,766,318,814,318,899,307,900,312,815,323,766,324,718,319,670,305,629,288"/>
<area shape="poly" title=" " alt="" coords="669,259,703,254,704,259,670,264"/>
<area shape="poly" title=" " alt="" coords="628,284,670,304,719,324,822,350,911,365,910,371,821,356,718,329,668,309,626,288"/>
<area shape="poly" title=" " alt="" coords="642,256,669,244,693,231,718,219,763,208,809,200,892,194,893,199,809,206,764,213,720,224,696,235,672,249,644,260"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga0b3a5c410541deaf144c3e33d4b65175_icgraph.png" border="0" usemap="#agroup__driver3_ga0b3a5c410541deaf144c3e33d4b65175_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga0b3a5c410541deaf144c3e33d4b65175_icgraph" id="agroup__driver3_ga0b3a5c410541deaf144c3e33d4b65175_icgraph">
<area shape="rect" title="Poll a single channel for power measurements." alt="" coords="150,5,281,32"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ga204d3cdc833db3ce315ff247e3f79400" name="ga204d3cdc833db3ce315ff247e3f79400"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga204d3cdc833db3ce315ff247e3f79400">&#9670;&#160;</a></span>hlw8032_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hlw8032_read </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>channel</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read power measurements from the specified channel. </p>
<p>Read and parse a measurement frame for a given channel.</p>
<p>This function reads and parses a measurement frame from the HLW8032 chip for a given channel. It selects the appropriate multiplexer channel, flushes any stale data, and reads a fresh frame. The raw values are parsed and converted to scaled voltage, current, and power measurements.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>Channel index (0-7) to read from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a valid frame was read and parsed successfully, false otherwise </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga204d3cdc833db3ce315ff247e3f79400_cgraph.png" border="0" usemap="#agroup__driver3_ga204d3cdc833db3ce315ff247e3f79400_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga204d3cdc833db3ce315ff247e3f79400_cgraph" id="agroup__driver3_ga204d3cdc833db3ce315ff247e3f79400_cgraph">
<area shape="rect" title="Read power measurements from the specified channel." alt="" coords="5,157,107,184"/>
<area shape="rect" href="group__driver3.html#ga317577d37ad844a15b55a8f5e55126f3" title="Select a channel on the multiplexer." alt="" coords="155,132,243,159"/>
<area shape="poly" title=" " alt="" coords="107,159,139,153,140,158,108,164"/>
<area shape="rect" href="group__driver3.html#ga1cdae985fb0d22061b8e24fa8c175acc" title="Read one valid 24&#45;byte frame from the UART." alt="" coords="156,183,242,209"/>
<area shape="poly" title=" " alt="" coords="108,177,141,183,140,188,107,182"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="291,132,431,159"/>
<area shape="poly" title=" " alt="" coords="243,143,276,143,276,148,243,148"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="676,5,753,32"/>
<area shape="poly" title=" " alt="" coords="391,129,478,92,660,32,662,37,480,97,393,134"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="479,107,585,133"/>
<area shape="poly" title=" " alt="" coords="431,132,463,127,464,133,432,138"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="669,208,760,235"/>
<area shape="poly" title=" " alt="" coords="427,157,654,206,653,211,426,162"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="633,157,796,184"/>
<area shape="poly" title=" " alt="" coords="432,148,617,161,617,166,432,153"/>
<area shape="poly" title=" " alt="" coords="549,104,586,77,631,48,660,35,663,40,634,53,589,81,552,108"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="686,107,742,133"/>
<area shape="poly" title=" " alt="" coords="585,117,670,117,670,123,585,123"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="844,107,903,133"/>
<area shape="poly" title=" " alt="" coords="577,104,632,92,714,84,796,92,830,100,828,106,796,97,714,90,633,97,578,109"/>
<area shape="poly" title=" " alt="" coords="549,132,586,162,634,194,655,203,653,208,631,198,583,167,546,136"/>
<area shape="poly" title=" " alt="" coords="584,131,650,150,648,155,582,137"/>
<area shape="poly" title=" " alt="" coords="760,154,795,143,828,132,830,137,797,148,761,159"/>
<area shape="rect" href="group__driver3.html#ga8c3364fbeb1899ae2c744c1c78ea30be" title="Validate the checksum of a HLW8032 frame." alt="" coords="310,183,412,209"/>
<area shape="poly" title=" " alt="" coords="243,193,295,193,295,199,243,199"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga204d3cdc833db3ce315ff247e3f79400_icgraph.png" border="0" usemap="#agroup__driver3_ga204d3cdc833db3ce315ff247e3f79400_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga204d3cdc833db3ce315ff247e3f79400_icgraph" id="agroup__driver3_ga204d3cdc833db3ce315ff247e3f79400_icgraph">
<area shape="rect" title="Read power measurements from the specified channel." alt="" coords="717,81,818,108"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="336,5,467,32"/>
<area shape="poly" title=" " alt="" coords="731,75,701,59,668,47,616,34,563,27,467,21,468,15,564,21,617,29,669,41,703,55,733,71"/>
<area shape="rect" href="group__uart.html#gaa0cfe9fea91a783744a3ef36f146da0a" title="Read and print HLW8032 sensor values for a specific channel." alt="" coords="515,56,669,83"/>
<area shape="poly" title=" " alt="" coords="701,88,668,83,669,78,701,83"/>
<area shape="rect" href="group__uart.html#ga900a7219fe90e05fa69922b219cd6cfd" title="Read and print HLW8032 sensor values for all channels." alt="" coords="529,107,655,133"/>
<area shape="poly" title=" " alt="" coords="702,107,655,114,654,108,701,102"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="524,157,660,184"/>
<area shape="poly" title=" " alt="" coords="730,118,670,148,639,159,637,154,668,143,727,114"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,31,102,57"/>
<area shape="poly" title=" " alt="" coords="320,27,103,43,102,38,320,22"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="336,56,467,83"/>
<area shape="poly" title=" " alt="" coords="500,72,468,72,468,67,500,67"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="150,56,288,83"/>
<area shape="poly" title=" " alt="" coords="321,72,289,72,289,67,321,67"/>
<area shape="poly" title=" " alt="" coords="134,59,101,54,102,49,135,54"/>
<area shape="poly" title=" " alt="" coords="524,105,454,86,455,81,525,99"/>
</map>
</div>

</div>
</div>
<a id="ga76f09e4482db113563628126492d3200" name="ga76f09e4482db113563628126492d3200"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76f09e4482db113563628126492d3200">&#9670;&#160;</a></span>hlw8032_refresh_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hlw8032_refresh_all </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Refresh power measurements for all channels. </p>
<p>This function reads and caches power measurements for all 8 channels. It is a blocking function that updates voltage, current, power and uptime values for each channel sequentially.</p>
<p>Intended to be called periodically by Core0 to provide fresh measurements that can be read by either core without blocking.</p>
<dl class="section note"><dt>Note</dt><dd>This function blocks for the duration of reading all channels, and makes serial communication unresponsive during this time. Not used anymore </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga76f09e4482db113563628126492d3200_cgraph.png" border="0" usemap="#agroup__driver3_ga76f09e4482db113563628126492d3200_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga76f09e4482db113563628126492d3200_cgraph" id="agroup__driver3_ga76f09e4482db113563628126492d3200_cgraph">
<area shape="rect" title="Refresh power measurements for all channels." alt="" coords="5,157,142,184"/>
<area shape="rect" href="group__driver3.html#ga2688ff6d07f74455d95d323ff3c2a0dd" title="Get the most recently measured current." alt="" coords="200,5,341,32"/>
<area shape="poly" title=" " alt="" coords="81,155,123,101,153,69,188,42,198,36,200,41,191,46,157,73,127,104,86,159"/>
<area shape="rect" href="group__driver3.html#gaaa960776be4d3e02a4606c524dc5316b" title="Get the most recently measured power." alt="" coords="202,56,338,83"/>
<area shape="poly" title=" " alt="" coords="91,155,134,124,188,92,203,86,205,91,191,97,137,128,94,159"/>
<area shape="rect" href="group__driver3.html#ga3e3e299137c4b5355cd17f94ddc24899" title="Get the accumulated uptime for a channel." alt="" coords="200,107,340,133"/>
<area shape="poly" title=" " alt="" coords="128,154,200,135,201,140,129,159"/>
<area shape="rect" href="group__driver3.html#ga6fb634639b04ca4cfd297f7c48a0c181" title="Get the most recently measured voltage." alt="" coords="199,157,342,184"/>
<area shape="poly" title=" " alt="" coords="142,168,183,168,183,173,142,173"/>
<area shape="rect" href="group__driver3.html#ga204d3cdc833db3ce315ff247e3f79400" title="Read power measurements from the specified channel." alt="" coords="220,208,321,235"/>
<area shape="poly" title=" " alt="" coords="129,182,206,202,204,207,128,187"/>
<area shape="rect" href="group__driver3.html#gacfd84777ef919c041f40ea955f672d5e" title="Update the uptime counter for a channel based on its state." alt="" coords="190,309,351,336"/>
<area shape="poly" title=" " alt="" coords="87,183,129,233,158,263,191,288,213,300,210,305,188,293,155,267,125,237,83,186"/>
<area shape="rect" href="group__driver7.html#ga9b5f742b94d4fe906f755ee724283ed0" title="Reads the digital value from a specific MCP23017 pin." alt="" coords="537,259,674,285"/>
<area shape="poly" title=" " alt="" coords="91,182,134,215,161,231,191,244,277,265,365,276,449,279,522,277,522,282,449,284,365,281,276,271,189,249,159,236,131,219,88,186"/>
<area shape="rect" href="group__driver3.html#ga317577d37ad844a15b55a8f5e55126f3" title="Select a channel on the multiplexer." alt="" coords="399,208,487,235"/>
<area shape="poly" title=" " alt="" coords="321,219,384,219,384,224,321,224"/>
<area shape="rect" href="group__driver3.html#ga1cdae985fb0d22061b8e24fa8c175acc" title="Read one valid 24&#45;byte frame from the UART." alt="" coords="400,157,486,184"/>
<area shape="poly" title=" " alt="" coords="318,205,384,185,386,190,319,210"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="535,208,676,235"/>
<area shape="poly" title=" " alt="" coords="488,219,520,219,520,224,488,224"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="920,284,997,311"/>
<area shape="poly" title=" " alt="" coords="649,233,677,244,701,258,725,269,771,281,819,288,904,295,904,300,818,294,770,286,723,275,698,263,674,249,647,238"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="724,233,829,260"/>
<area shape="poly" title=" " alt="" coords="677,229,709,234,708,239,676,234"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="913,183,1004,209"/>
<area shape="poly" title=" " alt="" coords="644,205,675,194,698,183,723,175,769,170,815,170,898,180,898,185,815,175,769,175,724,180,700,188,677,198,646,210"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="877,132,1040,159"/>
<area shape="poly" title=" " alt="" coords="650,205,674,194,688,183,697,173,707,162,723,154,757,143,792,137,862,133,862,139,793,142,758,148,725,158,710,167,701,176,691,187,677,198,653,210"/>
<area shape="poly" title=" " alt="" coords="828,258,906,280,905,285,827,263"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="930,360,987,387"/>
<area shape="poly" title=" " alt="" coords="797,258,879,320,923,349,920,354,875,325,793,263"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="1088,183,1148,209"/>
<area shape="poly" title=" " alt="" coords="829,242,928,235,1040,219,1073,210,1074,215,1041,224,928,241,830,248"/>
<area shape="poly" title=" " alt="" coords="827,230,898,210,899,215,828,235"/>
<area shape="poly" title=" " alt="" coords="790,231,827,200,876,168,889,162,891,167,878,173,831,204,794,235"/>
<area shape="poly" title=" " alt="" coords="1005,157,1041,168,1074,179,1072,184,1040,173,1004,162"/>
<area shape="rect" href="group__driver3.html#ga8c3364fbeb1899ae2c744c1c78ea30be" title="Validate the checksum of a HLW8032 frame." alt="" coords="554,157,657,184"/>
<area shape="poly" title=" " alt="" coords="487,168,539,168,539,173,487,173"/>
<area shape="poly" title=" " alt="" coords="636,283,677,300,724,313,771,318,819,318,904,307,905,312,820,323,771,324,723,319,675,305,634,288"/>
<area shape="poly" title=" " alt="" coords="674,259,708,254,709,259,675,264"/>
<area shape="poly" title=" " alt="" coords="633,284,675,304,724,324,827,350,916,365,915,371,826,356,723,329,673,309,631,288"/>
<area shape="poly" title=" " alt="" coords="647,256,674,244,698,231,723,219,768,208,814,200,897,194,898,199,814,206,769,213,725,224,701,235,677,249,649,260"/>
</map>
</div>

</div>
</div>
<a id="gacfd84777ef919c041f40ea955f672d5e" name="gacfd84777ef919c041f40ea955f672d5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacfd84777ef919c041f40ea955f672d5e">&#9670;&#160;</a></span>hlw8032_update_uptime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hlw8032_update_uptime </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>ch</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>state</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the uptime counter for a channel based on its state. </p>
<p>This function tracks the total time a channel has been in the ON state. It accumulates elapsed time when a channel remains ON and resets timing when a channel is turned OFF.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Channel index (0-7) to update </td></tr>
    <tr><td class="paramname">state</td><td>Current state of the channel (true = ON, false = OFF) </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_gacfd84777ef919c041f40ea955f672d5e_icgraph.png" border="0" usemap="#agroup__driver3_gacfd84777ef919c041f40ea955f672d5e_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_gacfd84777ef919c041f40ea955f672d5e_icgraph" id="agroup__driver3_gacfd84777ef919c041f40ea955f672d5e_icgraph">
<area shape="rect" title="Update the uptime counter for a channel based on its state." alt="" coords="334,31,495,57"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="152,5,284,32"/>
<area shape="poly" title=" " alt="" coords="319,34,284,30,284,24,319,29"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="150,56,286,83"/>
<area shape="poly" title=" " alt="" coords="319,59,287,63,286,58,319,54"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,5,102,32"/>
<area shape="poly" title=" " alt="" coords="136,21,102,21,102,16,136,16"/>
</map>
</div>

</div>
</div>
<a id="ga317577d37ad844a15b55a8f5e55126f3" name="ga317577d37ad844a15b55a8f5e55126f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga317577d37ad844a15b55a8f5e55126f3">&#9670;&#160;</a></span>mux_select()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mux_select </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Select a channel on the multiplexer. </p>
<p>This function sets the multiplexer select pins to choose one of 8 channels. It uses a binary encoding (3 bits) to select the desired channel.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Channel index (0-7) to select </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga317577d37ad844a15b55a8f5e55126f3_cgraph.png" border="0" usemap="#agroup__driver3_ga317577d37ad844a15b55a8f5e55126f3_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga317577d37ad844a15b55a8f5e55126f3_cgraph" id="agroup__driver3_ga317577d37ad844a15b55a8f5e55126f3_cgraph">
<area shape="rect" title="Select a channel on the multiplexer." alt="" coords="5,132,94,159"/>
<area shape="rect" href="group__driver7.html#ga553fcd3d3d73cb09bc17d6b28b6e914c" title="Writes a digital value to a specific MCP23017 pin. Uses shadowed whole&#45;port writes under a mutex to a..." alt="" coords="142,132,282,159"/>
<area shape="poly" title=" " alt="" coords="94,143,126,143,126,148,94,148"/>
<area shape="rect" href="group__driver7.html#gaba4e8ca33cf356bc41af763ae4aa3310" title=" " alt="" coords="526,5,604,32"/>
<area shape="poly" title=" " alt="" coords="242,129,329,92,511,32,512,37,331,97,244,134"/>
<area shape="rect" href="group__driver7.html#ga5d50f36be11f0195d0f36b793b69e4fb" title="Initializes the relay board&#39;s MCP23017." alt="" coords="330,107,435,133"/>
<area shape="poly" title=" " alt="" coords="282,132,314,127,315,133,283,138"/>
<area shape="rect" href="group__driver7.html#ga713d78b9106bd7706abb1ed29d8fad27" title=" " alt="" coords="519,208,611,235"/>
<area shape="poly" title=" " alt="" coords="278,157,504,206,503,211,277,162"/>
<area shape="rect" href="group__driver7.html#ga51d31ad5757c79b0f72f1e785115efed" title=" " alt="" coords="483,157,647,184"/>
<area shape="poly" title=" " alt="" coords="283,148,468,161,468,166,282,153"/>
<area shape="poly" title=" " alt="" coords="400,104,436,77,482,48,511,35,513,40,485,53,439,81,403,108"/>
<area shape="rect" href="group__driver7.html#ga4cde98019aa1b07cd4c5f6bd7929bd8c" title=" " alt="" coords="537,107,593,133"/>
<area shape="poly" title=" " alt="" coords="436,117,521,117,521,123,436,123"/>
<area shape="rect" href="group__driver7.html#ga88ff03a249bfc75eaac4cab1d7955107" title=" " alt="" coords="695,107,754,133"/>
<area shape="poly" title=" " alt="" coords="428,104,483,92,565,84,647,92,680,100,679,106,646,97,565,90,484,97,429,109"/>
<area shape="poly" title=" " alt="" coords="400,132,437,162,485,194,506,203,504,208,482,198,434,167,397,136"/>
<area shape="poly" title=" " alt="" coords="434,131,500,150,499,155,433,137"/>
<area shape="poly" title=" " alt="" coords="610,154,646,143,679,132,680,137,647,148,612,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga317577d37ad844a15b55a8f5e55126f3_icgraph.png" border="0" usemap="#agroup__driver3_ga317577d37ad844a15b55a8f5e55126f3_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga317577d37ad844a15b55a8f5e55126f3_icgraph" id="agroup__driver3_ga317577d37ad844a15b55a8f5e55126f3_icgraph">
<area shape="rect" title="Select a channel on the multiplexer." alt="" coords="866,81,954,108"/>
<area shape="rect" href="group__driver3.html#ga204d3cdc833db3ce315ff247e3f79400" title="Read power measurements from the specified channel." alt="" coords="717,81,818,108"/>
<area shape="poly" title=" " alt="" coords="850,97,818,97,818,92,850,92"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="336,5,467,32"/>
<area shape="poly" title=" " alt="" coords="731,75,701,59,668,47,616,34,563,27,467,21,468,15,564,21,617,29,669,41,703,55,733,71"/>
<area shape="rect" href="group__uart.html#gaa0cfe9fea91a783744a3ef36f146da0a" title="Read and print HLW8032 sensor values for a specific channel." alt="" coords="515,56,669,83"/>
<area shape="poly" title=" " alt="" coords="701,88,668,83,669,78,701,83"/>
<area shape="rect" href="group__uart.html#ga900a7219fe90e05fa69922b219cd6cfd" title="Read and print HLW8032 sensor values for all channels." alt="" coords="529,107,655,133"/>
<area shape="poly" title=" " alt="" coords="702,107,655,114,654,108,701,102"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="524,157,660,184"/>
<area shape="poly" title=" " alt="" coords="730,118,670,148,639,159,637,154,668,143,727,114"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,31,102,57"/>
<area shape="poly" title=" " alt="" coords="320,27,103,43,102,38,320,22"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="336,56,467,83"/>
<area shape="poly" title=" " alt="" coords="500,72,468,72,468,67,500,67"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="150,56,288,83"/>
<area shape="poly" title=" " alt="" coords="321,72,289,72,289,67,321,67"/>
<area shape="poly" title=" " alt="" coords="134,59,101,54,102,49,135,54"/>
<area shape="poly" title=" " alt="" coords="524,105,454,86,455,81,525,99"/>
</map>
</div>

</div>
</div>
<a id="ga1cdae985fb0d22061b8e24fa8c175acc" name="ga1cdae985fb0d22061b8e24fa8c175acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1cdae985fb0d22061b8e24fa8c175acc">&#9670;&#160;</a></span>read_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool read_frame </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read one valid 24-byte frame from the UART. </p>
<p>This function attempts to read a valid frame from the HLW8032 chip via UART. It has a timeout mechanism and scans the received data for a valid frame with correct checksum.</p>
<dl class="section return"><dt>Returns</dt><dd>true if a valid frame was read, false on timeout or checksum failure </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga1cdae985fb0d22061b8e24fa8c175acc_cgraph.png" border="0" usemap="#agroup__driver3_ga1cdae985fb0d22061b8e24fa8c175acc_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga1cdae985fb0d22061b8e24fa8c175acc_cgraph" id="agroup__driver3_ga1cdae985fb0d22061b8e24fa8c175acc_cgraph">
<area shape="rect" title="Read one valid 24&#45;byte frame from the UART." alt="" coords="5,5,92,32"/>
<area shape="rect" href="group__driver3.html#ga8c3364fbeb1899ae2c744c1c78ea30be" title="Validate the checksum of a HLW8032 frame." alt="" coords="140,5,242,32"/>
<area shape="poly" title=" " alt="" coords="92,16,124,16,124,21,92,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__driver3_ga1cdae985fb0d22061b8e24fa8c175acc_icgraph.png" border="0" usemap="#agroup__driver3_ga1cdae985fb0d22061b8e24fa8c175acc_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__driver3_ga1cdae985fb0d22061b8e24fa8c175acc_icgraph" id="agroup__driver3_ga1cdae985fb0d22061b8e24fa8c175acc_icgraph">
<area shape="rect" title="Read one valid 24&#45;byte frame from the UART." alt="" coords="866,81,952,108"/>
<area shape="rect" href="group__driver3.html#ga204d3cdc833db3ce315ff247e3f79400" title="Read power measurements from the specified channel." alt="" coords="717,81,818,108"/>
<area shape="poly" title=" " alt="" coords="851,97,818,97,818,92,851,92"/>
<area shape="rect" href="group__driver3.html#ga0b3a5c410541deaf144c3e33d4b65175" title="Poll a single channel for power measurements." alt="" coords="336,5,467,32"/>
<area shape="poly" title=" " alt="" coords="731,75,701,59,668,47,616,34,563,27,467,21,468,15,564,21,617,29,669,41,703,55,733,71"/>
<area shape="rect" href="group__uart.html#gaa0cfe9fea91a783744a3ef36f146da0a" title="Read and print HLW8032 sensor values for a specific channel." alt="" coords="515,56,669,83"/>
<area shape="poly" title=" " alt="" coords="701,88,668,83,669,78,701,83"/>
<area shape="rect" href="group__uart.html#ga900a7219fe90e05fa69922b219cd6cfd" title="Read and print HLW8032 sensor values for all channels." alt="" coords="529,107,655,133"/>
<area shape="poly" title=" " alt="" coords="702,107,655,114,654,108,701,102"/>
<area shape="rect" href="group__driver3.html#ga76f09e4482db113563628126492d3200" title="Refresh power measurements for all channels." alt="" coords="524,157,660,184"/>
<area shape="poly" title=" " alt="" coords="730,118,670,148,639,159,637,154,668,143,727,114"/>
<area shape="rect" href="group__main01.html#gae3fa85d0ce445e937670de85f9af490a" title="Global variable to trigger BOOTSEL mode." alt="" coords="5,31,102,57"/>
<area shape="poly" title=" " alt="" coords="320,27,103,43,102,38,320,22"/>
<area shape="rect" href="group__uart.html#gaf78d8689607ba97d44d30e4e3fc56533" title="Parse and execute a received UART command string." alt="" coords="336,56,467,83"/>
<area shape="poly" title=" " alt="" coords="500,72,468,72,468,67,500,67"/>
<area shape="rect" href="group__uart.html#ga6c04950ec7c317f61e910caa14e9e893" title="Main loop for reading and processing UART commands." alt="" coords="150,56,288,83"/>
<area shape="poly" title=" " alt="" coords="321,72,289,72,289,67,321,67"/>
<area shape="poly" title=" " alt="" coords="134,59,101,54,102,49,135,54"/>
<area shape="poly" title=" " alt="" coords="524,105,454,86,455,81,525,99"/>
</map>
</div>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="ga1d7a96191316d9fa9bdc443ec4543c7c" name="ga1d7a96191316d9fa9bdc443ec4543c7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1d7a96191316d9fa9bdc443ec4543c7c">&#9670;&#160;</a></span>cached_current</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float cached_current[8]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga910c659dfcdb6bf3d2b0250cf86bdcc0" name="ga910c659dfcdb6bf3d2b0250cf86bdcc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga910c659dfcdb6bf3d2b0250cf86bdcc0">&#9670;&#160;</a></span>cached_power</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float cached_power[8]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga0575226af452d6c350688e398738bbb7" name="ga0575226af452d6c350688e398738bbb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0575226af452d6c350688e398738bbb7">&#9670;&#160;</a></span>cached_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool cached_state[8]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga6edc82babd1a9ad7d9adbdf6a17e2ca7" name="ga6edc82babd1a9ad7d9adbdf6a17e2ca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6edc82babd1a9ad7d9adbdf6a17e2ca7">&#9670;&#160;</a></span>cached_uptime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t cached_uptime[8]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga80aeccbfd233d006354952af7ff66665" name="ga80aeccbfd233d006354952af7ff66665"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga80aeccbfd233d006354952af7ff66665">&#9670;&#160;</a></span>cached_voltage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float cached_voltage[8]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga433a3ce956516f75006c888ead72e00d" name="ga433a3ce956516f75006c888ead72e00d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga433a3ce956516f75006c888ead72e00d">&#9670;&#160;</a></span>channel_last_on</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t channel_last_on[8]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga790cd8552c0d4039453fb0afa09aba81" name="ga790cd8552c0d4039453fb0afa09aba81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga790cd8552c0d4039453fb0afa09aba81">&#9670;&#160;</a></span>channel_uptime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t channel_uptime[8] = {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga1c169957ef1dfebca639a0eafcf9ecb7" name="ga1c169957ef1dfebca639a0eafcf9ecb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1c169957ef1dfebca639a0eafcf9ecb7">&#9670;&#160;</a></span>CurData</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t CurData</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gad1c36e17e4c59087ed7b441f725ca823" name="gad1c36e17e4c59087ed7b441f725ca823"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad1c36e17e4c59087ed7b441f725ca823">&#9670;&#160;</a></span>CurPar</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t CurPar</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gae5eff8c0847716df84bebd4b4eed4ce0" name="gae5eff8c0847716df84bebd4b4eed4ce0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae5eff8c0847716df84bebd4b4eed4ce0">&#9670;&#160;</a></span>frame</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t frame[<a class="el" href="_c_o_n_f_i_g_8h.html#ada5ed028f3ce7bdfbe8fe23827b9b493">HLW8032_FRAME_LENGTH</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga98c848a20dba7cc003020b1c42cd742c" name="ga98c848a20dba7cc003020b1c42cd742c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga98c848a20dba7cc003020b1c42cd742c">&#9670;&#160;</a></span>last_current</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float last_current = 0.0f</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gad3c020358ff7347ff2efff64b793bf3d" name="gad3c020358ff7347ff2efff64b793bf3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad3c020358ff7347ff2efff64b793bf3d">&#9670;&#160;</a></span>last_power</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float last_power = 0.0f</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gabe6c80c69a1c9865acdd7844392d2d97" name="gabe6c80c69a1c9865acdd7844392d2d97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe6c80c69a1c9865acdd7844392d2d97">&#9670;&#160;</a></span>last_voltage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float last_voltage = 0.0f</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga0e83257fc55bfbfd29f0b1e8dfa46258" name="ga0e83257fc55bfbfd29f0b1e8dfa46258"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0e83257fc55bfbfd29f0b1e8dfa46258">&#9670;&#160;</a></span>PF</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t PF</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga93bc4334bbc37e441ce5ad4618ebfef1" name="ga93bc4334bbc37e441ce5ad4618ebfef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga93bc4334bbc37e441ce5ad4618ebfef1">&#9670;&#160;</a></span>PF_Count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t PF_Count = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gac73022164f169c2d9d5a0798cdc65795" name="gac73022164f169c2d9d5a0798cdc65795"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac73022164f169c2d9d5a0798cdc65795">&#9670;&#160;</a></span>poll_channel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t poll_channel = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga9eef43327283b572dd7b4582dc30a10f" name="ga9eef43327283b572dd7b4582dc30a10f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9eef43327283b572dd7b4582dc30a10f">&#9670;&#160;</a></span>PowData</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t PowData</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga0c7c518bf278f337eb58dd7d25928352" name="ga0c7c518bf278f337eb58dd7d25928352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0c7c518bf278f337eb58dd7d25928352">&#9670;&#160;</a></span>PowPar</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t PowPar</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga71f9c126ad863dbe69877813ad1a3092" name="ga71f9c126ad863dbe69877813ad1a3092"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga71f9c126ad863dbe69877813ad1a3092">&#9670;&#160;</a></span>rx_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t rx_buf[<a class="el" href="_h_l_w8032__driver_8h.html#ae2ffdc964c3e8df6a8ebf772f03fba13">MAX_RX_BYTES</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga97815d40a4bc549e6a9fa18ce1808c0f" name="ga97815d40a4bc549e6a9fa18ce1808c0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97815d40a4bc549e6a9fa18ce1808c0f">&#9670;&#160;</a></span>VolData</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t VolData</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga08cd0fc8d7d9c5e3a71ebb2b5caed1fc" name="ga08cd0fc8d7d9c5e3a71ebb2b5caed1fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga08cd0fc8d7d9c5e3a71ebb2b5caed1fc">&#9670;&#160;</a></span>VolPar</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t VolPar</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
